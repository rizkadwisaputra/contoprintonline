var refPnH,$hb,cntr=0,jabedi=0,dropship,jsonPath="/ext/json/ongkir",jsonPath2="/dynamo/GOJEK_BDG.0001",jsonPath4="/dynamo/XTRANS_BDG.0001",jsonPath5="/dynamo/DAYTRANS_BDG.0001",jsonPath6="/dynamo/BARAYA_BDG.0001",jsonPath7,dataJSON,dataJSON2,dataJSON3,dataJSON4,dataJSON5,dataJSON6,dataJSON7,dataJH,djr,arrayKurir=["","JNE (REGULAR)","GO-JEK (BANDUNG)","LEGA PAKET","X-TRANS (JAKARTA)","DAY TRANS (JAKARTA)","BARAYA (JAKARTA)","POS INDONESIA","","","","JNE (YES)","JNE (OKE)"],xhrCounter=0,pth=/localhost/i.test(location.href)?"/images/":"https://storage.googleapis.com/printco-assets/",misc={caps:function(a){if(a){a=a.toUpperCase();}
return a;},en_d:function(){$(".nama-penerima-dropship").last().removeAttr("readonly");$(".telepon-penerima-dropship").last().removeAttr("readonly");$(".provinsi-penerima-dropship").last().removeAttr("readonly");if($(".ko-penerima-dropship").last().val()!==""){$(".ko-penerima-dropship").last().removeAttr("readonly");}
if($(".kk-penerima-dropship").last().val()!==""){$(".kk-penerima-dropship").last().removeAttr("readonly");}
$(".alamat-penerima-dropship").last().removeAttr("readonly");$(".bantuan-prov").last().removeAttr("disabled");if($(".provinsi-penerima-dropship").last().val()!==""&&$(".ko-penerima-dropship").last().val()!==""){$(".bantuan-kab").last().removeAttr("disabled");}
if($(".ChosenKurirDropship").last().val()!==""){$(".bantuan-kur").last().removeAttr("disabled");$(".ChosenKurirDropship").last().removeAttr("disabled");}
if($(".kk-penerima-dropship").last().val()!==""){$(".bantuan-kec").last().removeAttr("disabled");}},di_d:function(){$(".nama-penerima-dropship").attr("readonly","readonly");$(".telepon-penerima-dropship").attr("readonly","readonly");$(".provinsi-penerima-dropship").attr("readonly","readonly");$(".ko-penerima-dropship").attr("readonly","readonly");$(".kk-penerima-dropship").attr("readonly","readonly");$(".alamat-penerima-dropship").attr("readonly","readonly");$(".bantuan-prov").prop("disabled",1);$(".bantuan-kab").prop("disabled",1);$(".bantuan-kec").prop("disabled",1);$(".bantuan-kur").prop("disabled",1);$(".ChosenKurirDropship").prop("disabled",1);},delPadBody:function(){"use strict";$("body")[0].removeAttribute("style");if($(window).width()<600){$(".modal.fade").on("shown.bs.modal",function(){$(this).animate({"padding-right":0},300);});}},btnBantuanLokasi:function(){"use strict";$(".btnBantuanLokasi").on("click",function(){if(!$("#bantuanLokasiWords").html().length){$("#bantuanLokasi").find(".modal-title").html("UPSSS...");$("#bantuanLokasiWords").html("<div class='alert alert-info text-center'>Silakan <strong>pilih kurir</strong> terlebih dahulu</div>");}
$("#bantuanLokasi").modal({show:1,backdrop:"static"});});$(".btnBantuanLokasi2").on("click",function(){if(!$("#bantuanLokasi2Words").html().length){$("#bantuanLokasi2").find(".modal-title").html("UPSSS...");$("#bantuanLokasi2Words").html("<div class='alert alert-info text-center'>Silakan <strong>pilih provinsi</strong> terlebih dahulu</div>");}
$("#bantuanLokasi2").modal({show:1,backdrop:"static"});});},miscError:function(){"use strict";$("#miscError").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);},helpModal:function(){"use strict";$("#cekDong").on("click",misc.cekSemuaInput);$("#clearDong").on("click",misc.clearSemuaInput);$("#help_t").on("click",function(){$("#bantuan").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);});},spfLink:function(){"use strict";$(".spf-link").on("click",function(e){$("a").not($(e.currentTarget)).attr("href","#").promise().done(function(){$("button, input, textarea, select").prop("disabled",1).promise().done(function(){$("section, footer").css({opacity:0.5});});});});},spfLinkFX:function(){"use strict";$("button, input, textarea, select").prop("disabled",1);$("a").attr("href","#");$("section, footer").css({opacity:0.5});},tk:function(a,z){"use strict";var f,r,i;f=[];i=1;z=z===","?",":".";if(a!==undefined&&a!==""){r=Math.abs(Math.floor(a)).toString();f=r.split("").reverse();while(i<=Math.floor(f.length/4)){f.splice((4*i-1),0,z);i+=1;}
a=f.reverse().join("")+",-";}else{a="0,-";}
return a;},kt:function(a){"use strict";var b;if(b!==undefined){b=Number(a.replace(/\.+|rp|,\-|\s+/ig,""));}else{b=0;}
return b;},comma:function(a){"use strict";var result=a;if(a!==undefined){if(a%1>0){result=misc.roundUp(a*1000)/1000;result=result.toFixed(2);}
result=result.toString().replace(/\./g,",");}
return result;},trimS:function(a){"use strict";var r=a/1e6;if(r%1>0){r=r.toFixed(2);}
return r+" MB";},trimSpeed:function(a){"use strict";var ar=[" B/s"," KB/s"," MB/s"],r,u;u=ar[0];if(Math.floor(a/1e6)>0){r=a/1e6;u=ar[2];}else if(Math.floor(a/1e3)>0){r=a/1e3;u=ar[1];}
if(r%1>0){r=r.toFixed(2);}
return r+u;},wrn:function(){"use strict";return"Pesanan Anda belum selesai terunggah!";},checkEmail:function(a){"use strict";var rn=/^([\w\-]+(?:\.[\w\-]+)*)@((?:[\w\-]+\.)*\w[\w\-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,result=0;if(rn.test(a)){result=1;}
return result;},checkPhone:function(a){"use strict";var result=0;if(/\d{10,}/.test(a)){result=1;}
return result;},r_d:function(a){"use strict";var b,buffer=[];if(a instanceof Array){b=a.slice();b.forEach(function(v,i){b.forEach(function(vv,ii){if(i!==ii&&v===vv){b.splice(ii,1,"_*deleted*_");}});});b.forEach(function(v){if(v!=="_*deleted*_"){buffer.push(v);}});}
return buffer;},roundUp:function(a){"use strict";if(a%1>0){a=Math.ceil(a);}
return a;},initTooltip:function(){"use strict";$("[data-toggle=\"tooltip\"]").each(function(){if($(this).tooltip){$(this).tooltip("destroy");}
$(this).tooltip({container:"body",html:true,animation:false}).bind("click focus",function(){$(this).tooltip("hide");});});},checkPK:function(v,a,d){"use strict";var result=0,i=0,dob=Object.keys(d);if(a===0){while(i<dob.length){if(d[i].provinsi===v){result=1;break;}
i+=1;}}else{while(i<dob.length){if(d[i].kota===v){result=1;break;}
i+=1;}}
return result;},checkPK2:function(v,d){"use strict";var result=0,i=0,dob=Object.keys(d);while(i<dob.length){if(d[i].lokasi===v){result=1;break;}
i+=1;}
return result;},cekSemuaInput:function(){"use strict";function hlmnW(t){var tw=/halaman-warna/i.test(t.className);var result=0;if(tw){result=1;}
return result;}
$("#bantuan").modal("hide").promise().done(function(){var pos;var $jku=$("#jasaKurir");if($("#semua-file").html()===""&&$("#tautanFile").val()===""){$("#uun").css({background:"brown"});}
$(".form-control").each(function(){if(this.getAttribute("readonly")!=="readonly"){if(this.id!=="keteranganTambahan"&&this.id!=="tautanFile"&&this.id!=="answer"&&this.id!=="bugMessageReporter"&&this.id!=="captchaReporter"&&this.id!=="bugEmailReporter"&&!hlmnW(this)){if(this.id!=="email-pemesan"&&this.id!=="email-pemesan-dropship"){if(this.value===""||this.value==="_*_"){$(this).addClass("error-box");}}else{if(!misc.checkEmail(this.value)){$(this).addClass("error-box");}}}
if(this.id==="tautanFile"){if(!$("#semua-file").html()&&!this.value){$(this).addClass("error-box");}}
if(djr!==undefined){if(djr[0].provinsi){if(/provinsiBox/i.test(this.id)||/provinsi-penerima-dropship/i.test(this.className)){if(!misc.checkPK(this.value,0,djr)){$(this).addClass("error-box");}}
if(/kecamatanBox/i.test(this.id)||/kk-penerima-dropship/i.test(this.className)){if(!misc.checkPK(this.value,1,djr)){$(this).addClass("error-box");}}}else{if(/kecamatanBox/i.test(this.id)){if(!misc.checkPK2(this.value,djr)){$(this).addClass("error-box");}}}}else{if(!/bbrp/i.test($jku.val())){if(Number($jku.val())<0||Number($jku.val())>12){$jku.addClass("error-box");}}else{if($(".alamat-pemesan").val()&&$("#ChosenKurirStandard").val()){$(".error-box").removeClass("error-box");}}}
if(/jumlah-pesanan|jumlah-halaman/i.test(this.getAttribute("class"))){if(/^($|0$)/.test(this.value)){$(this).addClass("error-box");}}}});if(!dropship){if(!misc.checkPhone($("#telepon-pemesan").val())){$("#telepon-pemesan").addClass("error-box");}}else{if(!misc.checkPhone($("#telepon-pemesan-dropship").val())){$("#telepon-pemesan-dropship").addClass("error-box");}}
if($(".error-box").length===0){if(!dropship){if(!misc.checkPhone($("#telepon-pemesan").val())){$("#telepon-pemesan").addClass("error-box");}else{if($("#daftarTautanFile").html()||$("#semua-file").html()){$("#lengkapSudah").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);}}}else{if(!misc.checkPhone($("#telepon-pemesan-dropship").val())){$("#telepon-pemesan-dropship").addClass("error-box");}else{if($("#daftarTautanFile").html()||$("#semua-file").html()){$("#lengkapSudah").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);}}}}
if(!dropship){$(".error-box").bind("input change",function(e){if(e.target.id==="email-pemesan"){if(misc.checkEmail(e.target.value)){$(e.target).removeClass("error-box");}else{$(e.target).addClass("error-box");}}else if(e.target.id==="telepon-pemesan"){if(misc.checkPhone(e.target.value)){$(e.target).removeClass("error-box");}else{$(e.target).addClass("error-box");}}else{$(e.target).removeClass("error-box");}});}else{$(".error-box").bind("input change",function(e){if(e.target.id==="email-pemesan-dropship"){if(misc.checkEmail(e.target.value)){$(e.target).removeClass("error-box");}else{$(e.target).addClass("error-box");}}else if(e.target.id==="telepon-pemesan-dropship"){if(misc.checkPhone(e.target.value)){$(e.target).removeClass("error-box");}else{$(e.target).addClass("error-box");}}else{$(e.target).removeClass("error-box");}});}
if($(".error-box").length>0){pos=$(".error-box").eq(0).offset().top-30;if(pos>0){$hb.animate({scrollTop:pos},300);}}else{$("#lengkapSudah").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);$("#selesai").prop("disabled",0);}});},clearSemuaInput:function(){"use strict";$("#bantuan").modal("hide").promise().done(function(){$(".error-box").each(function(){if(!$(this).hasClass("no-clear-manual")){$(this).removeClass("error-box");}});});},buttonSizing:function(){"use strict";function rcfc(){if($(window).width()<=1024){$(".btn-lg").removeClass("btn-lg").addClass("btn-buffer");$(".input-lg").removeClass("input-lg").addClass("input-buffer");$(".btn").each(function(i,v){var $t=$($(".btn")[i]);if(!(/group/.test($(v).parent()[0].className))){$t.addClass("m5");}});$(".input-group-lg").removeClass("input-group-lg").addClass("input-group-buffer");$("#help").fadeOut(150);}else{$(".input-buffer").removeClass("input-buffer").addClass("input-lg");$(".btn-buffer").removeClass("btn-buffer").addClass("btn-lg");$(".input-group-buffer").removeClass("input-group-buffer").addClass("input-group-lg");$("#help").fadeIn(150);$(".btn").removeClass("m5");}}
rcfc();$(window).on("resize",rcfc);$(".btn-social,.btn-social-icon,.fa").each(function(){if($(this).css("display")==="none"){if($(this).hasClass("btn-block")){this.style.cssText+="display:block!important;";}else{this.style.cssText+="display:inline-block!important";}}});},dtr:function(){"use strict";var dte=new Date(),mill=dte.getTime();return mill;},formatClock:function(a){"use strict";if(typeof a!=="number"){a=Number(a);if(isNaN(a)){return"ERROR: INPUT MUST BE NUMBER (SECOND)";}}
if(a<0){return"ERROR: INPUT MUST BE POSITIVE NUMBER";}
var hour,minute,second;hour=Math.floor(a/3600);minute=Math.floor(a/60)-(hour*60);second=a-(hour*3600)-(minute*60);function z(e){if(e<10){e="0"+e;}
return e;}
hour=z(hour);minute=z(minute);second=z(second);return hour+":"+minute+":"+second;},escapeChars:function(a){"use strict";return encodeURIComponent(a);},processTipe:function(u){"use strict";if(/warna/i.test(u)){u="<mark style='background:darkcyan;color:yellow'>"+u+"</mark>";}else if(/premium\ bw/i.test(u)){u="<mark style='background:gold'>"+u+"</mark>";}
return u;},gmO:function(){"use strict";function gN(min,max){ return Math.floor(Math.random()*(max-min+1))+min;}
var n1=gN(5,10),n2=gN(1,5),func=[{o:"+",f:function(a,b){return a+b;}},{o:"-",f:function(a,b){return a-b;}},{o:"&times;",f:function(a,b){return a*b;}}],inx=Math.floor(Math.random()*func.length),opr=func[inx].o,res=func[inx].f(n1,n2);return[n1,n2,opr,res];},scrollAtas:function(){"use strict";var duration=Math.floor($(window).scrollTop()/4);$hb.animate({scrollTop:0},duration,misc.delPadBody);}};function simJS(){"use strict";var namaPemesan,teleponPemesan,emailPemesan,alamatPemesan,template,templateDT,jhw,jhn,jpn,jks,uks,jcr,wb,tipeOrder,jhb,totalBerat,totalHarga,totalPesanan,diskonHarga,diskonLimit,selisihDiskon,pnhHarga,totalBeratArr,totalHargaArr,filePesananArr,selesai,resetSemua,g,gg,dcntr,rx,rxf,hargaOngkir,hargaCetak,waktuSampai,autoCOMPLETE,autoCOMPLETE_T,hargaOngkirArr,update,dropshipPesananHapusTambah,totalBeratDropshipArr,hargaOngkirDropshipArr,dropshipDisplay,indexParent,bufferBDP,$dpp,$bud,$odd,tt_prev_val,uk_prev_val;var $jku=$("#jasaKurir");var $blw=$("#bantuanLokasiWords");var $bl=$("#bantuanLokasi");var $blmt=$bl.find(".modal-title");var $blc=$(".btnBantuanLokasi");var $llc=$(".listLokasi");var $kcb=$("#kecamatanBox");var $kob=$("#kotaBox");var $pvb=$("#provinsiBox");var imgs=["a.png","smile.png","amte.png","paper.png","crossword.png","icon.png","njebluk.png","puyeng.png","c1.png","c2.png","c3.png","whatsapp0000.png","bbm0000.png","jne.png","pos_giro_logo.png","wahana_logo_s.png","pandu_logo_s.png"];var daftarProvinsi=[];var daftarKab=[];var daftarKec=[];var desKur=[];function disBtnProv(a){var $btn=$(".bantuan-prov");if(a!==undefined&&a>-1){$btn.eq(a).prop("disabled",1);$btn.eq(a).on("click","");}else{$btn.prop("disabled",1);$btn.on("click","");}}
function disBtnKab(a){var $btn=$(".bantuan-kab");if(a!==undefined&&a>-1){$btn.eq(a).prop("disabled",1);$btn.eq(a).on("click","");}else{$btn.prop("disabled",1);$btn.on("click","");}}
function disBtnKec(a){var $btn=$(".bantuan-kec");if(a!==undefined&&a>-1){$btn.eq(a).prop("disabled",1);$btn.eq(a).on("click","");}else{$btn.prop("disabled",1);$btn.on("click","");}}
function disBtnKur(a){var $btn=$(".bantuan-kur");if(a!==undefined&&a>-1){$btn.eq(a).prop("disabled",1);$btn.eq(a).on("click","");}else{$btn.prop("disabled",1);$btn.on("click","");}}
function btnProv(){var htm="";var $md=$("#bantuan-prov-modal");var $df=$("#daftar-prov");var $btn=$(".bantuan-prov");if(daftarProvinsi.length){$btn.removeAttr("disabled");htm+="<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Ada "+daftarProvinsi.length+" provinsi di INDONESIA</li>";daftarProvinsi.forEach(function(v){htm+="<li class='list-group-item'>"+v+"</li>";});htm+="</ul>";$df.html(htm);if($df.html()){$btn.prop("disabled",0);$btn.on("click",function(){$md.modal("show");});}}else{disBtnProv();}}
function btnKab(a){var htm="";var $md=$("#bantuan-kab-modal");var $df=$("#daftar-kab");var $btn=$(".bantuan-kab");if(a!==undefined&&a>-1){if(daftarKab[a].length){htm+="<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Ada "+daftarKab[a].length+" kota di "+$(".provinsi-penerima-dropship").eq(a).val()+"</li>";daftarKab[a].forEach(function(v){htm+="<li class='list-group-item'>"+v+"</li>";});htm+="</ul>";$df.html(htm);if($df.html()){$btn.eq(a).prop("disabled",0);$btn.eq(a).on("click",function(){$md.modal("show");});}}else{disBtnKab(a);}}else{if(daftarKab.length){htm+="<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Ada "+daftarKab.length+" kota di "+$("#provinsiBox").val()+"</li>";daftarKab.forEach(function(v){htm+="<li class='list-group-item'>"+v+"</li>";});htm+="</ul>";$df.html(htm);if($df.html()){$btn.prop("disabled",0);$btn.on("click",function(){$md.modal("show");});}}else{disBtnKab();}}}
function btnKec(a){var htm="";var $md=$("#bantuan-kec-modal");var $df=$("#daftar-kec");var $btn=$(".bantuan-kec");if(a!==undefined&&a>-1){if(daftarKec[a].length){htm+="<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Ada "+daftarKec[a].length+" kecamatan di "+$(".ko-penerima-dropship").eq(a).val()+"</li>";daftarKec[a].forEach(function(v){htm+="<li class='list-group-item'>"+v+"</li>";});htm+="</ul>";$df.html(htm);if($df.html()){$btn.eq(a).prop("disabled",0);$btn.eq(a).on("click",function(){$md.modal("show");});}}else{disBtnKec(a);}}else{if(daftarKec.length){htm+="<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Ada "+daftarKec.length+" kecamatan di "+$("#kotaBox").val()+"</li>";daftarKec.forEach(function(v){htm+="<li class='list-group-item'>"+v+"</li>";});htm+="</ul>";$df.html(htm);if($df.html()){$btn.prop("disabled",0);$btn.on("click",function(){$md.modal("show");});}}else{disBtnKec();}}}
function btnKur(a){var htm="";var $md=$("#deskripsi-kurir-modal");var $df=$("#desk-kur");var $btn=$(".bantuan-kur");if(a!==undefined&&a>-1){if(desKur[a]!==undefined){htm+=desKur[a];$df.html(htm);if($df.html()){$btn.eq(a).prop("disabled",0);$btn.eq(a).on("click",function(){$md.modal("show");});}}else{disBtnKur(a);}}else{if(desKur[0]!==undefined){htm+=desKur[0];$df.html(htm);if($df.html()){$btn.prop("disabled",0);$btn.on("click",function(){$md.modal("show");});}}else{disBtnKur();}}}
function pswitcher(a,iz){var $ukc=$(".ukuran-kertas").eq(iz).children(),$tipta=$(".tipe-tinta").eq(iz),$tiptac=$tipta.children(),dt=dataJH,ukv=["_*_",dt.h_k_b6+"|"+dt.b_k_b6+"|B6",dt.h_k_a5+"|"+dt.b_k_a5+"|A5",dt.h_k_b5+"|"+dt.b_k_b5+"|B5",dt.h_k_a4+"|"+dt.b_k_a4+"|A4"],ukkv=["_*_",dt.h_kk_b6+"|"+dt.b_k_b6+"|B6",dt.h_kk_a5+"|"+dt.b_k_a5+"|A5",dt.h_kk_b5+"|"+dt.b_k_b5+"|B5",dt.h_kk_a4+"|"+dt.b_k_a4+"|A4"],ukvs=["_*_",dt.h_k_b6s+"|"+dt.b_k_b6s+"|B6",dt.h_k_a5s+"|"+dt.b_k_a5s+"|A5",dt.h_k_b5s+"|"+dt.b_k_b5s+"|B5",dt.h_k_a4s+"|"+dt.b_k_a4s+"|A4"],ukkvs=["_*_",dt.h_kk_b6s+"|"+dt.b_k_b6s+"|B6",dt.h_kk_a5s+"|"+dt.b_k_a5s+"|A5",dt.h_kk_b5s+"|"+dt.b_k_b5s+"|B5",dt.h_kk_a4s+"|"+dt.b_k_a4s+"|A4"],ukvp=["_*_",dt.h_k_b6_p+"|"+dt.b_k_b6+"|B6",dt.h_k_a5_p+"|"+dt.b_k_a5+"|A5",dt.h_k_b5_p+"|"+dt.b_k_b5+"|B5",dt.h_k_a4_p+"|"+dt.b_k_a4+"|A4"],ukvps=["_*_",dt.h_k_b6_ps+"|"+dt.b_k_b6s+"|B6",dt.h_k_a5_ps+"|"+dt.b_k_a5s+"|A5",dt.h_k_b5_ps+"|"+dt.b_k_b5s+"|B5",dt.h_k_a4_ps+"|"+dt.b_k_a4s+"|A4"],ukvw=["_*_",dt.h_k_b6w+"|"+dt.b_k_b6+"|B6",dt.h_k_a5w+"|"+dt.b_k_a5+"|A5",dt.h_k_b5w+"|"+dt.b_k_b5+"|B5",dt.h_k_a4w+"|"+dt.b_k_a4+"|A4"],ukvws=["_*_",dt.h_k_b6ws+"|"+dt.b_k_b6+"|B6",dt.h_k_a5ws+"|"+dt.b_k_a5+"|A5",dt.h_k_b5ws+"|"+dt.b_k_b5+"|B5",dt.h_k_a4ws+"|"+dt.b_k_a4+"|A4"];if(!/kosong/i.test(a)){if(/hvs/i.test(a.split("|")[1])){$ukc.each(function(i,v){$(v).val(ukv[i]).attr("data-v-p",ukvp[i]).attr("data-o-p",ukv[i]).attr("data-w-p",ukvw[i]);});}else{$ukc.each(function(i,v){$(v).val(ukvs[i]).attr("data-v-p",ukvps[i]).attr("data-o-p",ukvs[i]).attr("data-w-p",ukvws[i]);});}
$tiptac.each(function(i,v){if(i>0){$(v).prop("disabled",0);}});}else{$("#warningKertasKosong").modal("show");if(/hvs/i.test(a.split("|")[1])){$ukc.each(function(i,v){$(v).val(ukkv[i]).attr("data-o-p",ukkv[i]);});}else{$ukc.each(function(i,v){$(v).val(ukkvs[i]).attr("data-o-p",ukkvs[i]);});}
if(Number($tipta.val())!==0){$tipta.val(0).css({"background-color":"",color:"#000"});}
$tiptac.each(function(i,v){if(i===0){$(v).attr("selected","selected");}else if(i>0){$(v).prop("disabled",1);}});}}
function updateOngkirDll(){var plusOngkir=0,deliveryTime="Biaya Kurir<hr style='margin:5px 0'>",beratTotal=0,btb=totalBeratArr.slice(),htb=totalHargaArr.slice();if(hargaOngkirDropshipArr){if(hargaOngkirDropshipArr.length!==$(".dynamic-dropship").length){$.each(hargaOngkirDropshipArr,function(i){if(!$(".dynamic-dropship").eq(i)){hargaOngkirDropshipArr.splice(i,1);totalBeratDropshipArr.splice(i,1);}});}
hargaOngkirDropshipArr.forEach(function(v,i){var vl;plusOngkir+=v;if(v>0){vl="Rp "+misc.tk(v);deliveryTime+="<p>"+vl+"</p>";$(".ongkir-dropship").eq(i).val(vl).css("background-color","lightyellow");$(".berat-unit-dropship").eq(i).val(totalBeratDropshipArr[i]+" kg").css("background-color","lightyellow");}});$("#harga-ongkir").val("Rp "+misc.tk(plusOngkir)).css("background-color","rgb(200,255,200)");$("#harga-ongkir").attr("data-original-title",deliveryTime);}
totalBeratArr=[];totalHargaArr=[];$(".berat-pesanan").each(function(i){if($(this).val()){totalHargaArr[i]=misc.kt($(".harga-pesanan").eq(i).val());totalBeratArr[i]=parseFloat($(this).val().replace(/,/g,"."),10);}else{totalBeratArr[i]=btb[i];totalHargaArr[i]=htb[i];}});if(totalBeratDropshipArr){totalBeratDropshipArr.forEach(function(v,i){var $jbd=$(".dynamic-dropship").eq(i).find(".pesanan-wrap");$(".jumlah-buku-dropship").eq(i).val($jbd.length).css("background-color","lightyellow");beratTotal+=v;});}
$("#total-pesanan").val(totalBeratArr.length);$("#total-berat").val(beratTotal+" kg");}
function checkPesanan(){var i=0,rs=1,l=$(".jumlah-halaman").length;while(i<l){if(!$(".jumlah-halaman").eq(i).val()||!$(".jumlah-pesanan").eq(i).val()||!$(".jenis-kertas").eq(i).val()||!$(".jenis-cover").eq(i).val()||!$(".ukuran-kertas").eq(i).val()){rs=0;break;}
i+=1;}
return rs;}
function updateDropshipArr(){Object.keys(bufferBDP).forEach(function(v){totalBeratDropshipArr[v]=0;bufferBDP[v].forEach(function(x){if(x>0){totalBeratDropshipArr[v]+=x;}});totalBeratDropshipArr[v]=misc.roundUp(totalBeratDropshipArr[v]);hargaOngkirDropshipArr[v]=0;if(hargaOngkirArr[v]){hargaOngkirDropshipArr[v]=totalBeratDropshipArr[v]*hargaOngkirArr[v];}});}
function updateDropshipArrIndex(){Object.keys(bufferBDP).forEach(function(v){bufferBDP[v]=[];});$(".pesanan-wrap").each(function(i,v){var iParent=$(".dynamic-dropship").index($(v).closest(".dynamic-dropship"));if(!bufferBDP[iParent]){bufferBDP[iParent]=[];}
bufferBDP[iParent][i]=totalBeratArr[i];});updateDropshipArr();}
function hapusArrayElm(i){jhw.splice(i,1);jhn.splice(i,1);jpn.splice(i,1);jks.splice(i,1);uks.splice(i,1);jcr.splice(i,1);wb.splice(i,1);tipeOrder.splice(i,1);totalBeratArr.splice(i,1);totalHargaArr.splice(i,1);if(dropship){bufferBDP[indexParent].splice(i,1);updateDropshipArrIndex();}} 
function updateTotal(){var output_berat_total,output_harga_total,plusOngkir,diskon,hargaWrap,deliveryTime,hargaSew,jumlahCopyBuku;output_berat_total=0;output_harga_total=0;hargaWrap=0;hargaSew=0;jumlahCopyBuku=0;$dpp=$(".dropship_perhitungan").eq(indexParent);$bud=$dpp.find(".berat-unit-dropship").eq(0);$odd=$dpp.find(".ongkir-dropship").eq(0);function doThisCalc(){totalBeratArr.forEach(function(v,i){var hargaWrapBook,hargaSewBook;if($(".book-wrapping").eq(i).val()&&$(".jumlah-pesanan").eq(i).val()){hargaWrapBook=Number($(".book-wrapping").eq(i).val())*Number($(".jumlah-pesanan").eq(i).val());}else{hargaWrapBook=0;}
if($(".book-sewing").eq(i).val()&&$(".jumlah-pesanan").eq(i).val()){hargaSewBook=Number($(".book-sewing").eq(i).val())*Number($(".jumlah-pesanan").eq(i).val());}else{hargaSewBook=0;}
output_berat_total+=v;output_harga_total+=totalHargaArr[i];hargaWrap+=hargaWrapBook;hargaSew+=hargaSewBook;wb[i]=hargaWrapBook;jhb[i]=hargaSewBook;});output_berat_total=misc.roundUp(output_berat_total);}
function doDropshipCalc(){$(".harga-pesanan").each(function(i){var hargaWrapBook,hargaSewBook;var v;if(/[,\-\.(rp)\ ]/i.test($(".harga-pesanan").eq(i).val())){v=$(".harga-pesanan").eq(i).val().replace(/[,\-\.(rp)\ ]/ig,"");}else{v=0;}
v=Number(v);if(totalHargaArr[i]!==v||totalHargaArr[i]===undefined){totalHargaArr[i]=v;}
if($(".book-wrapping").eq(i).val()&&$(".jumlah-pesanan").eq(i).val()){hargaWrapBook=Number($(".book-wrapping").eq(i).val())*Number($(".jumlah-pesanan").eq(i).val());}else{hargaWrapBook=0;}
if($(".book-sewing").eq(i).val()&&$(".jumlah-pesanan").eq(i).val()){hargaSewBook=Number($(".book-sewing").eq(i).val())*Number($(".jumlah-pesanan").eq(i).val());}else{hargaSewBook=0;}
output_harga_total+=v;hargaWrap+=hargaWrapBook;hargaSew+=hargaSewBook;wb[i]=hargaWrapBook;jhb[i]=hargaSewBook;});totalBeratDropshipArr.forEach(function(v){output_berat_total+=v;});}
if(!dropship){doThisCalc();}else{updateDropshipArrIndex(doDropshipCalc(updateOngkirDll()));}
pnhHarga=0;hargaCetak=output_harga_total;if(hargaCetak===0||/nan/i.test(hargaCetak)){$("#harga-cetak").val("").removeAttr("style");$(totalHarga).attr("data-original-title","BIAYA TOTAL");}else{$("#harga-cetak").val("Rp "+misc.tk(hargaCetak)).css("background-color","beige");}
if(!dropship){if(/\d/.test(waktuSampai)){deliveryTime="Estimasi pengiriman: "+waktuSampai+" hari (setelah order selesai)";}
if($jku){if(!(/^\d?0$/.test($jku.val()))||(/bbrp/.test($jku.val()))){pnhHarga=refPnH;if(hargaOngkir!==undefined){if(hargaOngkir>0||(hargaOngkir[0]>0&&hargaOngkir[1]>0)){if(Number($jku.val())===1||Number($jku.val())===11||Number($jku.val())===12||(/bbrp/.test($jku.val()))){plusOngkir=Number(hargaOngkir)*misc.roundUp(Number(output_berat_total));}else if(Number($("#jasaKurir").val())===2){plusOngkir=Number(hargaOngkir);deliveryTime="Estimasi sampai di hari yang sama / keesokan hari (setelah order selesai)";}else if(Number($("#jasaKurir").val())===3){plusOngkir=Number(hargaOngkir[0]);if(misc.roundUp(Number(output_berat_total))>5){plusOngkir+=Number(hargaOngkir[1])*(misc.roundUp(Number(output_berat_total))-5);}
deliveryTime="Waktu sampai tergantung pihak LEGA PAKET";}else if(Number($("#jasaKurir").val())>3&&Number($("#jasaKurir").val())<7){plusOngkir=Number(hargaOngkir[0]);if(misc.roundUp(Number(output_berat_total))>1){plusOngkir+=Number(hargaOngkir[1])*(misc.roundUp(Number(output_berat_total))-1);}
deliveryTime="Estimasi sampai di hari yang sama / keesokan hari (setelah order selesai)";}}
else{plusOngkir=0;hargaOngkir=0;deliveryTime="Biaya kurir";}}else{plusOngkir=0;hargaOngkir=0;deliveryTime="Biaya kurir";}}else{plusOngkir=0;hargaOngkir=0;deliveryTime="Biaya kurir";}
if(plusOngkir===0||plusOngkir===undefined){$("#harga-ongkir").val("Rp 0,-");$("#harga-ongkir, #packing-handling").removeAttr("style");$("#harga-ongkir").attr("data-original-title","Biaya kurir");$(totalHarga).attr("data-original-title","BIAYA TOTAL");}else{$("#harga-ongkir").val("Rp "+misc.tk(plusOngkir)).css("background-color","rgb(200,255,200)");$("#harga-ongkir").attr("data-original-title",deliveryTime);$("#packing-handling").css("background-color","rgb(200,255,200)");}}}else{$(".pnh-dropship").each(function(i){var pnh=0;if(totalBeratDropshipArr[i]){pnh=refPnH;}
pnhHarga+=pnh;if(pnh>0){$(this).val("Rp "+misc.tk(pnh)).css("background-color","lightyellow");}else{$(this).val("Rp "+misc.tk(pnh)).removeAttr("style");}});deliveryTime="Biaya Kurir<hr style='margin:5px 0'>";plusOngkir=0;if(hargaOngkirDropshipArr[indexParent]){hargaOngkirDropshipArr.forEach(function(v){plusOngkir+=v;deliveryTime+="<p>Rp "+misc.tk(v)+"</p>";});}else{plusOngkir=0;}
if(plusOngkir===0||/nan/i.test(plusOngkir)){$("#harga-ongkir").add($odd).val("Rp 0,-");$("#harga-ongkir, #packing-handling").add($odd).removeAttr("style");$("#harga-ongkir").attr("data-original-title","Biaya kurir");$(totalHarga).attr("data-original-title","BIAYA TOTAL");}else{$("#harga-ongkir").val("Rp "+misc.tk(plusOngkir)).css("background-color","rgb(200,255,200)");$("#harga-ongkir").attr("data-original-title",deliveryTime);$("#packing-handling").css("background-color","rgb(200,255,200)");$odd.val("Rp "+misc.tk(hargaOngkirDropshipArr[indexParent])).css("background-color","lightyellow");}}
if(!/nan/i.test(plusOngkir)){output_harga_total=hargaCetak+plusOngkir+pnhHarga;}else{output_harga_total=0;}
if(hargaCetak>=diskonLimit){selisihDiskon=hargaCetak-Math.floor(hargaCetak*((100-diskonHarga)/100));}else{selisihDiskon=0;}
diskon=output_harga_total-selisihDiskon+hargaWrap+hargaSew;diskon="Rp "+misc.tk(diskon);output_harga_total=output_harga_total+hargaWrap+hargaSew;if(!!hargaCetak){if(hargaWrap>0&&hargaSew===0){$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display")+"<hr style='margin:10px 0'>[ <span style='color:darkblue'>Rp "+misc.tk(output_harga_total)+"</span> ] <strong>—</strong> "+"[ <span style='color:darkgreen'>Rp "+misc.tk(selisihDiskon)+"</span> ]<div style='margin-top:10px'>Total (+Book Wrap) menjadi:<div style='font-size:24px;margin-top:10px;border-radius:4px;background:lightgreen;border:2px solid darkgreen;padding:6px 12px;' id='hargaSetelahDiskon'>"+diskon+"</div></div>").promise().done(function(){misc.initTooltip();});}else if(hargaWrap===0&&hargaSew>0){$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display")+"<hr style='margin:10px 0'>[ <span style='color:darkblue'>Rp "+misc.tk(output_harga_total)+"</span> ] <strong>—</strong> "+"[ <span style='color:darkgreen'>Rp "+misc.tk(selisihDiskon)+"</span> ]<div style='margin-top:10px'>Total (+Jahit benang) menjadi:<div style='font-size:24px;margin-top:10px;border-radius:4px;background:lightgreen;border:2px solid darkgreen;padding:6px 12px;' id='hargaSetelahDiskon'>"+diskon+"</div></div>").promise().done(function(){misc.initTooltip();});}else if(hargaWrap>0&&hargaSew>0){$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display")+"<hr style='margin:10px 0'>[ <span style='color:darkblue'>Rp "+misc.tk(output_harga_total)+"</span> ] <strong>—</strong> "+"[ <span style='color:darkgreen'>Rp "+misc.tk(selisihDiskon)+"</span> ]<div style='margin-top:10px'>Total (+Book Wrap +Jahit benang) menjadi:<div style='font-size:24px;margin-top:10px;border-radius:4px;background:lightgreen;border:2px solid darkgreen;padding:6px 12px;' id='hargaSetelahDiskon'>"+diskon+"</div></div>").promise().done(function(){misc.initTooltip();});}else{$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display")+"<hr style='margin:10px 0'>[ <span style='color:darkblue'>Rp "+misc.tk(output_harga_total)+"</span> ] <strong>—</strong> "+"[ <span style='color:darkgreen'>Rp "+misc.tk(selisihDiskon)+"</span> ]<div style='margin-top:10px'>Total menjadi:<div style='font-size:24px;margin-top:10px;border-radius:4px;background:lightgreen;border:2px solid darkgreen;padding:6px 12px;' id='hargaSetelahDiskon'>"+diskon+"</div></div>").promise().done(function(){misc.initTooltip();});}}else{$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display")).promise().done(function(){misc.initTooltip();});}
totalBerat.value=misc.comma(output_berat_total)+" kg";totalHarga.value="Rp "+misc.tk(output_harga_total);totalPesanan.value=totalBeratArr.length;$(".jumlah-pesanan").each(function(){jumlahCopyBuku+=Number($(this).val());});wb.forEach(function(v,i){wb[i]="Rp "+misc.tk(v);});jhb.forEach(function(v,i){jhb[i]="Rp "+misc.tk(v);});if(output_harga_total===0||/nan/i.test(output_berat_total)||/nan/i.test(misc.tk(hargaCetak))){totalBerat.value="";totalHarga.value="";totalPesanan.value="";$("#packing-handling")[0].value="";$(".berat-pesanan, .harga-pesanan").add($(totalBerat)).add($(totalHarga)).add($(totalPesanan)).removeAttr("style");$("#harga-cetak, #harga-ongkir, #packing-handling, #book-wrap, #book-sewing, #total-copy").add($odd).add($bud).val("").removeAttr("style");$("#harga-ongkir").attr("data-original-title","Biaya kurir");resetSemua.disabled=1;$(totalHarga).attr("data-original-title","BIAYA TOTAL");if(dropship){$(".berat-unit-dropship").eq(indexParent).val("").removeAttr("style");$(".ongkir-dropship").eq(indexParent).val("").removeAttr("style");$(".jumlah-buku-dropship").eq(indexParent).val("").removeAttr("style");updateDropshipArrIndex();}}else{$(totalBerat).add($(totalHarga)).add($(totalPesanan)).add($("#total-copy")).css({"background-color":"lightskyblue","color":"#000"});$("#book-wrap").val("Rp "+misc.tk(hargaWrap));$("#book-sewing").val("Rp "+misc.tk(hargaSew));$("#total-copy").val(jumlahCopyBuku);resetSemua.disabled=0;$(totalHarga).attr("data-original-title","<div class='text-right'><p>Rp "+misc.tk(hargaCetak)+"</p><p>Rp "+misc.tk(hargaWrap)+"</p><p>Rp "+misc.tk(hargaSew)+"</p><p>Rp "+misc.tk(plusOngkir)+"</p><p>Rp "+misc.tk(pnhHarga)+"</p></div>");$("#packing-handling").val("Rp "+misc.tk(pnhHarga));if(dropship){totalBerat.value=misc.comma(output_berat_total)+" kg";if(totalBeratDropshipArr[indexParent]){$bud.val(totalBeratDropshipArr[indexParent]+" kg").css("background-color","lightyellow");output_berat_total=0;totalBeratDropshipArr.forEach(function(v){output_berat_total+=v;});output_berat_total=misc.comma(output_berat_total)+" kg";totalBerat.value=output_berat_total;}
$(".jumlah-buku-dropship").eq(indexParent).val($(".dynamic-dropship").eq(indexParent).find(".pesanan-wrap").length).css("background-color","lightyellow");}}
if(!dropship){if(!$(".harga-pesanan").last().val()||$(".harga-pesanan").last().val()==="Rp 0,-"){$(".tambah").last().prop("disabled",true);}else{$(".tambah").last().prop("disabled",false);}}else{dropshipPesananHapusTambah();}}
function hitung(a,i){var output_harga,output_berat,cds,cv,lim,bookWrapUnit,output_berat_ds,output_ongkir_ds,bookSewUnit;var ukwp=0;var $hw=$(".halaman-warna");var $hwi=$hw.eq(i);if(jabedi){if($(".book-sewing").eq(i).children("option").length>1){$(".book-sewing").eq(i).children("option").last().remove();}
$(".book-sewing").eq(i).prop("disabled",1).attr("name","jabedi").val(0);}
lim=$(".pesanan-wrap").length-1;bookWrapUnit=0;bookSewUnit=0;jhw[i]=0;function hw(a){var h;if(a!==undefined){h=a.replace(/\ /g,"").replace(/^,|,$/g,"");}
if(a===undefined){misc.miscError();return;}
var ranges=[];var nums=[];var rangesT=0;var m=0;var nu;var size;var error_flag=0;var iv=0;var whichNum=[];var whichIx;var hs=[];var r=[0,a,hs];if(!(/[a-z]_\+\*\(\)~`!@#\$%^&\*\[\]:;"'\.<>\/\\\?\|\{\}/i.test(h))){if(/-/.test(h)){if(!(/(^(\ +)?-)|((\ +)?-$)|(\ ?-\ ?,)|(,\ ?-\ ?)/.test(h))){if(/\d+-\d+/.test(h)){ranges=h.match(/\d+-\d+/g);}
if(ranges.length&&(/,/.test(h))){hs=h.split(/,/);}
while(m<ranges.length){nu=ranges[m].split(/-/);nu[0]=Number(nu[0]);nu[1]=Number(nu[1]);if((nu[1]%2===0&&nu[0]%2>0)&&(nu[1]>nu[0])){if($hwi.hasClass("error-box")){$hwi.removeClass("error-box no-clear-manual");}
iv=nu[0];size=nu[1]-nu[0]+1;rangesT+=size;while(iv<=nu[1]){whichNum.push(iv.toString());iv+=1;}
whichIx=hs.indexOf(ranges[m]);Array.prototype.splice.apply(hs,[whichIx,1].concat(whichNum));whichNum=[];}else{error_flag=1;break;}
m+=1;}}else{error_flag=1;}}
if(!error_flag){if(h!==undefined){if(rangesT>0&&rangesT%2===0){if(h.replace(/\d+-\d+/g,"").replace(/,{2,}/g,",").replace(/^,|,$/g,"")!==""){nums=h.replace(/\d+-\d+/g,"").replace(/,{2,}/g,",").replace(/^,|,$/g,"").split(/,/g);rangesT+=nums.length;}
h=h.split(/,/g).join(", ");r=[rangesT,h,hs];}else if(rangesT===0&&(/,/.test(h))){h=h.split(/,/g);r=[h.length,h.join(", "),hs];}}else{misc.miscError();return;}}}
return r;}
function testHWI(a){var hwa=hw(a);var r;if(hwa[1]!==undefined){r=hwa[1].replace(/\ /g,"").replace(/\d+-\d+/g,"").replace(/^,|,$/g,"");}else{misc.miscError();return;}
var m=0;var result=1;var ii;var nunu;var mumu;if(hwa[2].length&&result===1){m=0;while(m<hwa[2].length){mumu=Number(hwa[2][m]);nunu=Number(hwa[2][m+1]);if(mumu>=nunu){result=0;break;}
m+=1;}}
if(r!==undefined&&r!==""&&result===1){r=r.split(/,/g);while(m<r.length){if(/\d+/.test(r[m])&&!(/-/.test(r[m]))){ii=m+1;if(ii%2!==0){if(Number(r[m])%2===0||Number(r[m+1])!==(Number(r[m])+1)){result=0;break;}}
if(ii%2===0){if(Number(r[m])%2!==0||Number(r[m-1])!==(Number(r[m])-1)){result=0;break;}}}
m+=1;}}
return result;}
function checkHWI(){var hwa=hw($hwi.val());var $ukwpi;if($hwi.hasClass("error-box")){$hwi.removeClass("error-box no-clear-manual");}
if(hwa!==undefined){if(!(/[\d\-]/.test(hwa[1]))&&hwa[0]===0){$hwi.removeClass("error-box no-clear-manual").val("");ukwp=0;}
if((hwa[0]===0&&(/[\d\-,]/.test(hwa[1])))||(hwa[0]%2>0)){$hwi.addClass("error-box no-clear-manual");$("#koWarnaWarning").modal("show");misc.delPadBody();ukwp=0;$("#koWarnaWarning").on("shown.bs.modal",function(){$("#selesai, .tambah, .hapus").prop("disabled",1);if(dropship){$("#tambah-tujuan, #hapus-tujuan").prop("disabled",1);}});return;}
if(hwa[0]%2===0&&hwa[0]>0){if(testHWI($hwi.val())){if(/(a|b)6/i.test(uks[i])){jhw[i]=Math.ceil(hwa[0]/16)*16;}else{jhw[i]=Math.ceil(hwa[0]/8)*8;}
$hwi.removeClass("error-box no-clear-manual").val(hwa[1]);ukwp=0;$ukwpi=$(".ukuran-kertas option:selected").eq(i);if($ukwpi.length){if($ukwpi.attr("data-w-p")){$ukwpi=$ukwpi.attr("data-w-p");if(/\|/.test($ukwpi)&&$ukwpi!==undefined){ukwp=Number($ukwpi.split("|")[0]);}}}}
if(!testHWI($hwi.val())){$hwi.addClass("error-box no-clear-manual");$("#koWarnaWarning").modal("show");misc.delPadBody();ukwp=0;$("#koWarnaWarning").on("shown.bs.modal",function(){$("#selesai, .tambah, .hapus").prop("disabled",1);if(dropship){$("#tambah-tujuan, #hapus-tujuan").prop("disabled",1);}});return;}}}}
if(dropship){indexParent=$(".dynamic-dropship").index($(a).closest(".dynamic-dropship"));}
function poc(a,i,cv){a[i]=cv;}
if(!a.dataset){cds=a[0].getAttribute("data-value");cv=a[0].value;}else{cds=a.dataset.value;cds=a.dataset.value;if(!(/jhw/i.test(cds))){cv=a.value;}else{cv=hw(a.value)[0];}}
if(cds==="jhn"){poc(jhn,i,cv);}else if(cds==="jpn"){poc(jpn,i,cv);}else if(cds==="jks"){if(/\|/.test(cv)&&cv!==undefined){poc(jks,i,cv.split("|"));}}else if(cds==="uks"){if(Number($(".tipe-tinta").eq(i).val())===0){$(".ukuran-kertas").eq(i).children().each(function(j){$(this).val($(this).attr("data-o-p"));if(j===1){$(".jenis-kertas").eq(i).children().eq(j).text("HSSD");}else if(j>2){$(".jenis-kertas").eq(i).children().eq(j).prop("disabled",0);}});}else if(Number($(".tipe-tinta").eq(i).val())===1){$(".ukuran-kertas").eq(i).children().each(function(j){$(this).val($(this).attr("data-v-p"));if(j===1){$(".jenis-kertas").eq(i).children().eq(j).text("HSSD");}else if(j>2){$(".jenis-kertas").eq(i).children().eq(j).prop("disabled",0);}});}else{$(".ukuran-kertas").eq(i).children().each(function(j){$(this).val($(this).attr("data-w-p"));if(j>2){$(".jenis-kertas").eq(i).children().eq(j).prop("disabled",1);}});}
cv=$(a).val();if(/\|/.test(cv)&&cv!==undefined){poc(uks,i,cv.split("|"));}}else if(cds==="jcr"){if(/\|/.test(cv)&&cv!==undefined){poc(jcr,i,cv.split("|"));}}else if(cds==="jhw"){checkHWI();}
tipeOrder[i]="REGULAR BW";if(/tipe\-tinta/i.test(a.className)){if(Number(a.value)===0){$(a).removeAttr("style");$(".ukuran-kertas").eq(i).children().each(function(j){$(this).val($(this).attr("data-o-p"));if(j===1){$(".jenis-kertas").eq(i).children().eq(j).text("HSSD");}else if(j>2){$(".jenis-kertas").eq(i).children().eq(j).prop("disabled",0);}});}else if(Number(a.value)===1){tipeOrder[i]="PREMIUM BW";$(a).css({"background-color":"gold",color:"#000"});$(".ukuran-kertas").eq(i).children().each(function(j){$(this).val($(this).attr("data-v-p"));if(j===1){$(".jenis-kertas").eq(i).children().eq(j).text("HSSD");}else if(j>2){$(".jenis-kertas").eq(i).children().eq(j).prop("disabled",0);}});}else if(Number(a.value)===2){tipeOrder[i]="WARNA";$(a).css({"background-color":"darkcyan",color:"yellow"});$(".ukuran-kertas").eq(i).children().each(function(j){$(this).val($(this).attr("data-w-p"));if(j>2){$(".jenis-kertas").eq(i).children().eq(j).prop("disabled",1);}});}
cv=$(".ukuran-kertas").eq(i).val();if(/\|/.test(cv)&&cv!==undefined){poc(uks,i,cv.split("|"));}
checkHWI();}
wb[i]=Number($(".book-wrapping").eq(i).val())*Number(jpn[i]);jhb[i]=Number($(".book-sewing").eq(i).val())*Number(jpn[i]);$(".book-wrapping").each(function(i,v){if(Number($(v).val())>0){bookWrapUnit+=Number(jpn[i]);}});$(".book-sewing").each(function(i,v){if(Number($(v).val())>0){bookSewUnit+=Number(jpn[i]);}});if(bookWrapUnit>0){$("#book-wrap").attr("data-original-title","Book wrap: "+$("#book-wrap").attr("data-h-bw")+" &times; "+bookWrapUnit).css("background","khaki");}else{$("#book-wrap").attr("data-original-title","Biaya book wrap").removeAttr("style");}
if(bookSewUnit>0){$("#book-sewing").attr("data-original-title","Jahit benang: "+$("#book-sewing").attr("data-h-bs")+" &times; "+bookSewUnit).css("background","sandybrown");}else{$("#book-sewing").attr("data-original-title","Biaya total jahit benang").removeAttr("style");}
if($hwi.val()!==""){checkHWI();}else{$hwi.removeClass("error-box no-clear-manual");}
function tryThis(){if(Number($(".tipe-tinta").eq(i).val())===2){if(/(a|b)6/i.test($(".ukuran-kertas").eq(i).val())){jhn[i]=Math.ceil(jhn[i]/16)*16;}else if(/a5/i.test(uks[i])){jhn[i]=Math.ceil(jhn[i]/8)*8;}else if(/b5/i.test(uks[i])){jhn[i]=Math.ceil(jhn[i]/4)*4;}
$(".jumlah-halaman").eq(i).val(jhn[i]);jhn[i]=jhn[i].toString();}else{if(Number($(".jumlah-halaman").eq(i).attr("data-o-v"))&&!/(a|b)6/i.test(uks[i])){jhn[i]=$(".jumlah-halaman").eq(i).attr("data-o-v").toString();$(".jumlah-halaman").eq(i).val(Number($(".jumlah-halaman").eq(i).attr("data-o-v")));}else if(/(a|b)6/i.test(uks[i])){jhn[i]=Math.ceil(jhn[i]/16)*16;$(".jumlah-halaman").eq(i).val(jhn[i]);jhn[i]=jhn[i].toString();}}
if(/ring/i.test($(".jenis-cover").eq(i).val())){if(Number(jhn[i])>300){$(".ukuran-kertas").eq(i).prop("disabled",1);$(".jenis-kertas").eq(i).prop("disabled",1);$(".tambah, .hapus").prop("disabled",1);if(dropship){$("#tambah-tujuan, #hapus-tujuan").prop("disabled",1);}
$(".jumlah-halaman").addClass("error-box no-clear-manual");$("#ringKawatWarning").modal({backdrop:"static",keyboard:0,show:1});$("#ringKawatWarning").on("hidden.bs.modal",function(){$(".jumlah-halaman").eq(i).focus();});return;}
if(Number(jhn[i])<=300){$("#ringKawatWarning").on("hidden.bs.modal","");$(".ukuran-kertas").eq(i).prop("disabled",0);$(".jenis-kertas").eq(i).prop("disabled",0);if($(".jumlah-halaman").eq(i).hasClass("error-box")){$(".jumlah-halaman").eq(i).removeClass("error-box");}}}else{if(Number(jhn[i])>1200){$(".tambah, .hapus").prop("disabled",1);if(dropship){$("#tambah-tujuan, #hapus-tujuan").prop("disabled",1);}
$(".jumlah-halaman").eq(i).addClass("error-box no-clear-manual");$("#standardJilidWarning").modal({backdrop:"static",keyboard:0,show:1});$(".ukuran-kertas").eq(i).prop("disabled",1);$(".jenis-kertas").eq(i).prop("disabled",1);$("#standardJilidWarning").on("hidden.bs.modal",function(){$(".jumlah-halaman").eq(i).focus();});return;}
if(Number(jhn[i])<=1200){$("#standardJilidWarning").on("hidden.bs.modal","");$(".ukuran-kertas").eq(i).prop("disabled",0);$(".jenis-kertas").eq(i).prop("disabled",0);if($(".jumlah-halaman").eq(i).hasClass("error-box")){$(".jumlah-halaman").eq(i).removeClass("error-box");}}}
$(".book-wrapping-price").eq(i).val("Rp "+misc.tk(wb[i])).css({"background-color":"azure"});$(".book-sewing-price").eq(i).val("Rp "+misc.tk(jhb[i])).css({"background-color":"azure"});output_berat=Number(jpn[i])*(Number(jhn[i])/Number(uks[i][1]));totalBeratArr[i]=output_berat;output_berat=misc.comma(output_berat)+" kg";$(".berat-pesanan").eq(i).val(output_berat); if(dropship){output_berat_ds=0;if(totalBeratDropshipArr[indexParent]){output_berat_ds=totalBeratDropshipArr[indexParent];}
$(".berat-unit-dropship").eq(i).val(misc.comma(output_berat_ds)+" kg");output_ongkir_ds=output_berat_ds*hargaOngkirDropshipArr[indexParent];$(".ongkir-dropship").eq(i).val("Rp "+misc.tk(output_ongkir_ds));}
output_harga=((((Number(jhn[i])-Number(jhw[i]))*Number(uks[i][0])*Number(jks[i][0]))+Number(jcr[i][0]))+(Number(jhw[i])*ukwp))*Number(jpn[i]);totalHargaArr[i]=output_harga;output_harga="Rp "+misc.tk(output_harga);wb[i]="Rp "+misc.tk(wb[i]);if(output_harga&&output_berat){$(".harga-pesanan").eq(i).val(output_harga).css({color:"darkgreen"});$(".berat-pesanan").eq(i).val(output_berat);$(".berat-pesanan, .harga-pesanan").css({"background-color":"azure"});}
updateTotal();}
if(jhn[i]&&jpn[i]&&jks[i]&&uks[i]&&jcr[i]){tryThis();}else{$(".tambah").eq(i).add($(resetSemua)).add($(selesai)).prop("disabled",1);if(diskonHarga>0){$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display"));}
output_berat="";output_harga="";totalBerat.value="";totalHarga.value="";totalPesanan.value="";$("#book-sewing").val("");$(".book-wrapping-price").eq(i).val("");$(".book-sewing-price").eq(i).val("");$("#packing-handling, #book-wrap, #harga-cetak, #harga-ongkir, .book-wrapping-price, .book-sewing-price, .berat-pesanan, .harga-pesanan, #total-copy, #book-sewing").add($(totalBerat)).add($(totalHarga)).add($(totalPesanan)).toArray().forEach(function(v){if(!(/rp|kg/i.test(v.value))){v.removeAttribute("style");}});$("#packing-handling, #book-wrap, #harga-cetak, #harga-ongkir").val("");$("#harga-ongkir").attr("data-original-title","Biaya kurir");$(".berat-pesanan").eq(i).val(output_berat);$(".harga-pesanan").eq(i).val(output_harga); if(dropship){$(".berat-unit-dropship").eq(i).val("").removeAttr("style");$(".ongkir-dropship").eq(i).val("").removeAttr("style");$(".jumlah-buku-dropship").eq(i).val("").removeAttr("style");}}}
function resetG(){g=0;gg=0;}
dropshipPesananHapusTambah=function(){$(".dynamic-dropship").each(function(i){var $pw=$(this).find(".pesanan-wrap");$pw.each(function(ix,vx){if(ix===0||ix<$pw.length-1){$(vx).find(".hapus").prop("disabled",true);}else{$(vx).find(".hapus").prop("disabled",false);}
if(/Rp\ 0,-|^$/i.test($(vx).find(".harga-pesanan").val())||(/^$/.test($(".kk-penerima-dropship").eq(i).val()))){$("#tambah-tujuan").add($(vx).find(".tambah")).prop("disabled",true);}else{$("#tambah-tujuan, #hapus-tujuan").prop("disabled",false);if($(".dynamic-dropship").length===1){$("#hapus-tujuan").prop("disabled",true);}
if(ix<$pw.length-1){$(vx).css({"background-color":"beige","border-top":"2px dashed forestgreen","border-bottom":"2px dashed forestgreen","transition":"border 0.15s, background-color 0.15s","-webkit-transition":"border 0.15s, background-color 0.15s"});$(vx).find(".tambah").add($(vx).find(".hapus")).prop("disabled",true);}else{$(vx).removeAttr("style");$(vx).find(".tambah").prop("disabled",false);}}});});};function scrollDropship(a){var pos=$(".dynamic-dropship").last().offset().top;$hb.delay(300).queue(function(){$(this).animate({scrollTop:pos},300,a).dequeue();});}
function tambahHapusFX(){if($(".pesanan-wrap").length===1){$(".hapus").prop("disabled",1);resetSemua.disabled=1;if(checkPesanan()){$(".tambah").add($(resetSemua)).add($(selesai)).prop("disabled",0);}}else{$(".hapus").prop("disabled",1);$(".hapus").last().prop("disabled",0);}
$(".pesanan-wrap").css({"background-color":"beige","border-bottom":"2px dashed forestgreen","transition":"border 0.15s, background-color 0.15s","-webkit-transition":"border 0.15s, background-color 0.15s"}).promise().done(function(){$(".pesanan-wrap").last().removeAttr("style");if(dropship){$(".hapus, .tambah").prop("disabled",true).promise().done(function(){if($(".pesanan-wrap").find(".hapus").length>1){$(".hapus").last().prop("disabled",false);}});}});}
function tambahHapusPesanan(){if($(".hapus").length>0){$(".hapus").on("click",function(){var $t,i;if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
$t=$(this);i=$(".hapus").index($t);$t.prop("disabled",1);if(dropship){indexParent=$(".dynamic-dropship").index($t.closest(".dynamic-dropship"));if(indexParent+1<$(".dynamic-dropship").length){$("#modalWarningD").modal({show:1,backdrop:"static"});return;}}
function common($elm){$elm.remove().promise().done(function(){var ix=Math.floor(Math.random()*$(".pesanan-wrap").length);$(".berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").attr("readonly","readonly");if(dropship){updateOngkirDll();}
hapusArrayElm(i);update(hitung($(".jumlah-pesanan").eq(ix),ix));$(".copy-specs").prop("disabled",1);if($(".copy-specs").length>1){$(".copy-specs").last().prop("disabled",0);}
$hb.animate({scrollTop:$(".pesanan-wrap").eq(i-1).offset().top},300);});}
if(i>0){$(".pesanan-wrap").eq(i).fadeOut(300,function(){common($(this));});}else{misc.miscError();return;}});}
if($(".tambah").length>0){$(".tambah").on("click",function(){var $p,idx=$(".tambah").index(this)+1,iPt=$(".dynamic-dropship").index($(this).closest(".dynamic-dropship"));if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
indexParent=iPt;function addArrayElm(){if(g===1){jhw.splice(idx,0);jcr.splice(idx,0);jks.splice(idx,0);jpn.splice(idx,0);jhn.splice(idx,0);uks.splice(idx,0);totalHargaArr.splice(idx,0);totalBeratArr.splice(idx,0);bufferBDP[iPt].splice(idx,0);}}
function common(){$(".berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").attr("readonly","readonly");if(dropship){addArrayElm(update(hitung($(".jumlah-halaman").eq(idx-1),idx-1)));}else{update(hitung($(".jumlah-halaman").eq(idx-1),idx-1));}
$(".copy-specs").prop("disabled",1);if($(".copy-specs").length>1){$(".copy-specs").last().prop("disabled",0);}
$(".judul-buku").eq(idx).val("ORDER #"+(idx+1));$hb.delay(300).queue(function(){misc.initTooltip();$(this).animate({scrollTop:$(".pesanan-wrap").eq(idx).offset().top},300).dequeue();});}
g+=1;if(g===1){$(this).add(selesai).prop("disabled",1);if(!dropship){$("#dynamic-row").append(template).promise().done(function(){var stringNDP,idxx;idxx=$(".pesanan-wrap").length;stringNDP="";if($(".ndp").last().text()!==""&&$(".ndp").last().text()!==undefined){stringNDP=$(".ndp").last().text().split(/\d/)[0]+idxx;}
$(".ndp").last().text(stringNDP).promise().done(function(){$(".pesanan-wrap").last().find(".form-control").removeAttr("readonly").promise().done(function(){$(".pesanan-wrap").last().fadeIn(300,common);});});});}else{if(indexParent+1<$(".dynamic-dropship").length){$("#modalWarningD").modal({show:1,backdrop:"static"});return;}
$p=$(this).closest(".dynamic-dropship");$p.append(template).promise().done(function(){var stringNDP,idxx,$tl,$nl,$t;$t=$(this);idxx=$t.find(".pesanan-wrap").length;$tl=$t.find(".pesanan-wrap").last();$nl=$t.find(".ndp").last();stringNDP="";if($nl.text()!==""&&$nl.text()!==undefined){stringNDP=$nl.text().split(/\d/)[0]+idxx;}
$nl.text(stringNDP).promise().done(function(){updateOngkirDll();$tl.find(".form-control").removeAttr("readonly").promise().done(function(){$tl.fadeIn(300,common);});});});}}});}
$(".copy-specs").on("click",function(e){var th=e.currentTarget;var ix=$(".copy-specs").index(th);var ix_1=ix-1;var ukix_1;var jkix_1;var jcix_1;var $ukix;var $jkix;var $jcix;var $ukix_1;var $jkix_1;var $jcix_1;if(ix>0){$ukix=$(".ukuran-kertas").eq(ix);$ukix_1=$(".ukuran-kertas").eq(ix_1);$jkix=$(".jenis-kertas").eq(ix);$jkix_1=$(".jenis-kertas").eq(ix_1);$jcix=$(".jenis-cover").eq(ix);$jcix_1=$(".jenis-cover").eq(ix_1);ukix_1=$(".ukuran-kertas").eq(ix_1).children(":selected").index();jkix_1=$(".jenis-kertas").eq(ix_1).children(":selected").index();jcix_1=$(".jenis-cover").eq(ix_1).children(":selected").index();pswitcher($jkix_1.val(),ix);$ukix.val($ukix_1.val());$jkix.val($jkix_1.val());$jcix.val($jcix_1.val());$ukix.children("option").eq(ukix_1).prop("selected",1);$jkix.children("option").eq(jkix_1).prop("selected",1);$jcix.children("option").eq(jcix_1).prop("selected",1);hitung($(".ukuran-kertas").eq(ix),ix);hitung($(".jenis-kertas").eq(ix),ix);hitung($(".jenis-cover").eq(ix),ix);}else{$(th).prop("disabled",1);$("#miscError").modal({show:1,backdrop:"static"});misc.delPadBody();return;}});}
function tambahHapusTujuan(){ $("#tambah-tujuan").on("click",function(){var stringNDPD="";var $jk;if($(".ndpd").last().text()!==""&&$(".ndpd").last().text()!==undefined){stringNDPD=$(".ndpd").last().text().split(/\d/)[0];}
if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
function doThis(){var $ddl=$(".dynamic-dropship").last();pswitcher($jk.val(),$(".jenis-kertas").length-1);if(dcntr>1){$(".dynamic-dropship").eq(dcntr-2).css({"background-color":"aliceblue"});$(".dropship_perhitungan_wrap").eq(dcntr-2).css({"background-color":"aliceblue","border-bottom":"2px dashed brown","padding-bottom":"20px"});$("#hapus-tujuan").prop("disabled",false);}else{$(".dynamic-dropship").removeAttr("style");$("#hapus-tujuan").prop("disabled",true);}
$(".form-control-dropship").addClass("form-control").removeClass("form-control-dropship").promise().done(function(){$(".dynamic-dropship").last().find(".ndpd").add($(".dropship_perhitungan").last().find(".ndpd")).text(stringNDPD+dcntr).promise().done(function(){$ddl.find(".pesanan-wrap").last().find(".form-control").removeAttr("readonly").promise().done(function(){$(".berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price, .nama-penerima-dropship, .nama-pengirim-dropship, .telepon-penerima-dropship, .telepon-pengirim-dropship").attr("readonly","readonly");autoCOMPLETE(dataJSON);misc.btnBantuanLokasi();$ddl.find(".pesanan-wrap").last().fadeIn(0);$ddl.fadeIn(300,function(){$(".berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").attr("readonly","readonly");if($(".dynamic-dropship").length>1){misc.di_d();misc.en_d();$(".dynamic-dropship").last().find(".pesanan-wrap").eq(0).find(".form-control").each(function(i){var $bfr=$(".dynamic-dropship").eq($(".dynamic-dropship").index($(this))-1).find(".pesanan-wrap").eq(0).find(".form-control"),cln=$(this)[0].className;if(!/\-penerima\-dropship/i.test($bfr[i].className)){if($(this).val()!==$bfr.eq(i).val()){$(this).val($bfr.eq(i).val());if(/halaman-warna/i.test(cln)){hitung($(".halaman-warna").last()[0],$(".halaman-warna").index($(".halaman-warna").last()));}
if(/jumlah-halaman/i.test(cln)){hitung($(".jumlah-halaman").last()[0],$(".jumlah-halaman").index($(".jumlah-halaman").last()));}
if(/jumlah-pesanan/i.test(cln)){hitung($(".jumlah-pesanan").last()[0],$(".jumlah-pesanan").index($(".jumlah-pesanan").last()));}
if(/ukuran-kertas/i.test(cln)){hitung($(".ukuran-kertas").last()[0],$(".ukuran-kertas").index($(".ukuran-kertas").last()));}
if(/jenis-kertas/i.test(cln)){hitung($(".jenis-kertas").last()[0],$(".jenis-kertas").index($(".jenis-kertas").last()));}
if(/jenis-cover/i.test(cln)){hitung($(".jenis-cover").last()[0],$(".jenis-cover").index($(".jenis-cover").last()));}
if(/book-wrapping/i.test(cln)){if(Number($(this).val())!==0){$(this).css("background-color","khaki");}
hitung($(".book-wrapping").last()[0],$(".book-wrapping").index($(".book-wrapping").last()));}
if(/book-sewing/i.test(cln)){if(Number($(this).val())!==0){$(this).css("background-color","sandybrown");}
hitung($(".book-sewing").last()[0],$(".book-sewing").index($(".book-sewing").last()));}
if(/tipe-tinta/i.test(cln)){if(Number($(this).val())===0){$(this).removeAttr("style");}else if(Number($(this).val())===1){$(this).css({"background-color":"gold",color:"#000"});}else if(Number($(this).val())===2){$(this).css({"background-color":"darkcyan",color:"yellow"});}
hitung($(".tipe-tinta").last()[0],$(".tipe-tinta").index($(".tipe-tinta").last()));}}}}).promise().done(scrollDropship(update(updateTotal())));}else{misc.en_d();$(".dynamic-dropship").each(function(){var $j=$(this).find(".jumlah-pesanan"),ix=$j.length-1,ixx=$(".jumlah-pesanan").index($j);hitung($j.eq(ix),ixx);}).promise().done(scrollDropship(update(updateTotal())));}
$(".copy-specs").prop("disabled",1);if($(".copy-specs").length>1){$(".copy-specs").last().prop("disabled",0);}});});});});}
function removeThose(){$(".dynamic-dropship").each(function(i){if(i>dcntr){$(this).remove();}}).promise().done(function(){if($(".dynamic-dropship").length-1===dcntr){doThis();}});}
if(templateDT){gg+=1;if(gg===1){dcntr+=1;$(this).add(selesai).prop("disabled",1);$jk=$(".dynamic-dropship").last().find(".jenis-kertas").eq(0);$(templateDT).insertBefore($("#tambah_hapus_tujuan")).promise().done(function(){var al=$(".dynamic-dropship").length;if(dcntr===al){doThis();}else{removeThose();}});}}else{misc.miscError();return;}}); $("#hapus-tujuan").on("click",function(){$(this).prop("disabled",true);if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
gg+=1;if(gg===1){$(".dropship_perhitungan_wrap").each(function(i,v){if(i===$(".dropship_perhitungan_wrap").length-1){$(v).remove();}else if(i===$(".dropship_perhitungan_wrap").length-2){$(v).css({"background-color":"transparent","border-bottom":"2px dashed transparent"});}});dcntr-=1;$(".dynamic-dropship").last().slideUp(300,function(){var ix=$(".pesanan-wrap").length-1,ixx=$(".dynamic-dropship").index(this);$(this).find(".pesanan-wrap").each(function(i){var inx=$(".pesanan-wrap").index(this);totalBeratArr.splice(inx,i);bufferBDP[indexParent].splice(inx,i);});hapusArrayElm(ix);if(desKur[ixx]){desKur.pop();}
if(daftarKab[ixx]){daftarKab.pop();}
if(daftarKec[ixx]){daftarKec.pop();}
if(hargaOngkirArr[ixx]){hargaOngkirArr.pop();}
if(totalBeratDropshipArr[ixx]){totalBeratDropshipArr.pop();}
if(hargaOngkirDropshipArr[ixx]){hargaOngkirDropshipArr.pop();}
$(this).remove().promise().done(function(){if($(".dynamic-dropship").length===1){$("#tambah-tujuan").prop("disabled",false);$("#hapus-tujuan").prop("disabled",true);}else{$("#tambah-tujuan, #hapus-tujuan").prop("disabled",false);}
$(".dynamic-dropship").last().css({"background-color":"transparent"}).promise().done(function(){$(".berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").attr("readonly","readonly");misc.en_d();$(".copy-specs").prop("disabled",1);if($(".copy-specs").length>1){$(".copy-specs").last().prop("disabled",0);}
scrollDropship(update(updateOngkirDll(hitung($(".jumlah-halaman").eq(0),0))));gg=0;});});});}});}
function inputListeners(){$(".halaman-warna").on("change",function(e){var i=$(".halaman-warna").index(e.target);hitung(e.target,i);});$(".jumlah-halaman").on("change",function(e){var n=Number($(e.target).val()),i=$(".jumlah-halaman").index(e.target);$(e.target).val(n);if(Number($(".tipe-tinta").eq(i).val())!==2&&!/(a|b)6/i.test($(".ukuran-kertas"))){$(e.target).val(n).attr("data-o-v",n);}
hitung(e.target,i);});$(".jumlah-pesanan").on("input",function(e){var i=$(".jumlah-pesanan").index(e.target);$(e.target).val(Number($(e.target).val()));hitung(e.target,i);});$(".jenis-kertas").on("change",function(e){var i=$(".jenis-kertas").index(e.target);pswitcher($(this).val(),i);hitung(e.target,i);hitung($(".ukuran-kertas")[i],i);});$(".jenis-cover").on("change",function(e){var i=$(".jenis-cover").index(e.target);if(/ring/i.test($(e.target).val())){$(".book-sewing").eq(i).val(0).removeAttr("style");$(".book-sewing").eq(i).children("option").eq(1).prop("disabled",1);}else{$(".book-sewing").eq(i).children("option").eq(1).prop("disabled",0);}
hitung(e.target,i);});$(".ukuran-kertas").on("change",function(e){var i=$(".ukuran-kertas").index(e.target);var vo=e.target.value;if(Number($(".tipe-tinta").eq(i).val())!==2){if(/b6/i.test(e.target.value)){e.target.value=uk_prev_val;$("#B6Warning").modal({backdrop:"static",keyboard:0,show:1});$("#B6Warning").on("shown.bs.modal",function(){$("#jadiB6").on("click",function(){e.target.value=vo;$("#B6Warning").modal("hide").promise().done(function(){hitung(e.target,i);});});$("#cancelB6").on("click",function(){$("#B6Warning").modal("hide");return;});});}else{uk_prev_val=e.target.value;hitung(e.target,i);}}else{hitung(e.target,i);}});$(".book-wrapping").on("change",function(e){var i=$(".book-wrapping").index(e.target),$t=$(e.target);if(Number($t.val())!==0){$t.css({"background-color":"khaki"}).promise().done(function(){hitung(e.target,i);});}else{$t.removeAttr("style").promise().done(function(){hitung(e.target,i);});}});$(".tipe-tinta").on("change",function(e){var i=$(".tipe-tinta").index(e.target),n=Number($(e.target).val());if(n===2){$(e.target).val(tt_prev_val);$("#modalPWarna").modal({backdrop:"static",keyboard:0,show:1});$("#modalPWarna").on("shown.bs.modal",function(){$("#pWarna").on("click",function(){$("#modalPWarna").modal("hide").promise().done(function(){$(e.target).val(n);$(".halaman-warna").eq(i).prop("disabled",1).val("");hitung(e.target,i);});});});}else{tt_prev_val=n;$(".halaman-warna").eq(i).prop("disabled",0);hitung(e.target,i);}});if(!$("[name='jabedi']").length&&!jabedi){$(".book-sewing").on("change",function(e){var i=$(".book-sewing").index(e.target),$t=$(e.target);if(Number($t.val())!==0){$t.css({"background-color":"sandybrown"}).promise().done(function(){hitung(e.target,i);});}else{$t.removeAttr("style").promise().done(function(){hitung(e.target,i);});}});}
if($("[name='jabedi']").length||jabedi){jabedi=1;$(".book-sewing").on("change",function(e){if($(e.currentTarget).children("option").length>1){$(e.currentTarget).children("option").last().remove();}
$(e.currentTarget).prop("disabled",1).val(0);return;});}
if(dropship){$(".alamat-penerima-dropship").on("change",updateTotal);$(".telepon-penerima-dropship").on("change",updateTotal);$(".nama-penerima-dropship").on("change",updateTotal);$(".nama-pengirim-dropship").on("change",updateTotal);$(".telepon-pengirim-dropship").on("change",updateTotal);}}
update=function(){resetG();inputListeners();tambahHapusPesanan();if(dropship===1){tambahHapusTujuan(dropshipPesananHapusTambah());}else{tambahHapusFX();}}; function um(){jhw=[];jhn=[];jpn=[];jks=[];uks=[];jcr=[];wb=[];jhb=[];daftarProvinsi=[];daftarKab=[];daftarKec=[];desKur=[];tipeOrder=[];totalBeratArr=[];totalHargaArr=[];filePesananArr=[];hargaOngkirArr=[];tt_prev_val=0;uk_prev_val="_*_";g=0;hargaOngkir=0;hargaCetak=0;waktuSampai=undefined;djr=undefined;if(dropship){totalBeratDropshipArr=[];hargaOngkirDropshipArr=[];bufferBDP={};gg=0;indexParent=0;}}
function resetSemuaData(a){$("[data-toggle=\"tooltip\"]").each(function(){if($(this).tooltip){$(this).tooltip("destroy");}});$(".tambah, .hapus").add($(resetSemua)).add($(selesai)).prop("disabled",1);misc.clearSemuaInput();$llc.add($blc).fadeOut(0);$("#keteranganTambahan").val("");if(!dropship){$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");disBtnProv();disBtnKab();disBtnKec();$("#opsiKurirStandard").fadeOut(0);g=0;$jku.val("m");$("#provinsiBox, #kotaBox, #kecamatanBox, .alamat-pemesan").val("");$(".kantorPrintCo").slideUp(0);$("#dropdown_help").slideDown(0);$("#provinsiBox, #kotaBox, #kecamatanBox, .alamat-pemesan").attr("readonly","readonly");$("#kecamatanBox")[0].setAttribute("placeholder","Kecamatan");$("label[for='alamat-pemesan']").html("Alamat Lengkap");$("label[for='kotaBox']").html("Kab./Kota");$("label[for='kecamatanBox']").html("Kec.");$("label[for='provinsiBox']").html("Provinsi");$("#opsiTitle").html($("#opsiTitle").attr("data-o-t"));}else{$("#nama-pemesan-dropship, #email-pemesan-dropship, #telepon-pemesan-dropship, #alamat-pemesan-dropship, .provinsi-penerima-dropship, .ko-penerima-dropship, .kk-penerima-dropship, .alamat-penerima-dropship, .nama-penerima-dropship, .telepon-penerima-dropship, .nama-pengirim-dropship, .telepon-pengirim-dropship, .berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").val("");$(".ko-penerima-dropship, .kk-penerima-dropship, .berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").attr("readonly","readonly");$(".terpilihDropship").html("Pilihan Jasa Kurir");$(".ChosenKurirDropship").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");disBtnKab(0);disBtnKec(0);disBtnKur(0);$(".provinsi-penerima-dropship").eq(0).removeAttr("readonly");$(".dynamic-dropship").each(function(i){if(i>0){$(this).remove();}});$("#tambah-tujuan, #hapus-tujuan").prop("disabled",true);$(".dynamic-dropship").css({"background-color":"transparent","border":"2px dashed transparent"});gg=0;dcntr=1;$(".dropship_perhitungan_wrap").not($(".dropship_perhitungan_wrap").eq(0)).remove();$(".dynamic-dropship").not($(".dynamic-dropship").eq(0)).remove();$(".dropship_perhitungan").eq(0).find(".form-control").each(function(){$(this).val("").removeAttr("style");});$(".dropship_perhitungan_wrap").eq(0).css({"background-color":"transparent","border-bottom":"2px dashed transparent"});}
$("#harga-cetak, #harga-ongkir, #packing-handling, #book-wrap, #total-copy, #book-sewing").val("");um();namaPemesan.value="";teleponPemesan.value="";emailPemesan.value="";if(alamatPemesan){alamatPemesan.value="";}
if($("#diskonHarga")){$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display"));}
$(".tipe-tinta, .book-wrapping, .book-sewing").val("0").removeAttr("style");$("#book-wrap, #book-sewing, #total-copy").removeAttr("style");$("#book-sewing").attr("data-original-title","Biaya total jahit benang");$("#book-wrap").attr("data-original-title","Biaya book wrap");$("#harga-ongkir").attr("data-original-title","Biaya kurir");$(totalHarga).attr("data-original-title","BIAYA TOTAL");$("#harga-cetak, #harga-ongkir, #packing-handling").removeAttr("style");$("#semua-file, #daftarTautanFile").html("");$(".jumlah-halaman, .jumlah-pesanan, .berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").add($(totalBerat)).add($(totalHarga)).add($(totalPesanan)).val("").removeAttr("style");$(".jenis-kertas, .jenis-cover, .ukuran-kertas").val("_*_");$(".pesanan-wrap").not($(".pesanan-wrap").eq(0)).remove();$(".pesanan-wrap").eq(0).removeAttr("style");if(a===1){$("#konfirmasiResetSemua").modal("hide").promise().done(function(){misc.scrollAtas();});}else{misc.scrollAtas();}
misc.initTooltip();update();} 
function resetSemuaHandler(){$("#konfirmasiResetSemua").modal({backdrop:"static",keyboard:false,show:true}).promise().done(function(){$("#resetData").on("click",function(){resetSemuaData(1);});$("#tutupKonfirmasiResetSemua").on("click",function(){$("#konfirmasiResetSemua").modal("hide");});});}
function definisiVar(){function alamatPemesanController(){var result;if($(".alamatPemesanHolder1").css("display")!=="none"){result=$(".alamat-pemesan")[0];}else{result=$(".alamat-pemesan")[1];}
$(".alamat-pemesan").bind("change input",function(){var apv=$(this).val();$(".alamat-pemesan").not($(this)).val(apv);});return result;}
if(!dropship){namaPemesan=$("#nama-pemesan")[0];teleponPemesan=$("#telepon-pemesan")[0];emailPemesan=$("#email-pemesan")[0];alamatPemesan=alamatPemesanController();$(window).on("resize",function(){alamatPemesan=alamatPemesanController();});}
$hb=$("html").add($(document.body));totalBerat=$("#total-berat")[0];totalHarga=$("#total-harga")[0];totalPesanan=$("#total-pesanan")[0];resetSemua=$("#resetSemua")[0];template="<div class=\"pesanan-wrap\" style=\"display:none;\">"+$(".pesanan-wrap")[0].innerHTML+"</div>";rx=/djvu|png|jpe?g|psd|cdr|pdf|7z|zip|rar/i;rxf=/mobi|epub/i;diskonHarga=$("#diskonHarga").attr("data-diskon-harga");diskonLimit=$("#diskonHarga").attr("data-diskon-limit");dropshipDisplay='<div class="dropship_perhitungan_wrap dropship_rows">'+'<div class="row dropship_perhitungan">'+'<div class="col-md-12">'+'<h4 style="font-size:16px;border-radius:4px;padding:10px;background:darkslateblue;text-shadow:1px 1px 1px #000;font-weight:normal;margin-top:0;color:#fff;">Perhitungan Dropship <span class="ndpd">#1</span></h4>'+'</div>'+'<div class="col-md-3 offset-6 pr2">'+'<label><small>Jumlah Buku Dropship</small></label>'+'<input class="form-control jumlah-buku-dropship" readonly="readonly" placeholder="Perhitungan...">'+'</div>'+'<div class="col-md-3 offset-6 pl2 pr2">'+'<label><small>Biaya Kurir Dropship</small></label>'+'<input class="form-control ongkir-dropship" readonly="readonly" placeholder="Perhitungan...">'+'</div>'+'<div class="col-md-3 offset-6 pl2 pr2">'+'<label><small>Biaya Packing &amp; Handling Dropship</small></label>'+'<input class="form-control pnh-dropship" readonly="readonly" placeholder="Perhitungan...">'+'</div>'+'<div class="col-md-3 offset-6 pl2">'+'<label><small>Berat Pesanan Dropship</small></label>'+'<input class="form-control berat-unit-dropship" readonly="readonly" placeholder="Perhitungan...">'+'</div>'+'</div>'+'</div>';var diskonDisplay;if(diskonHarga>0){diskonDisplay=diskonHarga;diskonDisplay=diskonDisplay.toString();diskonDisplay="<div data-toggle='tooltip' data-placement='top' title='Diskon "+diskonDisplay+"% untuk minimum order cetak<br>Rp "+misc.tk(diskonLimit)+"<br>Potongan harga untuk biaya cetak.' style='font-size:16px;display:inline-block;background-color:lemonchiffon;border:1px solid #aaa;padding:4px 8px; border-radius:4px;'><span id='diskonPersen'>"+diskonDisplay+"%</span> | Rp "+misc.tk(diskonLimit)+"</div>";$("#diskonHarga").attr("data-diskon-display",diskonDisplay).html(diskonDisplay).promise().done(function(){misc.initTooltip();});}else{$("#diskonHarga").remove();}
um();if(!dropship){update();} 
function testForm(e){var jdlb,namap,telp,alamp;jdlb=["Belajar Makan Piring Bersama Srikandi","Ilmu Tenaga Api Kompor Super Chef","Bagaimana Mencaci-Maki Si Komo","Lari Kecipratan Kesandung Kepleset","Berenang Renang Kepleset","Melindungi Rambut Dari Sengatan Mata Mata","Hubungan Intim","Hahahaha Apaan","Kenapa Begitu?","Karena Memang Begini"];namap=["Raden Suratno","Ayu Surtini","Bang Ojeg","Vladimir Putin","Raden Tongtong","Cing Cong Tung","Yoko Ono","George Bush","Obama","Donald Trump","Super Model","Frankenstein Suparno","Sasa Penyedap Makanan","Rantang","Sendok Garpu","Mouse Click","Keyboard Semprul","Semar Makan Cabe","Cabe Indomie","Indomie Keju"];telp=["08535183828","0892881920","0812309892","08239001997","08226278390","08162718295","082938117001","123456789632","2929292929229","938729108273","23811029381"];alamp=["Jl. Merpati no. 18, Bengkulu, Jambi, refPnH0","Jl. Bontang no. 20, Desa Banting, 7000","Jl. Hamil 5 Tahun RT.8/RW.7, Sungai Kapuas, 3920","Jl. Jalan Ke Pasar Inpres no. 45, Magetan, 389200","Beverly Hills, 90201","Jalan Tambal Ban no. 3","Jl. Kemaluan Saya Besar no. 12","Jl. Masing-Masing no. 8"];function n(){return namap[Math.floor(Math.random()*namap.length)];}
function t(){return telp[Math.floor(Math.random()*telp.length)];}
function a(){return alamp[Math.floor(Math.random()*alamp.length)];}
e.preventDefault();if(!dropship){namaPemesan.value=n();teleponPemesan.value=t();emailPemesan.value="";if(!alamatPemesan.value){alamatPemesan.value=a();}}else{$("#nama-pemesan-dropship").val(n());$("#telepon-pemesan-dropship").val(t());if(!$("#alamat-pemesan-dropship").val()){$("#alamat-pemesan-dropship").val(a());}
$(".nama-penerima-dropship").each(function(){if(!this.value){$(this).val(n());}});$(".nama-pengirim-dropship").each(function(){if(!this.value){$(this).val(n());}});$(".telepon-penerima-dropship").each(function(){if(!this.value){$(this).val(t());}});$(".telepon-pengirim-dropship").each(function(){if(!this.value){$(this).val(t());}});$(".alamat-penerima-dropship").each(function(){if(!this.value){$(this).val(a());}});}
$("#email-pemesan, #email-pemesan-dropship").val("asd@asd.com");$(".jumlah-halaman").each(function(i){if(!this.value){$(this).val(500);hitung(this,i);}});$(".jumlah-pesanan").each(function(i){if(!this.value){$(this).val(1);hitung(this,i);}});$(".jenis-kertas").each(function(i){if(this.value==="_*_"){$(this).val(this.options[2].value);hitung(this,i);}});$(".jenis-cover").each(function(i){if(this.value==="_*_"){$(this).val(this.options[4].value);hitung(this,i);}});$(".ukuran-kertas").each(function(i){if(this.value==="_*_"){$(this).val(this.options[3].value);hitung(this,i);}});}
$("#isiFormOtomatis").on("click",testForm);resetSemua.onclick=resetSemuaHandler;}
autoCOMPLETE=function(dl){var provinsiNames=[];var semuaProps={};var data;var dataKotaPCO;var checkOnline="";function ed_etd(a,b){if(/yes/i.test(b)){if(a===""||a===null){a="1-1";}}else{if(a===""||a===null){a="N/A";}}
return a;}
if(dl){if(dl.list){data=dl.list.slice();data.forEach(function(v){if(provinsiNames.indexOf(misc.caps(v.province))===-1){provinsiNames.push(misc.caps(v.province));if(!semuaProps[misc.caps(v.province)]){semuaProps[misc.caps(v.province)]=[{kota:misc.caps(v.city_name)+" ("+misc.caps(v.type)+")",kode_provinsi:v.province_id,kode_kota:v.city_id,kode_pos:v.postal_code}];}else{semuaProps[misc.caps(v.province)].push({kota:misc.caps(v.city_name)+" ("+misc.caps(v.type)+")",kode_provinsi:v.province_id,kode_kota:v.city_id,kode_pos:v.postal_code});}}else{semuaProps[misc.caps(v.province)].push({kota:misc.caps(v.city_name)+" ("+misc.caps(v.type)+")",kode_provinsi:v.province_id,kode_kota:v.city_id,kode_pos:v.postal_code});}});daftarProvinsi=provinsiNames.slice();btnProv();}
if(!dl.list){$("#errorAwal").modal({show:1,backdrop:"static"});misc.delPadBody();return;}}
$llc.add($blc).fadeOut(0);dataKotaPCO=$("#dataKotaPCO").attr("data-kota-pco");if(!dropship){$pvb.add($kob).add($kcb).add($("#ChosenKurirStandard")).removeClass("error-box");$pvb.on("input",function(e){var $t=$(e.target);var v=$t.val();$t.val(v.toUpperCase());$kob.add($kcb).val("").attr("readonly","readonly").addClass("error-box");$t.addClass("error-box");disBtnKab();disBtnKec();disBtnKur();waktuSampai=undefined;hargaOngkir=0;$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");});$kob.on("input",function(e){var $t=$(e.target);var v=$t.val();$t.val(v.toUpperCase());$kcb.val("").attr("readonly","readonly").addClass("error-box");$t.addClass("error-box");disBtnKec();disBtnKur();waktuSampai=undefined;hargaOngkir=0;$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");});$kcb.on("input",function(e){var $t=$(e.target);var v=$t.val();$t.val(v.toUpperCase()).addClass("error-box");disBtnKur();waktuSampai=undefined;hargaOngkir=0;$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");});$pvb.add($kob).add($kcb).on("click",function(e){$(e.target).select();});hargaOngkir=0;if(provinsiNames.length>0){$pvb.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(provinsiNames,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){var kota=[];var id_kota=[];var idkt;var prov=event.target.value;var kaot;var kecAll=[];var kec=[];var ekc;var id_kec=[];var idkct;var idx;var pilihanKurir=[];hargaOngkir=0;if(prov.length!==ui.item.value.length){prov=ui.item.value;}
$pvb.removeClass("error-box").val(prov);$kob.removeAttr("readonly");$kob.add($kcb).val("").addClass("error-box");$kob[0].focus();semuaProps[prov].forEach(function(v){if(id_kota.indexOf(v.kode_kota)===-1){kota.push(v.kota);id_kota.push(v.kode_kota);}});if(kota.length>0){daftarKab=kota.slice();btnKab();$kob.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(kota,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){kaot=event.target.value;idx=kota.indexOf(kaot);idkt=id_kota[idx];if(kaot.length!==ui.item.value.length){kaot=ui.item.value;idx=kota.indexOf(kaot);idkt=id_kota[idx];}
$kob.val(kaot).removeClass("error-box");$("#sejenak").modal({show:1,backdrop:"static"});misc.delPadBody();$.getJSON("/ext/json/ongkir?city="+idkt,function(dt){daftarKec=[];kec=[];id_kec=[];$("#sejenak").modal("hide");misc.delPadBody();if(dt.list){kecAll=dt.list;if(typeof kecAll==="object"){if(kecAll.length>0){$kcb.removeAttr("readonly").addClass("error-box");kecAll.forEach(function(v){if(kec.indexOf(misc.caps(v.subdistrict_name))===-1){kec.push(misc.caps(v.subdistrict_name));daftarKec.push(misc.caps(v.subdistrict_name));id_kec.push(v.subdistrict_id);}});if(kec.length>0){daftarKec=kec.slice();btnKec();$kcb[0].focus();$kcb.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(kec,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){ekc=event.target.value;idx=kec.indexOf(ekc);idkct=id_kec[idx];if(ekc.length!==ui.item.value.length){ekc=ui.item.value;idx=kec.indexOf(ekc);idkct=id_kec[idx];}
$kcb.val(ekc).removeClass("error-box");$("#sejenak").modal({show:1,backdrop:"static"});misc.delPadBody();$.getJSON("/ext/json/ongkir?kecamatan="+idkct,function(dt){var $ckd=$("#ChosenKurirStandard");$("#sejenak").modal("hide");misc.delPadBody();var valuePilihan="";if(dt.list){pilihanKurir=dt.list;$ckd[0].focus();valuePilihan="<option value=\"\" disabled selected=\"selected\">--SILAKAN PILIH KURIR--</option>";pilihanKurir.forEach(function(v,i){(v.costs).forEach(function(vv,ii){if(!(/jtr|peli|surat|dokumen|sps/i.test(vv.service))){valuePilihan+="<option value=\""+misc.caps(v.code)+" ("+misc.caps(vv.service)+")|"+vv.cost[0].value+"|"+ed_etd(vv.cost[0].etd,vv.service)+"|"+i+","+ii+"\">"+misc.caps(v.code)+" ("+misc.caps(vv.service)+") Rp "+misc.tk(vv.cost[0].value)+"/kg ("+ed_etd(vv.cost[0].etd,vv.service)+" hari)</option>";}});if(/jne/i.test(v.code)){if(v.costs.length===0){$("#na_jne_msg").html("<p>Mohon maaf, kurir JNE tujuan <strong>"+ekc+", "+kaot+", "+prov+"</strong> <mark style='color:brown;background:mistyrose;'>tidak tersedia</mark>.</p><p><small>Silakan untuk pilih jasa kurir yang lainnya.</small></p>").promise().done(function(){$("#na_jne").modal("show");misc.delPadBody();});}}});$ckd.html(valuePilihan).promise().done(function(){$ckd.on("change",function(e){var $el=$(e.currentTarget);var valu=$el.val();var ixp;var compt=(/\|/.test(valu)&&valu!==""&&valu!==undefined)?valu.split("|"):["",0,"",""];var pk_outer;var pk_inner;if(compt[0]!==""&&compt[1]!==0&&compt[2]!==""){if(compt[3]!==""&&(/,/.test(compt[3]))&&compt[3]!==undefined){ixp=compt[3].split(",");pk_outer=pilihanKurir[ixp[0]]||undefined;pk_inner=pk_outer?pk_outer.costs[ixp[1]]:undefined;if(pk_outer&&pk_inner){checkOnline="Bisa langsung lacak paket di halaman <strong>CEK PESANAN</strong> PRINT.CO <i class='fa fa-check'></i>";if(/jne/i.test(pk_outer.code)){desKur[0]="<div class='text-center'><img src='"+pth+"jne.png'></div>";}else if(/pos/i.test(pk_outer.code)){desKur[0]="<div class='text-center'><img src='"+pth+"pos_giro_logo.png'></div>";}else if(/pandu/i.test(pk_outer.code)){desKur[0]="<div class='text-center'><img src='"+pth+"pandu_logo_s.png'></div>";checkOnline="<span style='color:#888'>Lacak paket via tautan luar</span>";}else if(/wahana/i.test(pk_outer.code)){desKur[0]="<div class='text-center'><img src='"+pth+"wahana_logo_s.png'></div>";}else{desKur[0]="<h4>"+misc.caps(pk_outer.code)+"</h4>";}
desKur[0]+="<h5 class='text-center'>"+pk_outer.name+"</h5>";desKur[0]+="<p  class='text-center'><strong>"+dataKotaPCO+"</strong> <i class='fa fa-arrow-right'></i> <strong>"+$kcb.val()+", "+$kob.val()+", "+$pvb.val()+"</strong></p><hr style='background:transparent;border-top:1px dashed #999;margin:10px 0;'>";desKur[0]+="<p>Nama service: "+pk_inner.service+"</p>";desKur[0]+="<p>Deskripsi: "+pk_inner.description+"</p>";desKur[0]+="<p>Ongkos kirim: Rp "+misc.tk(pk_inner.cost[0].value)+" / kg</p>";desKur[0]+="<p>"+checkOnline+"</p>";desKur[0]+="<p>Estimasi sampai: "+ed_etd(pk_inner.cost[0].etd,pk_inner.service)+" hari*</p>";desKur[0]+="<p class='text-right'><em><small>*Setelah order selesai dikerjakan.</small></em></p>";desKur[0]+="<div class='text-right'><small><small>Silakan buka <a href='/faq#waktu-proses' target='_blank'>FAQ untuk estimasi waktu pengerjaan <i class='fa fa-external-link'></i></a></small></small></div>";btnKur();}}else{disBtnKur();}
$("#terpilihStandard").html(compt[0]);hargaOngkir=Number(compt[1]);waktuSampai=ed_etd(compt[2],compt[0]);updateTotal();}});});}else{$("#errorOngkir").modal({show:1,backdrop:"static"});misc.delPadBody();}});}});}}else{disBtnKec();}}}else{disBtnKec();$("#errorKecamatan").modal({show:1,backdrop:"static"});misc.delPadBody();}});}});}else{disBtnKab();disBtnKec();}}});}}else{$(".provinsi-penerima-dropship").on("input",function(e){var th=e.target;var indexP=$(".provinsi-penerima-dropship").index(th);var v=th.value;$(".ChosenKurirDropship").eq(indexP).html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$(".terpilihDropship").eq(indexP).html("Pilihan Jasa Kurir");th.value=v.toUpperCase();$(th).addClass("error-box");$(".ko-penerima-dropship").eq(indexP).add($(".kk-penerima-dropship").eq(indexP)).val("").attr("readonly","readonly").addClass("error-box");disBtnKab(indexP);disBtnKec(indexP);disBtnKur(indexP);waktuSampai=undefined;hargaOngkir=0;$("#bantuanLokasi2Words").html("");if(v===""){hargaOngkirArr[indexP]=0;updateTotal();}});$(".ko-penerima-dropship").on("input",function(e){var th=e.target;var v=th.value;var ix=$(".ko-penerima-dropship").index(e.target);$(".ChosenKurirDropship").eq(ix).html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$(".terpilihDropship").eq(ix).html("Pilihan Jasa Kurir");th.value=v.toUpperCase();$(th).addClass("error-box");$(".kk-penerima-dropship").eq(ix).val("").attr("readonly","readonly").addClass("error-box");if(/^$/.test($(".alamat-penerima-dropship")[ix].value)){$(".alamat-penerima-dropship").eq(ix).addClass("error-box");}
disBtnKec(ix);disBtnKur(ix);if(v===""){hargaOngkirArr[ix]=0;updateTotal();}});$(".kk-penerima-dropship").on("input",function(e){var th=e.target;var v=th.value;var ix=$(".kk-penerima-dropship").index(e.target);$(".ChosenKurirDropship").eq(ix).html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$(".terpilihDropship").eq(ix).html("Pilihan Jasa Kurir");th.value=v.toUpperCase();$(th).addClass("error-box");disBtnKur(ix);if(/^$/.test($(".alamat-penerima-dropship")[ix].value)){$(".alamat-penerima-dropship").eq(ix).addClass("error-box");}
if(v===""){hargaOngkirArr[ix]=0;updateTotal();}});$(".kk-penerima-dropship, .ko-penerima-dropship, .provinsi-penerima-dropship").on("change",updateTotal);$(".provinsi-penerima-dropship, .ko-penerima-dropship, .kk-penerima-dropship").on("click",function(e){$(e.target).select();});hargaOngkir=0;if(provinsiNames.length>0){$(".provinsi-penerima-dropship").autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(provinsiNames,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){var kota=[];var id_kota=[];var idkt;var prov=event.target.value;var kaot;var kecAll=[];var kec=[];var ekc;var id_kec=[];var idxe=$(".provinsi-penerima-dropship").index(event.target);var idkct;var idx;var pilihanKurir=[];indexParent=idxe;hargaOngkir=0;$pvb=$(".provinsi-penerima-dropship").eq(idxe);$kob=$(".ko-penerima-dropship").eq(idxe);$kcb=$(".kk-penerima-dropship").eq(idxe);$kob.removeAttr("readonly");if(prov.length!==ui.item.value.length){prov=ui.item.value;$pvb.val(prov);}
semuaProps[prov].forEach(function(v){if(id_kota.indexOf(v.kode_kota)===-1){kota.push(v.kota);id_kota.push(v.kode_kota);}});$pvb.removeClass("error-box");$(".ko-penerima-dropship")[idxe].focus();if(kota.length>0){daftarKab[idxe]=kota.slice();btnKab(idxe);$kob.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(kota,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){kaot=event.target.value;idx=kota.indexOf(kaot);idkt=id_kota[idx];if(kaot.length!==ui.item.value.length){kaot=ui.item.value;idx=kota.indexOf(kaot);idkt=id_kota[idx];}
$kob.val(kaot).removeClass("error-box");$kcb.removeAttr("readonly");$("#sejenak").modal({show:1,backdrop:"static"});misc.delPadBody();$.getJSON("/ext/json/ongkir?city="+idkt,function(dt){kec=[];id_kec=[];$("#sejenak").modal("hide");misc.delPadBody();if(dt.list){kecAll=dt.list;if(typeof kecAll==="object"){if(kecAll.length>0){$kcb.removeAttr("readonly");kecAll.forEach(function(v){if(kec.indexOf(misc.caps(v.subdistrict_name))===-1){kec.push(misc.caps(v.subdistrict_name));id_kec.push(v.subdistrict_id);}});if(kec.length>0){daftarKec[idxe]=kec.slice();btnKec(idxe);$(".kk-penerima-dropship")[idxe].focus();$kcb.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(kec,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){ekc=event.target.value;idx=kec.indexOf(ekc);idkct=id_kec[idx];if(ekc.length!==ui.item.value.length){ekc=ui.item.value;idx=kec.indexOf(ekc);idkct=id_kec[idx];}
$kcb.val(ekc).removeClass("error-box");$("#sejenak").modal({show:1,backdrop:"static"});misc.delPadBody();$.getJSON("/ext/json/ongkir?kecamatan="+idkct,function(dt){$("#sejenak").modal("hide");misc.delPadBody();var valuePilihan="";var $ckd=$(".ChosenKurirDropship").eq(idxe);if(dt.list){pilihanKurir=dt.list;$(".ChosenKurirDropship")[idxe].focus();valuePilihan="<option value=\"\" disabled selected=\"selected\">--SILAKAN PILIH KURIR--</option>";pilihanKurir.forEach(function(v,i){(v.costs).forEach(function(vv,ii){if(!(/jtr|peli|surat|dokumen|sps/i.test(vv.service))){valuePilihan+="<option value=\""+misc.caps(v.code)+" ("+misc.caps(vv.service)+")|"+vv.cost[0].value+"|"+ed_etd(vv.cost[0].etd,vv.service)+"|"+i+","+ii+"\">"+misc.caps(v.code)+" ("+misc.caps(vv.service)+") Rp "+misc.tk(vv.cost[0].value)+"/kg ("+ed_etd(vv.cost[0].etd,vv.service)+" hari)</option>";}});if(/jne/i.test(v.code)){if(v.costs.length===0){$("#na_jne_msg").html("<p>Mohon maaf, kurir JNE tujuan <strong>"+ekc+", "+kaot+", "+prov+"</strong> <mark style='color:brown;background:mistyrose;'>tidak tersedia</mark>.</p><p><small>Silakan untuk pilih jasa kurir yang lainnya.</small></p>").promise().done(function(){$("#na_jne").modal("show");misc.delPadBody();});}}});$ckd.html(valuePilihan).promise().done(function(){$ckd.on("change",function(e){var $el=$(e.currentTarget);var valu=$el.val();var $td=$(".terpilihDropship").eq(idxe);var ixp;var compt=(/\|/.test(valu)&&valu!==""&&valu!==undefined)?valu.split("|"):["",0,"",""];var pk_outer;var pk_inner;if(compt[0]!==""&&compt[1]!==0&&compt[2]!==""){if(compt[3]!==""&&(/,/.test(compt[3]))&&compt[3]!==undefined){ixp=compt[3].split(",");pk_outer=pilihanKurir[ixp[0]]||undefined;pk_inner=pk_outer?pk_outer.costs[ixp[1]]:undefined;if(pk_outer&&pk_inner){checkOnline="Bisa langsung lacak paket di halaman <strong>CEK PESANAN</strong> PRINT.CO <i class='fa fa-check'></i>";if(/jne/i.test(pk_outer.code)){desKur[idxe]="<div class='text-center'><img src='"+pth+"jne.png'></div>";}else if(/pos/i.test(pk_outer.code)){desKur[idxe]="<div class='text-center'><img src='"+pth+"pos_giro_logo.png'></div>";}else if(/pandu/i.test(pk_outer.code)){desKur[idxe]="<div class='text-center'><img src='"+pth+"pandu_logo_s.png'></div>";checkOnline="<span style='color:#888'>Lacak paket via tautan luar</span>";}else if(/wahana/i.test(pk_outer.code)){desKur[idxe]="<div class='text-center'><img src='"+pth+"wahana_logo_s.png'></div>";}else{desKur[idxe]="<h4>"+misc.caps(pk_outer.code)+"</h4>";}
desKur[idxe]+="<h5 class='text-center'>"+pk_outer.name+"</h5>";desKur[idxe]+="<p  class='text-center'><strong>"+dataKotaPCO+"</strong> <i class='fa fa-arrow-right'></i> <strong>"+$kcb.val()+", "+$kob.val()+", "+$pvb.val()+"</strong></p><hr style='background:transparent;border-top:1px dashed #999;margin:10px 0;'>";desKur[idxe]+="<p>Nama service: "+pk_inner.service+"</p>";desKur[idxe]+="<p>Deskripsi: "+pk_inner.description+"</p>";desKur[idxe]+="<p>Ongkos kirim: Rp "+misc.tk(pk_inner.cost[0].value)+" / kg</p>";desKur[idxe]+="<p>"+checkOnline+"</p>";desKur[idxe]+="<p>Estimasi sampai: "+ed_etd(pk_inner.cost[0].etd,pk_inner.service)+" hari*</p>";desKur[idxe]+="<p class='text-right'><em><small>*Setelah order selesai dikerjakan.</small></em></p>";desKur[idxe]+="<div class='text-right'><small><small>Silakan buka <a href='/faq#waktu-proses' target='_blank'>FAQ untuk estimasi waktu pengerjaan <i class='fa fa-external-link'></i></a></small></small></div>";btnKur(idxe);}}else{disBtnKur(idxe);}
$td.html(compt[0]);hargaOngkirArr[idxe]=Number(compt[1]);waktuSampai=ed_etd(compt[2],compt[0]);if(indexParent===-1){indexParent=idxe;}
if(hargaOngkirArr[indexParent]){updateTotal();}}});});}else{$("#errorOngkir").modal({show:1,backdrop:"static"});misc.delPadBody();}});}});}}else{disBtnKec(idxe);}}}else{disBtnKec(idxe);$("#errorKecamatan").modal({show:1,backdrop:"static"});misc.delPadBody();}});}});}else{disBtnKab();disBtnKec();}}});}}};autoCOMPLETE_T=function(data,flag,waktu){$(".listLokasi, .listLokasi2").fadeOut(300);var lokasi=[],semuaProps={},namaLokasi="",nL=[];hargaOngkir=0;waktuSampai=undefined;if(data){data.forEach(function(v){lokasi.push(v.lokasi);if(flag===1){semuaProps[v.lokasi]=[Number(v.t_5),Number(v.t_5_1)];}else{semuaProps[v.lokasi]=Number(v.tarif);}});}
nL=lokasi.slice();nL.sort();namaLokasi="<h4>"+arrayKurir[Number($("#jasaKurir").val())]+"</h4>"+"<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Support "+nL.length+" tujuan</li>";nL.forEach(function(v){namaLokasi+="<li class='list-group-item'>"+v+"</li>";});namaLokasi+="</ul>";$blw.html(namaLokasi);$blmt.add($blc).html("LIST LOKASI");$llc.add($blc).fadeIn(0);$kcb.autocomplete({source:function(req,responseFn){var re,matcher,a;re=$.ui.autocomplete.escapeRegex(req.term);matcher=new RegExp("^"+re,"i");a=$.grep(lokasi,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){var t=event.target.value;if(t.length!==ui.item.value.length){t=ui.item.value;}
$kcb.val(t).removeClass("error-box");hargaOngkir=semuaProps[t];waktuSampai=waktu;if(hargaOngkir){updateTotal();}}});};function mulai(){function change2dropship(){var ti="";if($("title").text()!==""&&$("title").text()!==undefined){ti=$("title").text().split("|")[0];}
dropship=1;gg=0;dcntr=1;$("[data-toggle=\"tooltip\"]").each(function(){if($(this).tooltip){$(this).tooltip("destroy");}});resetSemuaData();templateDT="<div class=\"dynamic-dropship dropship_rows\" style=\"display:none\">"+$(".dynamic-dropship")[0].innerHTML+template+"</div>"+dropshipDisplay;if($(".pesanan-wrap").length===1&&$(".nama-penerima-dropship").val()===""){$(".dynamic-dropship").append(template).promise().done(function(){update();$(".standard_rows").fadeOut(150,function(){$(".standard_rows").remove().promise().done(function(){$("title").text(ti+" Dropship | PRINT.CO");$(".kataKata").html("<i class='fa fa-calculator'></i> Simulasi Dropship");$("#nama-pemesan-dropship, .nama-penerima-dropship, .nama-pengirim-dropship, #alamat-pemesan-dropship, .alamat-pemesan, .alamat-penerima-dropship").val("TIDAK PERLU DIISI");$(".telepon-penerima-dropship, .telepon-pengirim-dropship, #telepon-pemesan-dropship").val("0812345678910");$("#email-pemesan-dropship").val("TIDAK@PERLU-DIISI.com");$("#jdp").html('<span class="glyphicon glyphicon-list-alt"></span>&nbsp;&nbsp;Simulasi Pesanan (DROPSHIP)');$("head").append("<style>.pesanan-wrap{margin:5px 20px 0 30px;border-radius:8px;border:2px dashed transparent;border-left:5px solid forestgreen;border-right:5px solid forestgreen}.pesanan-wrap,.dynamic-dropship{transition:background-color 0.15s, border 0.15s}.dynamic-dropship{border-radius:4px;border:2px dashed transparent;}.pesanan>.panel-body{padding-bottom:15px;}.dropship_rows{display:block}</style>").promise().done(function(){$(".form-control-dropship").addClass("form-control").promise().done(function(){$(".helpToggle").each(function(){if($(this).css("display")==="none"){$(this).fadeIn(0);}});$("#packing-handling").attr("data-original-title","<div class='text-left'>Biaya packing & handling.<br>Dihitung per alamat tujuan.</div>");$(".pesanan-wrap").fadeIn(150,function(){misc.clearSemuaInput();if($(".pesanan-wrap").length>1){$(".pesanan-wrap").last().remove();}
$(".form-control-readonly").removeAttr("readonly");$(".book-wrapping-price, .book-sewing-price, .harga-pesanan, .berat-pesanan, .ko-penerima-dropship, .kk-penerima-dropship").attr("readonly","readonly");djr=undefined;autoCOMPLETE(dataJSON);$(".judul-buku").eq(0).val("ORDER #1");$("#jasa-kurir-dropship").focus();resetG();$hb=$("html, body");misc.initTooltip();disBtnKec();disBtnKab();disBtnKur();});});});});});});}}
function beneran(){function jasaKurir(a){function doThese(){$("label[for='alamat-pemesan']").html("Alamat Lengkap");$(".kantorPrintCo").fadeOut(0,function(){$("#dropdown_help").fadeIn(0,function(){updateTotal();});});}
var $t=$jku;var tval="";if($t.length>0){tval=$t.val();}
if(tval!==null&&tval!==""){if(!(/^\d?0$/.test(tval.toString()))){if(/bbrp/i.test(tval)){$("#opsiKurirStandard").fadeIn(0);disBtnKur();if(a!==1){$(".alamat-pemesan").val("");$("#provinsiBox").focus();}else{$("#provinsiBox").focus();}
$(".alamat-pemesan").removeAttr("readonly");$("#provinsiBox").val("").removeAttr("readonly");$(".bantuan-prov").prop("disabled",1);$("#kotaBox").val("").attr("readonly","readonly");$("#kecamatanBox").val("").attr("readonly","readonly");$("#kecamatanBox")[0].setAttribute("placeholder","Kecamatan");$("#provinsiBox")[0].setAttribute("placeholder","Provinsi tujuan");$("label[for='kecamatanBox']").html("Kec.");$("label[for='provinsiBox']").html("Provinsi");$(".helpToggle").fadeIn(0,doThese);$("#opsiTitle").html("Pakai Kurir");djr=undefined;autoCOMPLETE(dataJSON);}else{disBtnProv();disBtnKab();disBtnKec();$("#opsiKurirStandard").fadeOut(0);$pvb.add($kob).add($kcb).removeClass("error-box");$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");if(Number(tval)===2){if(a!==1){$(".alamat-pemesan").val("");$(alamatPemesan).focus();$("#save_id_standard").prop("disabled",1);}else{$("#kecamatanBox").focus();}
$(".alamat-pemesan").removeAttr("readonly");$("#kecamatanBox").val("").removeAttr("readonly");$("#provinsiBox").val($("#provinsiBox").attr("data-provinsi-pco")).attr("readonly","readonly");if($("#kecamatanBox").attr("data-kecamatan-pco")!==""&&$("#kecamatanBox").attr("data-kecamatan-pco")!==undefined){$("#kotaBox").val($("#kecamatanBox").attr("data-kecamatan-pco").split(", ")[1]).attr("readonly","readonly");}
$("label[for='kecamatanBox']").html("Lokasi di Bandung");$("#kecamatanBox")[0].setAttribute("placeholder","Lokasi pengiriman");djr=dataJSON2;autoCOMPLETE_T(dataJSON2,0,"Kirim via GO-JEK");$(".helpToggle").fadeOut(150,doThese);}else if(/^(4|5|6)$/.test(Number(tval))){$pvb.add($kob).add($kcb).removeClass("error-box");$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");$("#kecamatanBox").val("").removeAttr("readonly");$("#provinsiBox").val("DKI JAKARTA").attr("readonly","readonly");$("#kotaBox").val("").attr("readonly","readonly");$("#kecamatanBox")[0].setAttribute("placeholder","Lokasi Pool Travel");$("label[for='kecamatanBox']").html("Lokasi pool di Jakarta");$(".alamat-pemesan").val("").attr("readonly","readonly");if(Number(tval)===4){djr=dataJSON4;autoCOMPLETE_T(dataJSON4,1,"Kirim via Travel X-TRANS");}else if(Number(tval)===5){djr=dataJSON5;autoCOMPLETE_T(dataJSON5,1,"Kirim via Travel DAY TRANS");}else if(Number(tval)===6){djr=dataJSON6;autoCOMPLETE_T(dataJSON6,1,"Kirim via Travel BARAYA");}
$("#save_id_standard").prop("disabled",0);$("#kecamatanBox").focus();$(".helpToggle").fadeOut(0,doThese);}
$("#opsiTitle").html("Kirim via "+arrayKurir[Number(tval)]);}}else{disBtnProv();disBtnKab();disBtnKec();djr=undefined;$pvb.add($kob).add($kcb).removeClass("error-box");$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");$("#provinsiBox, #kecamatanBox, #kotaBox, .alamat-pemesan").attr("readonly","readonly");$("#provinsiBox").val($("#outlet_"+(Number(tval))).attr("data-prov"));if($("#outlet_"+(Number(tval))).attr("data-kec")!==""&&$("#outlet_"+(Number(tval))).attr("data-kec")!==undefined){$("#kotaBox").val($("#outlet_"+(Number(tval))).attr("data-kec").split(", ")[1]);$("#kecamatanBox").val($("#outlet_"+(Number(tval))).attr("data-kec").split(", ")[0]);}
$(".alamat-pemesan").val($("#outlet_"+(Number(tval))).attr("data-alamat"));$("#jb_0_pco").html($("#outlet_"+(Number(tval))).attr("data-buka-0"));$("#jb_1_pco").html($("#outlet_"+(Number(tval))).attr("data-buka-1"));$("#jt_pco").html($("#outlet_"+(Number(tval))).attr("data-tutup"));$("#wa_pco").html($("#outlet_"+(Number(tval))).attr("data-wa"));$("#bbm_pco").html($("#outlet_"+(Number(tval))).attr("data-bbm"));$("#ph_pco").html($("#outlet_"+(Number(tval))).attr("data-ph"));$("label[for='alamat-pemesan']").html("Alamat Pengambilan");$("label[for='kotaBox']").html("Kab/Kot.");$("label[for='kecamatanBox']").html("Kec.");$("#opsiTitle").html($("#opsiTitle").attr("data-a-t"));$("#dropdown_help, #opsiKurirStandard").add($llc).add($blc).fadeOut(0);$("#save_id_standard").prop("disabled",0);$(".helpToggle").fadeOut(150,function(){$(".kantorPrintCo").fadeIn(150,updateTotal);});}}}
definisiVar();misc.initTooltip();misc.spfLink();misc.helpModal();$(".form-control-readonly").removeAttr("readonly");$("input[type='file']").prop("disabled",false);function rcfc(){if($(window).width()<=560){$("#buttonSelesai").removeClass("floatControl").removeAttr("style");$(".btn-group").addClass("btn-block mt5");}else{$("#buttonSelesai").addClass("floatControl");$(".btn-group").removeClass("btn-block mt5");}}
rcfc();$(window).on("resize",rcfc);if($(window).width()>992){$("#bantuan-pengisian-pesanan").carousel({interval:false,pause:true,cycle:false});}
$("#scrollAtas").click(misc.scrollAtas);misc.scrollAtas();misc.btnBantuanLokasi();if(/localhost|appspot|\d\-\d\-\d\-dot\-printco\-webapp\.appspot\.com/.test(location.href)){$("#locti").fadeIn(0);}else{$("#locti").remove();}
$("#jasaKurir").on("change",jasaKurir);function reinitP($a){$a.popover({animation:0,html:1,container:"body"});}
$(window).on("scroll",function(){if($(".popover.top.in")){$("[data-toggle=\"popover\"]").popover("destroy");}
reinitP($("[data-toggle=\"popover\"]"));});reinitP($("[data-toggle=\"popover\"]"));if(/firefox/i.test(navigator.userAgent)){resetSemuaData(1);}
$(".judul-buku").eq(0).val("ORDER #1");$("#nama-pemesan, .alamat-pemesan").val("TIDAK PERLU DIISI");$("#telepon-pemesan").val("0812345678910");$("#email-pemesan").val("TIDAK@PERLU-DIISI.com");$("#provinsiBox").removeAttr("readonly");$(".dropship_rows").find("form-control").removeClass("form-control").addClass("dropship-control");$("#dropship-modal").on("click",function(){$("#yakin-dropship").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);$("#yakin-dropship").on("shown.bs.modal",function(){$("#dropship-active").on("click",function(){$("#yakin-dropship").modal("hide");$("#yakin-dropship").on("hidden.bs.modal",change2dropship);});});});$("#revert-standard").on("click",function(){$("#yakinReloadTab").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);$("#reloadTabFP").on("click",function(){$("#yakinReloadTab").modal("hide").promise().done(misc.spfLinkFX);$("#yakinReloadTab").on("hidden.bs.modal",function(){var href=location.href.replace(/[#\?]/g,"");location.replace(href);});});});$("#id-loader-img").fadeOut(300,function(){$("#id-loader-img").remove();$("#dropship-modal")[0].disabled=0;$(".notif").fadeIn(0);});if(!dropship){$("#provinsiBox")[0].setAttribute("readonly","readonly");$(".alamat-pemesan").attr("readonly","readonly");}} 
function getPriceDiscount(){if($("[name='jabedi']").length){jabedi=1;if($(".book-sewing").children("option").length>1){$(".book-sewing").children("option").last().remove();}}
var xhrP,dataSent;xhrP=new XMLHttpRequest();dataSent={id_outlet:"A"};xhrP.open("POST","/form-outlet/json/rhps",1);xhrP.setRequestHeader("Content-Type","application/json; charset=UTF-8");xhrCounter+=1;if(xhrCounter===1){xhrP.send(JSON.stringify(dataSent));}
xhrP.addEventListener("load",function(e){var dt=JSON.parse(e.currentTarget.responseText);dataJH=dt;$("#diskonHarga").attr("data-diskon-harga",dt.discount).attr("data-diskon-update",dt.update).attr("data-diskon-limit",dt.limit).promise().done(function(){var $ukc=$(".ukuran-kertas").children(),ukv=["_*_",dt.h_k_b6+"|"+dt.b_k_b6+"|B6",dt.h_k_a5+"|"+dt.b_k_a5+"|A5",dt.h_k_b5+"|"+dt.b_k_b5+"|B5",dt.h_k_a4+"|"+dt.b_k_a4+"|A4"],ukvp=["_*_",dt.h_k_b6_p+"|"+dt.b_k_b6+"|B6",dt.h_k_a5_p+"|"+dt.b_k_a5+"|A5",dt.h_k_b5_p+"|"+dt.b_k_b5+"|B5",dt.h_k_a4_p+"|"+dt.b_k_a4+"|A4"],ukvw=["_*_",dt.h_k_b6w+"|"+dt.b_k_b6+"|B6",dt.h_k_a5w+"|"+dt.b_k_a5+"|A5",dt.h_k_b5w+"|"+dt.b_k_b5+"|B5",dt.h_k_a4w+"|"+dt.b_k_a4+"|A4"],$jcc=$(".jenis-cover").children(),jcv=["_*_",dt.h_c_sw+"|Soft Cover Warna",dt.h_c_sbw+"|Soft Cover BW",dt.h_c_hbw+"|Hard Cover BW",dt.h_c_hw+"|Hard Cover Warna",dt.h_rk_sw+"|SC Warna RING KAWAT",dt.h_rk_sbw+"|SC BW RING KAWAT",dt.h_rk_hbw+"|HC BW RING KAWAT",dt.h_rk_hw+"|HC Warna RING KAWAT"];$ukc.each(function(i,v){$(v).val(ukv[i]).attr("data-v-p",ukvp[i]).attr("data-o-p",ukv[i]).attr("data-w-p",ukvw[i]);});$jcc.each(function(i,v){$(v).val(jcv[i]);});refPnH=dt.h_pnh||5000;$(".hargaBookWrap").val(dt.h_b_w);$("#book-wrap").attr("data-h-bw","Rp "+misc.tk(dt.h_b_w));$(".hargaBookWrap")[0].innerHTML+=" ( +Rp "+misc.tk(dt.h_b_w)+" &times; Jumlah Copy )";if(!jabedi){$(".hargaBookSew").val(dt.h_b_s);$("#book-sewing").attr("data-h-bs","Rp "+misc.tk(dt.h_b_s));$(".hargaBookSew")[0].innerHTML+=" ( +Rp "+misc.tk(dt.h_b_s)+" &times; Jumlah Copy )";}}).promise().done(beneran);xhrCounter=0;},0);xhrP.onerror=function(){$("#jsonGetError").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);xhrCounter=0;};}
getPriceDiscount();}
function cekDulu(){var result=0;misc.buttonSizing();var uav=window.navigator.userAgent;if(!!window.FileReader&&!!window.atob&&!!window.btoa&&!!window.addEventListener&&!(/msie|trident/i.test(uav))){result=1;}
return result;}
function mundur(){$("#wrap-luar").fadeOut(300,function(){$("#wrap-luar").remove();$("#oldBrowser").modal({backdrop:"static",keyboard:false,show:true});misc.delPadBody();});}
if(!dataJSON&&!dataJSON2&&!dataJSON4&&!dataJSON5&&!dataJSON6){cntr+=1;if(cntr===1){if(cekDulu()===1){$.getJSON(jsonPath,function(dt){dataJSON=dt;}).done(function(){$.getJSON(jsonPath2,function(dt){dataJSON2=dt;}).done(function(){$.getJSON(jsonPath4,function(dt){dataJSON4=dt;}).done(function(){$.getJSON(jsonPath5,function(dt){dataJSON5=dt;}).done(function(){$.getJSON(jsonPath6,function(dt){dataJSON6=dt;});});});});});$.each(imgs,function(i){$("<img/>").attr("src",pth+imgs[i]);});$(window).on("load",mulai);}else{mundur();}}}else{mulai();}}