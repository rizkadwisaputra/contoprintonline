function formJS(){"use strict";var refPnH;var dataVidStandard;var dataVidDropship;var daftarProvinsi=[];var daftarKab=[];var daftarKec=[];var desKur=[];var il=0;var cntr=0;var jabedi=0;var dropship;var jsonPath="/ext/json/ongkir";var jsonPath2="/dynamo/GOJEK_BDG.0001";var jsonPath4="/dynamo/XTRANS_BDG.0001";var jsonPath5="/dynamo/DAYTRANS_BDG.0001";var jsonPath6="/dynamo/BARAYA_BDG.0001";var dataJSON;var dataJSON2;var dataJSON4;var dataJSON5;var dataJSON6;var dataJH;var dropfee;var djr;var $hb;var $nnd;var $nns;var $npd;var $nps;var $selesai;var $tbj;var $hpt;var emailReminderFlag; var land_time=new Date();var away_time;var delta_time;var reset_form=0;var site_ref=document.referrer;var saved_cookie;var usat=window.navigator.userAgent;var getDevice=function(a){var pgwBrowser={};pgwBrowser.userAgent=a;pgwBrowser.browser={};pgwBrowser.viewport={};pgwBrowser.os={};var browserData=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9\.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9\.]*) Mobile",versionIdentifier:"Chrome/([0-9\.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9\.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9\.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9\.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9\.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9\.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9\.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9\.]*)",versionIdentifier:"Version/([0-9\.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9\.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9\.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9\.]*)",versionIdentifier:"rv:([0-9\.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9\.]*)",versionIdentifier:"Edge/([0-9\.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9\.]*)",versionIdentifier:"Version/([0-9\.]*)"}];var osData=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9\.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9\.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9\.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|\.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|\.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|\.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|\.])11([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|\.])10([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|\.])9([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|\.])8([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|\.])7([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|\.])6([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|\.])5([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|\.])4([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|\.])3([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|\.])2([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|\.])1([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|\.])0([0-9_\.]*))",versionSeparator:"[_|\.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9\.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}];var setBrowserData;var setBrowserVersion;var setOsData;var setOsVersion;setBrowserData=function(){var userAgent=pgwBrowser.userAgent.toLowerCase();var browserRegExp;var browserRegExpResult;var versionRegExp;var versionRegExpResult;var i=0;while(i<browserData.length){browserRegExp=new RegExp(browserData[i].identifier.toLowerCase());browserRegExpResult=browserRegExp.exec(userAgent);if(browserRegExpResult!==null&&browserRegExpResult[1]){pgwBrowser.browser.name=browserData[i].name;pgwBrowser.browser.group=browserData[i].group;if(browserData[i].versionIdentifier){versionRegExp=new RegExp(browserData[i].versionIdentifier.toLowerCase());versionRegExpResult=versionRegExp.exec(userAgent);if(versionRegExpResult!==null&&versionRegExpResult[1]){setBrowserVersion(versionRegExpResult[1]);}}else{setBrowserVersion(browserRegExpResult[1]);}
break;}
i+=1;}};setBrowserVersion=function(version){var splitVersion=version.split(".",2);pgwBrowser.browser.fullVersion=version;if(splitVersion[0]){pgwBrowser.browser.majorVersion=parseInt(splitVersion[0]);}
if(splitVersion[1]){pgwBrowser.browser.minorVersion=parseInt(splitVersion[1]);}
return true;};setOsData=function(){var userAgent=pgwBrowser.userAgent.toLowerCase();var osRegExp;var osRegExpResult;var versionRegExp;var versionRegExpResult;var i=0;while(i<osData.length){osRegExp=new RegExp(osData[i].identifier.toLowerCase());osRegExpResult=osRegExp.exec(userAgent);if(osRegExpResult!==null){pgwBrowser.os.name=osData[i].name;pgwBrowser.os.group=osData[i].group;if(osData[i].version){setOsVersion(osData[i].version,(osData[i].versionSeparator||"."));}else if(osRegExpResult[1]){setOsVersion(osRegExpResult[1],(osData[i].versionSeparator||"."));}else if(osData[i].versionIdentifier){versionRegExp=new RegExp(osData[i].versionIdentifier.toLowerCase());versionRegExpResult=versionRegExp.exec(userAgent);if(versionRegExpResult!==null&&versionRegExpResult[1]){setOsVersion(versionRegExpResult[1],(osData[i].versionSeparator||"."));}}
break;}
i+=1;}
return true;};setOsVersion=function(version,separator){var splitVersion;if(separator.substr(0,1)==="["){splitVersion=version.split(new RegExp(separator,"g"),2);}else{splitVersion=version.split(separator,2);}
if(separator!=="."){version=version.replace(new RegExp(separator,"g"),".");}
pgwBrowser.os.fullVersion=version;if(splitVersion[0]){pgwBrowser.os.majorVersion=parseInt(splitVersion[0]);}
if(splitVersion[1]){pgwBrowser.os.minorVersion=parseInt(splitVersion[1]);}
return true;};setBrowserData();setOsData();return pgwBrowser;};var device=getDevice(usat);device=device.browser.name+" "+device.browser.majorVersion+" on "+device.os.name+" ("+device.os.group+")";var screen_res=(window.outerWidth||$(window).outerWidth())+" &times; "+(window.outerHeight||$(window).outerHeight());var imgs=["redirectLoader.gif","a.png","smile.png","captcha.png","amte.png","paper.png","crossword.png","icon.png","njebluk.png","puyeng.png","c1.png","c2.png","c3.png","whatsapp0000.png","bbm0000.png","jne.png","pos_giro_logo.png","wahana_logo_s.png","pandu_logo_s.png"];var arrayKurir=["","JNE (REGULAR)","GO-JEK (BANDUNG)","LEGA PAKET","X-TRANS (JAKARTA)","DAY TRANS (JAKARTA)","BARAYA (JAKARTA)","POS INDONESIA","","","","JNE (YES)","JNE (OKE)"];var xhrCounter=0;var xhrCounterA;var pth=/localhost/i.test(location.href)?"/images/":"https://storage.googleapis.com/printco-assets/";var misc;misc={caps:function(a){if(a){a=a.toUpperCase();}
return a;},en_d:function(){$(".nama-penerima-dropship").last().removeAttr("readonly");$(".telepon-penerima-dropship").last().removeAttr("readonly");$(".provinsi-penerima-dropship").last().removeAttr("readonly");if($(".ko-penerima-dropship").last().val()!==""){$(".ko-penerima-dropship").last().removeAttr("readonly");}
if($(".kk-penerima-dropship").last().val()!==""){$(".kk-penerima-dropship").last().removeAttr("readonly");}
$(".alamat-penerima-dropship").last().removeAttr("readonly");$(".bantuan-prov").last().removeAttr("disabled");if($(".provinsi-penerima-dropship").last().val()!==""&&$(".ko-penerima-dropship").last().val()!==""){$(".bantuan-kab").last().removeAttr("disabled");}
if($(".ChosenKurirDropship").last().val()!==""){$(".bantuan-kur").last().removeAttr("disabled");$(".ChosenKurirDropship").last().removeAttr("disabled");}
if($(".kk-penerima-dropship").last().val()!==""){$(".bantuan-kec").last().removeAttr("disabled");}},di_d:function(){$(".nama-penerima-dropship").attr("readonly","readonly");$(".telepon-penerima-dropship").attr("readonly","readonly");$(".provinsi-penerima-dropship").attr("readonly","readonly");$(".ko-penerima-dropship").attr("readonly","readonly");$(".kk-penerima-dropship").attr("readonly","readonly");$(".alamat-penerima-dropship").attr("readonly","readonly");$(".bantuan-prov").prop("disabled",1);$(".bantuan-kab").prop("disabled",1);$(".bantuan-kec").prop("disabled",1);$(".bantuan-kur").prop("disabled",1);$(".ChosenKurirDropship").prop("disabled",1);},delPadBody:function(){$("body")[0].removeAttribute("style");if($(window).width()<600){$(".modal.fade").on("shown.bs.modal",function(){$(".modal.fade").animate({"padding-right":0},300);});}},btnBantuanLokasi:function(){$(".btnBantuanLokasi").on("click",function(){if(!$("#bantuanLokasiWords").html().length){$("#bantuanLokasi").find(".modal-title").html("UPSSS...");$("#bantuanLokasiWords").html("<div class='alert alert-info text-center' style='margin-top:20px'>Silakan <strong>pilih kurir</strong> terlebih dahulu</div>");}
$("#bantuanLokasi").modal({show:1,backdrop:"static"});});},miscError:function(){$("#miscError").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);},helpModal:function(){$("#help_1").on("click",function(){$(".help_1").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);});$("#help_2").on("click",function(){$(".help_2").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);});$("#help_kt").on("click",function(){$(".help_kt").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);});},spfLink:function(){$(".spf-link").on("click",function(e){$("a").not($(e.currentTarget)).attr("href","#").promise().done(function(){$("button, input, textarea, select").prop("disabled",1).promise().done(function(){$("section, footer").css({opacity:0.5});});});});},spfLinkFX:function(){$("button, input, textarea, select").prop("disabled",1);$("a").attr("href","#");$("section, footer").css({opacity:0.5});},tk:function(a,z){var f=[];var i=1;var r;z=z===","?",":".";if(a!==undefined&&a!==""){r=Math.abs(Math.floor(a)).toString();f=r.split("").reverse();while(i<=Math.floor(f.length/4)){f.splice((4*i-1),0,z);i+=1;}
a=f.reverse().join("")+",-";}else{a="0,-";}
return a;},kt:function(a){var b;if(a!==undefined){b=Number(a.replace(/\.+|rp|,-|\s+/ig,""));}else{b=0;}
return b;},comma:function(a){var result=a;if(a!==undefined){if(a%1>0){result=misc.roundUp(a*1000)/1000;result=result.toFixed(2);}
result=result.toString().replace(/\./g,",");}
return result;},trimS:function(a){var r=a/1e6;if(r%1>0){r=r.toFixed(2);}
return r+" MB";},trimSpeed:function(a){var ar=[" B/s"," KB/s"," MB/s"];var u=ar[0];var r;if(Math.floor(a/1e6)>0){r=a/1e6;u=ar[2];}else if(Math.floor(a/1e3)>0){r=a/1e3;u=ar[1];}
if(r%1>0){r=r.toFixed(2);}
return r+u;},wrn:function(){return"Pesanan Anda belum selesai terunggah!";},checkEmail:function(a){var rn=/^([\w\-]+(?:\.[\w\-]+)*)@((?:[\w\-]+\.)*\w[\w\-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;var result=0;if(rn.test(a)){result=1;}
return result;},checkPhone:function(a){var result=0;if(a!==""){a=a.toString();}
if(/^[0-9]+$/.test(a)&&a.length>=10){result=1;}
return result;},r_d:function(a){var b;var buffer=[];if(a!==undefined){b=a.slice();b.forEach(function(v,i){b.forEach(function(vv,ii){if(i!==ii&&v===vv){b.splice(ii,1,"_*deleted*_");}});});b.forEach(function(v){if(v!=="_*deleted*_"){buffer.push(v);}});}
return buffer;},roundUp:function(a){if(a%1>0){a=Math.ceil(a);}
return a;},initTooltip:function(){$("[data-toggle=\"tooltip\"]").each(function(i){var $t=$("[data-toggle=\"tooltip\"]").eq(i);if($t.tooltip){$t.tooltip("destroy");}
$t.tooltip({container:"body",html:true,animation:false}).bind("click focus",function(){$t.tooltip("hide");});});},checkPK:function(v,a,d){var result=0;var i=0;var dob=Object.keys(d);if(a===0){while(i<dob.length){if(d[i].provinsi===v){result=1;break;}
i+=1;}}else{while(i<dob.length){if(d[i].kota===v){result=1;break;}
i+=1;}}
return result;},checkPK2:function(v,d){var result=0;var i=0;var dob=Object.keys(d);while(i<dob.length){if(d[i].lokasi===v){result=1;break;}
i+=1;}
return result;},getActBtn:function($e){var result;var h=0;while(h<$e.length){if($e.eq(h).css("display")!=="none"){result=Number($e[h].getAttribute("data-num-section"));break;}
h+=1;}
return result;},ambilOrNot:function(){var result=0;if($("#provinsiBox").attr("readonly")){if($("#provinsiBox").val()&&$("#kecamatanBox").val()){result=1;}}else{if($("#ChosenKurirStandard").val()){result=1;}}
return result;},checkIDKurirStandard:function(e){var t;var ide;if(e){try{t=e.target;ide=t.getAttribute("id");if(/email/i.test(ide)){emailReminderFlag=0;if(!misc.checkEmail(t.value)){$(t).addClass("error-box");}else{$(t).removeClass("error-box");}}else if(/telepon/i.test(ide)){if(!misc.checkPhone(t.value)){$(t).addClass("error-box");}else{$(t).removeClass("error-box");}}else{if(/^(\s)?$/.test(t.value)){$(t).addClass("error-box");}else{$(t).removeClass("error-box");}}}catch(ignore){}}
if(!(/^(\s)?$/.test($("#nama-pemesan").val()))&&misc.checkEmail($("#email-pemesan").val())&&misc.checkPhone($("#telepon-pemesan").val())&&misc.ambilOrNot()){if(/^(2|3|(1\d?)|7)$/.test($("#jasaKurir").val())){if(!(/^(\s)?$/.test($(".alamat-pemesan").eq(0).val()))){$("#kecamatanBox").removeClass("error-box");$nns.prop("disabled",0);}else{if(!(/^rp\ 0,-$|^$/i.test($("#harga-ongkir").val()))){$("#kecamatanBox").removeClass("error-box");$nns.prop("disabled",0);}else{$nns.prop("disabled",1);}}}else{$("#kecamatanBox").removeClass("error-box");$nns.prop("disabled",0);}}else{$nns.prop("disabled",1);}},checkIDDropship:function(e){var t;var ide;function checkYo(){if($(".error-box").length===0&&!(/^(\s)?$/.test($("#nama-pemesan-dropship").val()))&&misc.checkEmail($("#email-pemesan-dropship").val())&&misc.checkPhone($("#telepon-pemesan-dropship").val())&&!(/^(\s)?$/.test($("#alamat-pemesan-dropship").val()))){$nnd.prop("disabled",0);}else{$nnd.prop("disabled",1);}}
if(misc.getActBtn($(".fp-sub-section"))===0){if(typeof e==="object"){t=e.target;ide=t.getAttribute("id");if(/email/i.test(ide)){emailReminderFlag=0;if(!misc.checkEmail(t.value)){$(t).addClass("error-box").promise().done(checkYo);}else{$(t).removeClass("error-box").promise().done(checkYo);}}else if(/telepon/i.test(ide)){if(!misc.checkPhone(t.value)){$(t).addClass("error-box").promise().done(checkYo);}else{$(t).removeClass("error-box").promise().done(checkYo);}}else{if(/^(\s)?$/.test(t.value)){$(t).addClass("error-box").promise().done(checkYo);}else{$(t).removeClass("error-box").promise().done(checkYo);}}}else{if(!(/^(\s)?$/.test($("#nama-pemesan-dropship").val()))&&misc.checkEmail($("#email-pemesan-dropship").val())&&misc.checkPhone($("#telepon-pemesan-dropship").val())&&!(/^(\s)?$/.test($("#alamat-pemesan-dropship").val()))){$nnd.prop("disabled",0);}else{$nnd.prop("disabled",1);}}}},buttonSizing:function(){function rcfc(){if($(window).width()<=1024){$(".btn-social-icon").removeClass("btn-social-icon").addClass("bsi");$(".btn-social").removeClass("btn-social").addClass("bso");$(".btn-lg").removeClass("btn-lg").addClass("btn-buffer");$(".input-lg").removeClass("input-lg").addClass("input-buffer");$(".btn").each(function(i,v){var $t=$($(".btn")[i]);if(!(/group/.test($(v).parent()[0].className))&&!(/kurir-help/.test($(v)[0].id))&&!(/top-nav-btn/.test($(v).parent()[0].className))){$t.addClass("m5");}});$(".input-group-lg").removeClass("input-group-lg").addClass("input-group-buffer");if($(window).width()<576){if($("#beta-notifier").css("display")!=="none"){$("#beta-notifier").css({display:"block",position:"static",margin:"5px auto","text-align":"center"});}}else{if($("#beta-notifier").css("display")!=="none"){$("#beta-notifier").css({display:"inline",position:"relative",margin:"","text-align":""});}}}else{$(".input-buffer").removeClass("input-buffer").addClass("input-lg");$(".btn-buffer").removeClass("btn-buffer").addClass("btn-lg");$(".input-group-buffer").removeClass("input-group-buffer").addClass("input-group-lg");$(".btn").removeClass("m5");$(".bsi").removeClass("bsi").addClass("btn-social-icon");$(".bso").removeClass("bso").addClass("btn-social");}
misc.initTooltip();}
rcfc();$(window).on("resize",rcfc);$(".btn-social,.btn-social-icon,.fa").each(function(i){var $t=$(".btn-social,.btn-social-icon,.fa").eq(i);if($t.css("display")==="none"){if($t.hasClass("btn-block")){$t[0].style.cssText+="display:block!important;";}else{$t[0].style.cssText+="display:inline-block!important";}}});},dtr:function(){var dte=new Date();var mill=dte.getTime();return mill;},formatClock:function(a){if(typeof a!=="number"){a=Number(a);if(isNaN(a)){return"ERROR: INPUT MUST BE NUMBER (SECOND)";}}
if(a<0){return"ERROR: INPUT MUST BE POSITIVE NUMBER";}
var hour=Math.floor(a/3600);var minute=Math.floor(a/60)-(hour*60);var second=a-(hour*3600)-(minute*60);function z(e){if(e<10){e="0"+e;}
return e;}
hour=z(hour);minute=z(minute);second=z(second);return hour+":"+minute+":"+second;},escapeChars:function(a){return encodeURIComponent(a);},processTipe:function(u){if(/warna/i.test(u)){u="<mark style='background:darkcyan;color:yellow'>"+u+"</mark>";}else if(/premium\ bw/i.test(u)){u="<mark style='background:gold;color:#000;'>"+u+"</mark>";}
return u;},setSelesai:function(){$selesai.removeClass("btn-default").addClass("btn-success");},resetSelesai:function(){$selesai.removeClass("btn-success").addClass("btn-default");},gmO:function(){function gN(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
var n1=gN(6,15);var n2=gN(0,5);var func=[{o:"+",f:function(a,b){return a+b;}},{o:"-",f:function(a,b){return a-b;}},{o:"&times;",f:function(a,b){return a*b;}}];var inx=Math.floor(Math.random()*func.length);var opr=func[inx].o;var res=func[inx].f(n1,n2);return[n1,n2,opr,res];},idGenerator:function(){var all=new Date();var year=all.getFullYear();var month=all.getMonth()+1;var day=all.getDate();var ms=all.getMilliseconds();var ymd;var result;var letter="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var additional;letter=letter.split("");function genL(){var num=Math.floor(Math.random()*letter.length);return letter[num];}
function genN(){var num=Math.floor(Math.random()*10);return num;}
function az(a){if(Number(a)<10){a="0"+a;}
return a;}
function maz(a){if(Number(a)<10){a=genL()+genN()+a;}else if(Number(a)>=10&&Number(a)<100){a=genL()+a;}
return a;}
if($("#id-pesanan").attr("data-d-s")){ymd=$("#id-pesanan").attr("data-d-s");}else{year=year.toString().substring(2);month=az(month);day=az(day);ymd=year+month+day;}
ms=maz(ms);additional=genN()+genL()+genL();result=ymd+"-"+ms+additional;return result;},scrollAtas:function(){var duration=Math.floor($(window).scrollTop()/4);$hb.animate({scrollTop:0},duration,misc.delPadBody);},bugForm:function(){function checkValid(a){var result=0;if(a.length>=100&&(/[\s\n\r\t]/.test(a))){result=1;}
return result;}
function showReportBugSuccess(a){$("#reportBugSuksesWords").html("<span style='color:darkgreen'>"+a+"</span>");$("#reportBugFormProcess").modal("hide").promise().done(function(){$("#reportBugSuccess").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);});}
function showReportBugError(a){$("#reportBugErrorWords").html("<span style='color:brown'>"+a+"</span>");$("#reportBugFormProcess").modal("hide").promise().done(function(){$("#reportBugError").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);});xhrCounter=0;}
function sendMailDev(message,email){var xhrP=new XMLHttpRequest();$("#reportBugForm").modal("hide").promise().done(function(){$("#captchaReporterHolder").fadeOut(0);$("#reportBugFormProcess").modal({show:true,backdrop:"static",keyboard:false}).promise().done(misc.delPadBody);});xhrP.open("POST","/report-bug/json/rhx",1);xhrP.setRequestHeader("Content-Type","application/json; charset=UTF-8");xhrCounter+=1;if(xhrCounter===1){xhrP.send(JSON.stringify({message:message,email:email,url:$("#bugURLReporter").val()}));}
xhrP.addEventListener("load",function(e){var dt=JSON.parse(e.target.responseText);if(xhrP.status>=200&&xhrP.status<400){if(dt.info){showReportBugSuccess(dt.info);}else if(dt.error){showReportBugError(dt.error);}else{showReportBugError("UNKNOWN ERROR");}}else{showReportBugError(xhrP.status);}
xhrCounter=0;},0);xhrP.addEventListener("error",function(){showReportBugError("ERROR");},0);xhrP.addEventListener("abort",function(){showReportBugError("ABORT");},0);}
var ref=misc.gmO();function resetAllBugForm(){$("#captchaReporterHolder").slideUp(150,function(){$("#captchaQuestionReporter").html("");$("#captchaReporter").val("");ref=misc.gmO();$("#sendBugReport").prop("disabled",1).hide(150);});}
$("#bugMessageReporter, #bugEmailReporter, #captchaReporter").val("");$("#charCount").html("");$("#sendBugReport").prop("disabled",1).fadeOut(0);$("#bugURLReporter").attr("readonly","readonly").val(location.href);$("#reportBugForm").on("shown.bs.modal",function(){$("#bugMessageReporter").focus();});$("#reportBugForm").modal({show:1,backdrop:"static"}).promise().done(function(){misc.delPadBody();$("#captchaReporter, #bugMessageReporter, #bugEmailReporter").on("input",function(){function coloring($a){var number;if($a.val().length>=100&&checkValid($a.val())){number="<strong style='color:darkgreen'>"+$a.val().length+"</strong>";}else{number="<span style='color:brown'>"+$a.val().length+"</span>";}
return number;}
var message;var email;$("#charCount").html("Karakter: "+coloring($("#bugMessageReporter")));if(misc.checkEmail($("#bugEmailReporter").val())&&checkValid($("#bugMessageReporter").val())){$("#captchaQuestionReporter").html(ref[0]+" "+ref[2]+" "+ref[1]+" = ...").promise().done(function(){$("#captchaReporterHolder").slideDown(150);});}else{resetAllBugForm();}
if(Number($("#captchaReporter").val())===ref[3]&&misc.checkEmail($("#bugEmailReporter").val())&&checkValid($("#bugMessageReporter").val())){$("#sendBugReport").prop("disabled",0).show(150);message=$("#bugMessageReporter").val();message=message.replace(/</g,"[").replace(/>/g,"]");email=$("#bugEmailReporter").val();$("#sendBugReport").on("click",function(){sendMailDev(message,email);});}else{$("#sendBugReport").prop("disabled",1).hide(150);}});});$("#reportBugForm").on("hidden.bs.modal",resetAllBugForm);},gen_Cookie:function(a,b){var d;var s=";secure";if(/localhost/i.test(location.href)){s="";}
d=new Date();d.setTime(d.getTime()+90*24*3600*1000);var expires="expires="+d.toUTCString();document.cookie=b+"="+a+";"+expires+";path=/form-pemesanan"+s;$("#suksesSetF").modal({show:1,backdrop:"static",keyboard:0});$("#suksesSetF").on("shown.bs.modal",function(){window.setTimeout(function(){$("#suksesSetF").modal("hide");},750);});},check_cookie_id:function(){var c=document.cookie;var r=0;var name="";var i=0;var cev;if(/printco_idps=/i.test(c)&&c!==""&&c!==undefined){c=c.split(";");while(i<c.length){if(/printco_idps=/i.test(c[i])&&c[i]!==""&&c[i]!==undefined){cev=c[i].split("printco_idps=")[1];r=1;break;}
i+=1;}}
if(cev){cev=JSON.parse(cev);name=misc.dobs(cev.n);}
return[r,name];},obs:function(a){var r;if(a!==undefined&&a!==null){r=a.toString().split("");r.forEach(function(v,i){var s=v.charCodeAt(0)+23;r[i]=String.fromCharCode(s);});r=btoa(r.join(""));}
return r;},dobs:function(a){var r;if(a!==undefined&&a!==null){r=atob(a);r=r.split("");r.forEach(function(v,i){var s=v.charCodeAt(0)-23;r[i]=String.fromCharCode(s);});r=r.join("");}
return r;},idPemesanListener:function(){var $all=$("#pemesan").find(".form-control");var counter=[];var all=5;function saveIDStandard(){var obj={};var d=new Date();$all.each(function(i){var $t=$all.eq(i);if(/kurir/i.test($t[0].id)){if($t.val()!==undefined||$t.val()!==null||$t.val()!==""){if(!obj.k){obj.k=misc.obs($t.val());}}}else if(/nama/i.test($t[0].id)){obj.n=misc.obs($t.val());}else if(/email/i.test($t[0].id)){obj.e=misc.obs($t.val());}else if(/alamat/i.test($t[0].className)){obj.a=misc.obs($(".alamat-pemesan").eq(0).val());}else if(/telepon/i.test($t[0].id)){obj.t=misc.obs($t.val());}});d.getTime();obj.ts=misc.obs(d.toUTCString());obj=JSON.stringify(obj);misc.gen_Cookie(obj,"printco_idps");}
function checkAllVal(){function checkEach($t){var tid=$t[0].id;var tval=$t.val();var tcl=$t[0].className;if(/kurir/i.test(tid)){if(/^([1-9]+)?0$|bbrp/i.test(tval)){all=3;}else if(/^(4|5|6)$/.test(tval)){all=4;}else{all=5;}
if(!isNaN(Number(tval))){counter[0]="kurir";}else if(isNaN(Number(tval))&&counter.indexOf("kurir")>-1){counter.splice(counter.indexOf("kurir"),1);}}
if(/nama/i.test(tid)){if($t.val()){counter[1]="nama";}else if(!tval&&counter.indexOf("nama")>-1){counter.splice(counter.indexOf("nama"),1);}}
if(/telepon/i.test(tid)){if(misc.checkPhone(tval)){counter[2]="telepon";}else if(!misc.checkPhone(tval)&&counter.indexOf("telepon")>-1){counter.splice(counter.indexOf("telepon"),1);}}
if(/email/i.test(tid)){if(misc.checkEmail(tval)){counter[3]="email";}else if(!misc.checkEmail(tval)&&counter.indexOf("email")>-1){counter.splice(counter.indexOf("email"),1);}}
if(/alamat/i.test(tcl)){if(tval){counter[4]="alamat";}else if(!tval&&counter.indexOf("alamat")>-1){counter.splice(counter.indexOf("alamat"),1);}}}
$all.each(function(i){checkEach($all.eq(i));});if(all>3){if(counter.length===all){$("#save_id_standard").prop("disabled",0);}else{$("#save_id_standard").prop("disabled",1);}}else{$("#save_id_standard").prop("disabled",0);}}
$all.each(function(i){$all.eq(i).bind("input change",checkAllVal);});$("#save_id_standard").on("click",saveIDStandard);},idPemesanDropshipListener:function(){var $all=$("#pemesan-dropship").find(".form-control");var counter=[];var all=4;function saveIDDropship(){var obj={};var d=new Date();$all.each(function(i){var $t=$all.eq(i);var tid=$t[0].id;var tval=$t.val();if(/kurir/i.test(tid)){obj.k=misc.obs(tval);}else if(/nama/i.test(tid)){obj.n=misc.obs(tval);}else if(/email/i.test(tid)){obj.e=misc.obs(tval);}else if(/alamat/i.test(tid)){obj.a=misc.obs(tval);}else if(/telepon/i.test(tid)){obj.t=misc.obs(tval);}});d.getTime();obj.timestamp=misc.obs(d.toUTCString());obj=JSON.stringify(obj);misc.gen_Cookie(obj,"printco_idpd");}
function checkAllVal(){function checkEach($t){var tval=$t.val();var tid=$t[0].id;if(/kurir/i.test(tid)){if(!isNaN(Number(tval))&&counter.indexOf("kurir")===-1){counter[0]="kurir";}else if(isNaN(Number(tval))&&counter.indexOf("kurir")>-1){counter.splice(0,1);}}
if(/nama/i.test(tval)){if(tval&&counter.indexOf("nama")===-1){counter[1]="nama";}else if(!tval&&counter.indexOf("nama")>-1){counter.splice(1,1);}}
if(/telepon/i.test(tid)){if(misc.checkPhone(tval)&&counter.indexOf("telepon")===-1){counter[2]="telepon";}else if(!misc.checkPhone(tval)&&counter.indexOf("telepon")>-1){counter.splice(2,1);}}
if(/email/i.test(tid)){if(misc.checkEmail(tval)&&counter.indexOf("email")===-1){counter[3]="email";}else if(!misc.checkEmail(tval)&&counter.indexOf("email")>-1){counter.splice(3,1);}}
if(/alamat/i.test(tid)){if(tval&&counter.indexOf("alamat")===-1){counter[4]="alamat";}else if(!tval&&counter.indexOf("alamat")>-1){counter.splice(4,1);}}}
$all.each(function(i){var $t=$all.eq(i);checkEach($t);});if(counter.length>=all){$("#save_id_dropship").prop("disabled",0);}else{$("#save_id_dropship").prop("disabled",1);}}
$all.each(function(i){var $t=$all.eq(i);$t.bind("input change",checkAllVal);});$("#save_id_dropship").on("click",saveIDDropship);}};var namaPemesan;var teleponPemesan;var emailPemesan;var alamatPemesan;var template;var templateDT;var separator;var jbu;var jhw;var jhn;var jpn;var jks;var uks;var jcr;var wb;var tipeOrder;var jhb;var totalBerat;var totalHarga;var totalPesanan;var diskonHarga;var diskonLimit;var selisihDiskon;var pnhHarga;var totalBeratArr;var totalHargaArr;var filePesananArr;var linkGS;var linkCS;var unggahFile;var resetSemua;var g;var gg;var dcntr;var rx;var rxf;var hargaOngkir;var hargaCetak;var waktuSampai;var autoCOMPLETE;var autoCOMPLETE_T;var hargaOngkirArr;var update;var dropshipPesananHapusTambah;var totalBeratDropshipArr;var hargaOngkirDropshipArr;var dropshipDisplay;var indexParent;var bufferBDP;var $dpp;var $bud;var $odd;var tt_prev_val;var uk_prev_val;var checkInvalidFile;var $jku=$("#jasaKurir");var $blw=$("#bantuanLokasiWords");var $bl=$("#bantuanLokasi");var $blmt=$bl.find(".modal-title");var $blc=$(".btnBantuanLokasi");var $llc=$(".listLokasi");var $kcb=$("#kecamatanBox");var $kob=$("#kotaBox");var $pvb=$("#provinsiBox");function disBtnProv(a){var $btn=$(".bantuan-prov");if(a!==undefined&&a>-1){$btn.eq(a).prop("disabled",1);$btn.eq(a).on("click","");}else{$btn.prop("disabled",1);$btn.on("click","");}}
function disBtnKab(a){var $btn=$(".bantuan-kab");if(a!==undefined&&a>-1){$btn.eq(a).prop("disabled",1);$btn.eq(a).on("click","");}else{$btn.prop("disabled",1);$btn.on("click","");}}
function disBtnKec(a){var $btn=$(".bantuan-kec");if(a!==undefined&&a>-1){$btn.eq(a).prop("disabled",1);$btn.eq(a).on("click","");}else{$btn.prop("disabled",1);$btn.on("click","");}}
function disBtnKur(a){var $btn=$(".bantuan-kur");if(a!==undefined&&a>-1){$btn.eq(a).prop("disabled",1);$btn.eq(a).on("click","");}else{$btn.prop("disabled",1);$btn.on("click","");}}
function btnProv(){var htm="";var $md=$("#bantuan-prov-modal");var $df=$("#daftar-prov");var $btn=$(".bantuan-prov");if(daftarProvinsi.length){$btn.removeAttr("disabled");htm+="<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Ada "+daftarProvinsi.length+" provinsi di INDONESIA</li>";daftarProvinsi.forEach(function(v){htm+="<li class='list-group-item'>"+v+"</li>";});htm+="</ul>";$df.html(htm);if($df.html()){$btn.prop("disabled",0);$btn.on("click",function(){$md.modal("show");});}}else{disBtnProv();}}
function btnKab(a){var htm="";var $md=$("#bantuan-kab-modal");var $df=$("#daftar-kab");var $btn=$(".bantuan-kab");if(a!==undefined&&a>-1){if(daftarKab[a].length){htm+="<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Ada "+daftarKab[a].length+" kota di "+$(".provinsi-penerima-dropship").eq(a).val()+"</li>";daftarKab[a].forEach(function(v){htm+="<li class='list-group-item'>"+v+"</li>";});htm+="</ul>";$df.html(htm);if($df.html()){$btn.eq(a).prop("disabled",0);$btn.eq(a).on("click",function(){$md.modal("show");});}}else{disBtnKab(a);}}else{if(daftarKab.length){htm+="<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Ada "+daftarKab.length+" kota di "+$("#provinsiBox").val()+"</li>";daftarKab.forEach(function(v){htm+="<li class='list-group-item'>"+v+"</li>";});htm+="</ul>";$df.html(htm);if($df.html()){$btn.prop("disabled",0);$btn.on("click",function(){$md.modal("show");});}}else{disBtnKab();}}}
function btnKec(a){var htm="";var $md=$("#bantuan-kec-modal");var $df=$("#daftar-kec");var $btn=$(".bantuan-kec");if(a!==undefined&&a>-1){if(daftarKec[a].length){htm+="<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Ada "+daftarKec[a].length+" kecamatan di "+$(".ko-penerima-dropship").eq(a).val()+"</li>";daftarKec[a].forEach(function(v){htm+="<li class='list-group-item'>"+v+"</li>";});htm+="</ul>";$df.html(htm);if($df.html()){$btn.eq(a).prop("disabled",0);$btn.eq(a).on("click",function(){$md.modal("show");});}}else{disBtnKec(a);}}else{if(daftarKec.length){htm+="<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Ada "+daftarKec.length+" kecamatan di "+$("#kotaBox").val()+"</li>";daftarKec.forEach(function(v){htm+="<li class='list-group-item'>"+v+"</li>";});htm+="</ul>";$df.html(htm);if($df.html()){$btn.prop("disabled",0);$btn.on("click",function(){$md.modal("show");});}}else{disBtnKec();}}}
function btnKur(a){var htm="";var $md=$("#deskripsi-kurir-modal");var $df=$("#desk-kur");var $btn=$(".bantuan-kur");if(a!==undefined&&a>-1){if(desKur[a]!==undefined){htm+=desKur[a];$df.html(htm);if($df.html()){$btn.eq(a).prop("disabled",0);$btn.eq(a).on("click",function(){$md.modal("show");});}}else{disBtnKur(a);}}else{if(desKur[0]!==undefined){htm+=desKur[0];$df.html(htm);if($df.html()){$btn.prop("disabled",0);$btn.on("click",function(){$md.modal("show");});}}else{disBtnKur();}}}
function pswitcher(a,iz){var $ukc=$(".ukuran-kertas").eq(iz).children();var $tipta=$(".tipe-tinta").eq(iz);var $tiptac=$tipta.children();var dt=dataJH;var ukv=["_*_",dt.h_k_b6+"|"+dt.b_k_b6+"|B6",dt.h_k_a5+"|"+dt.b_k_a5+"|A5",dt.h_k_b5+"|"+dt.b_k_b5+"|B5",dt.h_k_a4+"|"+dt.b_k_a4+"|A4"];var ukkv=["_*_",dt.h_kk_b6+"|"+dt.b_k_b6+"|B6",dt.h_kk_a5+"|"+dt.b_k_a5+"|A5",dt.h_kk_b5+"|"+dt.b_k_b5+"|B5",dt.h_kk_a4+"|"+dt.b_k_a4+"|A4"];var ukvs=["_*_",dt.h_k_b6s+"|"+dt.b_k_b6s+"|B6",dt.h_k_a5s+"|"+dt.b_k_a5s+"|A5",dt.h_k_b5s+"|"+dt.b_k_b5s+"|B5",dt.h_k_a4s+"|"+dt.b_k_a4s+"|A4"];var ukkvs=["_*_",dt.h_kk_b6s+"|"+dt.b_k_b6s+"|B6",dt.h_kk_a5s+"|"+dt.b_k_a5s+"|A5",dt.h_kk_b5s+"|"+dt.b_k_b5s+"|B5",dt.h_kk_a4s+"|"+dt.b_k_a4s+"|A4"];var ukvp=["_*_",dt.h_k_b6_p+"|"+dt.b_k_b6+"|B6",dt.h_k_a5_p+"|"+dt.b_k_a5+"|A5",dt.h_k_b5_p+"|"+dt.b_k_b5+"|B5",dt.h_k_a4_p+"|"+dt.b_k_a4+"|A4"];var ukvps=["_*_",dt.h_k_b6_ps+"|"+dt.b_k_b6s+"|B6",dt.h_k_a5_ps+"|"+dt.b_k_a5s+"|A5",dt.h_k_b5_ps+"|"+dt.b_k_b5s+"|B5",dt.h_k_a4_ps+"|"+dt.b_k_a4s+"|A4"];var ukvw=["_*_",dt.h_k_b6w+"|"+dt.b_k_b6+"|B6",dt.h_k_a5w+"|"+dt.b_k_a5+"|A5",dt.h_k_b5w+"|"+dt.b_k_b5+"|B5",dt.h_k_a4w+"|"+dt.b_k_a4+"|A4"];var ukvws=["_*_",dt.h_k_b6ws+"|"+dt.b_k_b6+"|B6",dt.h_k_a5ws+"|"+dt.b_k_a5+"|A5",dt.h_k_b5ws+"|"+dt.b_k_b5+"|B5",dt.h_k_a4ws+"|"+dt.b_k_a4+"|A4"];if(!(/kosong/i.test(a))){try{if(/hvs/i.test(a.split("|")[1])){$ukc.each(function(i,v){$(v).val(ukv[i]).attr("data-v-p",ukvp[i]).attr("data-o-p",ukv[i]).attr("data-w-p",ukvw[i]);});}else{$ukc.each(function(i,v){$(v).val(ukvs[i]).attr("data-v-p",ukvps[i]).attr("data-o-p",ukvs[i]).attr("data-w-p",ukvws[i]);});}}catch(ignore){return;}
$tiptac.each(function(i,v){if(i>0){$(v).prop("disabled",0);}});}else{$("#warningKertasKosong").modal("show");try{if(/hvs/i.test(a.split("|")[1])){$ukc.each(function(i,v){$(v).val(ukkv[i]).attr("data-o-p",ukkv[i]);});}else{$ukc.each(function(i,v){$(v).val(ukkvs[i]).attr("data-o-p",ukkvs[i]);});}}catch(ignore){return;}
if(Number($tipta.val())!==0){$tipta.val(0).css({"background-color":"",color:"#000"});}
$tiptac.each(function(i,v){if(i===0){$(v).attr("selected","selected");}else if(i>0){$(v).prop("disabled",1);}});}}
function updateOngkirDll(){var plusOngkir=0;var deliveryTime="Biaya Kurir<hr style='margin:5px 0'>";var beratTotal=0;var btb=totalBeratArr.slice();var htb=totalHargaArr.slice();if(hargaOngkirDropshipArr){if(hargaOngkirDropshipArr.length!==$(".dynamic-dropship").length){$.each(hargaOngkirDropshipArr,function(i){if(!$(".dynamic-dropship").eq(i)){hargaOngkirDropshipArr.splice(i,1);totalBeratDropshipArr.splice(i,1);}});}
hargaOngkirDropshipArr.forEach(function(v,i){var vl;plusOngkir+=v;if(v>0){vl="Rp "+misc.tk(v);deliveryTime+="<p>"+vl+"</p>";$(".ongkir-dropship").eq(i).val(vl).css("background-color","rgb(200,255,200)");$(".berat-unit-dropship").eq(i).val(totalBeratDropshipArr[i]+" kg").css("background-color","rgb(200,255,200)");}});if(!(/(^$|rp\ 0,-)/i.test($(".harga-pesanan").last().val()))){$("#harga-ongkir").val("Rp "+misc.tk(plusOngkir)).css("background-color","rgb(200,255,200)");$("#harga-ongkir").attr("data-original-title",deliveryTime);}}
totalBeratArr=[];totalHargaArr=[];$(".berat-pesanan").each(function(i){var $t=$(".berat-pesanan").eq(i);if($t.val()){totalHargaArr[i]=misc.kt($(".harga-pesanan").eq(i).val());totalBeratArr[i]=parseFloat($t.val().replace(/,/g,"."),10);}else{totalBeratArr[i]=btb[i];totalHargaArr[i]=htb[i];}});if(totalBeratDropshipArr){totalBeratDropshipArr.forEach(function(v,i){var $jbd=$(".dynamic-dropship").eq(i).find(".pesanan-wrap");$(".jumlah-buku-dropship").eq(i).val($jbd.length).css("background-color","rgb(200,255,200)");beratTotal+=v;});}
$("#total-pesanan").val(totalBeratArr.length);$("#total-berat").val(beratTotal+" kg");}
function checkUnitAddr(){var rs=0;$(".dynamic-dropship").each(function(i){var $t=$(".dynamic-dropship").eq(i);if(!!$t.find(".nama-penerima-dropship").val()&&!!$t.find(".telepon-penerima-dropship").val()&&!!$t.find(".ChosenKurirDropship").val()&&!!$t.find(".alamat-penerima-dropship").val()&&!!$(".telepon-pengirim-dropship").eq(0).val()&&!!$(".nama-pengirim-dropship").eq(0).val()&&!!$t.find(".alamat-penerima-dropship").val()){rs+=1;}});if(rs===$(".dynamic-dropship").length){rs=1;}else{rs=0;}
return rs;}
function checkPesanan(){var i=0;var rs=1;var l=$(".jumlah-halaman").length;while(i<l){if(!$(".jumlah-halaman").eq(i).val()||!$(".jumlah-pesanan").eq(i).val()||!$(".jenis-kertas").eq(i).val()||!$(".jenis-cover").eq(i).val()||!$(".ukuran-kertas").eq(i).val()){rs=0;break;}
i+=1;}
return rs;}
function semuaKumplit(){var result;result=0;if(!dropship){if(/bbrp/.test($jku.val())){result=1;}else{if(djr!==undefined){if(djr[0].provinsi){if(namaPemesan.value&&misc.checkPhone(teleponPemesan.value)&&emailPemesan.value&&alamatPemesan.value&&(linkGS.length>0||linkCS.length>0)&&!!hargaCetak){if(/^(1|7|11|12)$/.test($jku.val())){if(!!hargaOngkir&&!!waktuSampai){result=1;}}}}else{if(Number($jku.val())===3){if(namaPemesan.value&&misc.checkPhone(teleponPemesan.value)&&emailPemesan.value&&alamatPemesan.value&&(linkGS.length>0||linkCS.length>0)&&!!hargaCetak){if(!!hargaOngkir&&!!waktuSampai){result=1;}}}else{if(namaPemesan.value&&misc.checkPhone(teleponPemesan.value)&&emailPemesan.value&&(linkGS.length>0||linkCS.length>0)&&!!hargaCetak){if(/^\d+$/.test($jku.val())){if(!!hargaOngkir){result=1;}}}}}}else{if(/^\d?0$/.test($jku.val())){if(namaPemesan.value&&misc.checkPhone(teleponPemesan.value)&&emailPemesan.value&&alamatPemesan.value&&(linkGS.length>0||linkCS.length>0)&&!!hargaCetak){hargaOngkir=0;waktuSampai="N/A";result=1;}}}}}else{if(checkUnitAddr()===1&&misc.checkEmail($("#email-pemesan-dropship").val())&&misc.checkPhone($("#telepon-pemesan-dropship").val())&&$("#alamat-pemesan-dropship").val()&&hargaOngkirArr.length>0&&(linkGS.length>0||linkCS.length>0)){result=1;}}
return result;}
function editNameLink(b){var a=b;var ext;var idp;if(a!==undefined){a=a.split(".");ext=a.splice(a.length-1,1);idp=$("#id-pesanan").length?$("#id-pesanan").val():$("#id-pesanan-dropship").val();a.push("|"+idp);a.push("."+ext);a=a.join("").replace(/\s{1,}/g," ").replace(/[\ '",]/g,"_").replace(/[#\?\=]/g,"");}
return a;}
function getFile(eb){$("#tautanFile").removeClass("error-box");var f=eb.target.files;var elm=Object.keys(f);var wnote;function okFile(ib,etrl){if($(".sedangDicek").eq(ib).html()==="Converting..."){$(".sedangDicek").eq(ib).html("").addClass("glyphicon glyphicon-ok").css("color","darkgreen").tooltip({title:"File dapat diunggah",placement:"top",container:"body"});$(".b64-file-size").eq(ib).html(misc.trimS(etrl));}}
function removeFile(i){if($(".sedangDicek").eq(i).html()==="Converting..."){$(".sedangDicek").eq(i).html("").addClass("glyphicon glyphicon-remove wrn-msg").css("color","red").tooltip({title:"File error",placement:"top",container:"body"});if(filePesananArr[i]&&linkGS[i]){filePesananArr[i]="";linkGS[i]="";}}
$(".bootstrap-filestyle").slideUp(0,function(){$("#fileKeliru").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);misc.delPadBody();});}
function checkSemuaFile(){var result;result=1;$(".file-unit-holder").each(function(i){var $t=$(".file-unit-holder").eq(i);if($t.find($(".wrn-msg")).length){result=0;}});return result;}
function pushBase64(e,fv,i){var ib=filePesananArr.indexOf(fv);var etrl;if(e.target.result.length>0){try{if(!filePesananArr[ib].base64){filePesananArr[ib].base64=e.target.result;etrl=e.target.result.length;okFile(ib,etrl);}else{removeFile(i);}}catch(er){if(er){console.log(er);$("#fileKeliru").modal("hide").promise().done(function(){$("#fileProcessError").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);linkGS=[];filePesananArr=[];$("#semua-file").html("");$(".bootstrap-filestyle").show(0);misc.delPadBody();});return;}}}else{removeFile(i);}}
elm.forEach(function(v,i){var nmr="<span class='glyphicon glyphicon-paperclip'></span>&nbsp;&nbsp;";var fv=f[v];var tf=[];var r=new FileReader();if(fv.name===undefined){$("#fileKeliru").modal("hide").promise().done(function(){$("#fileProcessError").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);linkGS=[];filePesananArr=[];$("#semua-file").html("");$(".bootstrap-filestyle").show(0);misc.delPadBody();});return;}
if(fv.name!==undefined){tf=fv.name.split(".");}
if(((rx.test(fv.type)&&!rxf.test(fv.type))||rx.test(fv.name))&&fv.size<=64e6){tf=tf[tf.length-1];tf=fv.type||tf;linkGS.push("https://storage.googleapis.com/printco-pdf/"+encodeURI(editNameLink(fv.name)));filePesananArr.push(fv);if($("#semua-file").html()===""){$("#semua-file").html("<h3><u>Daftar file</u></h3><p class='file-unit-holder' style='display:none'>"+nmr+"<span class='sedangDicek'>Converting...</span> <code class='wba'>"+fv.name+"</code> | "+"<code>"+tf+"</code> | "+"<code class='b64-file-size'>"+misc.trimS(fv.size)+"</code>"+"&nbsp;&nbsp;&nbsp;<button type='button' style='float:none' class='close file-unit'>&times;</button></p>");}else{$("#semua-file").append("<p class='file-unit-holder' style='display:none'>"+nmr+"<span class='sedangDicek'>Converting...</span> <code class='wba'>"+fv.name+"</code> | "+"<code>"+tf+"</code> | "+"<code>"+misc.trimS(fv.size)+"</code>"+"&nbsp;&nbsp;&nbsp;<button type='button' style='float:none' class='close file-unit'>&times;</button></p>");}
try{r.readAsBinaryString(fv);r.addEventListener("load",function(e){pushBase64(e,fv,i);},0);r.addEventListener("error",function(){removeFile(i);},0);r.addEventListener("abort",function(){removeFile(i);},0);r.addEventListener("crash",function(){removeFile(i);},0);}catch(error){$("#binErrorWords").html("<p style='color:brown'><strong>ERROR MESSAGE:</strong> <em>"+error.message+"</em></p><hr><p class='text-center'>Silakan gunakan browser terbaru yang fully support HTML5, seperti Chrome atau Firefox.</p>");$("#binError").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);return;}}else{if(fv.size<=64e6){wnote="<mark style='background-color:mistyrose' class='wrn-msg'><span style='color:brown'><small>format tidak diperbolehkan</small></span></mark>";filePesananArr.push("");linkGS.push("");}else{wnote="<mark style='background-color:mistyrose' class='wrn-msg'><span style='color:red'><small>file terlalu besar, max 64 MB/file</small></span></mark>";filePesananArr.push("");linkGS.push("");}
if($("#semua-file").html()===""){$("#semua-file").html("<h3><u>Daftar file</u></h3><p class='file-unit-holder' style='display:none'>"+nmr+"<span class='sedangDicek glyphicon glyphicon-ban-circle' style='color:red'></span> Nama file: <code class='wba'>"+f[v].name+"</code> | "+wnote+"&nbsp;&nbsp;&nbsp;<button type='button' style='float:none;color:brown' class='close file-unit'>&times;</button></p>");}else{$("#semua-file").append("<p class='file-unit-holder' style='display:none'>"+nmr+"<span class='sedangDicek glyphicon glyphicon-ban-circle' style='color:red'></span>  Name file: <code class='wba'>"+f[v].name+"</code> | "+wnote+"&nbsp;&nbsp;&nbsp;<button type='button' style='float:none;color:brown' class='close file-unit'>&times;</button></p>");}
$(".bootstrap-filestyle").slideUp(0,function(){$("#fileKeliru").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);});}});unggahFile.value="";function updateElm(){$(".file-unit").on("click",function(e){var th=e.target;var i=$(".file-unit").index(th);$(".file-unit-holder").eq(i).slideUp(150,function(){$(".file-unit-holder").eq(i).remove();filePesananArr.splice(i,1);linkGS.splice(i,1);if(checkSemuaFile()===1){$(".bootstrap-filestyle").slideDown(150);}else{$(".bootstrap-filestyle").hide(0);}
if(semuaKumplit()===1&&checkInvalidFile()){if(!dropship){$nns.prop("disabled",0);}else{$nnd.prop("disabled",0);}}else if(!checkInvalidFile()){if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}}
if($(".file-unit").length===0){$("#semua-file > h3").slideUp(150,function(){$("#semua-file").html("");if(misc.getActBtn($(".fp-sub-section"))===2){if(!linkCS.length){if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}}else{if(!dropship){$nns.prop("disabled",0);}else{$nnd.prop("disabled",0);}}}
$selesai.prop("disabled",1);misc.resetSelesai();linkGS=[];filePesananArr=[];});}});});}
if($(".file-unit")){$(".file-unit-holder").slideDown(150,function(){if(misc.getActBtn($(".fp-sub-section"))===2){if(semuaKumplit()===1&&checkInvalidFile()){if(!dropship){$nns.prop("disabled",0);}else{$nnd.prop("disabled",0);}}else if(!checkInvalidFile()){if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}}}
updateElm();});}}
function updateDropshipArr(){Object.keys(bufferBDP).forEach(function(v){totalBeratDropshipArr[v]=0;bufferBDP[v].forEach(function(x){if(x>0){totalBeratDropshipArr[v]+=x;}});totalBeratDropshipArr[v]=misc.roundUp(totalBeratDropshipArr[v]);hargaOngkirDropshipArr[v]=0;if(hargaOngkirArr[v]){hargaOngkirDropshipArr[v]=totalBeratDropshipArr[v]*hargaOngkirArr[v];}});}
function updateDropshipArrIndex(){Object.keys(bufferBDP).forEach(function(v){bufferBDP[v]=[];});$(".pesanan-wrap").each(function(i,v){var iParent=$(".dynamic-dropship").index($(v).closest(".dynamic-dropship"));if(!bufferBDP[iParent]){bufferBDP[iParent]=[];}
bufferBDP[iParent][i]=totalBeratArr[i];});updateDropshipArr();}
function hapusArrayElm(i){jbu.splice(i,1);jhw.splice(i,1);jhn.splice(i,1);jpn.splice(i,1);jks.splice(i,1);uks.splice(i,1);jcr.splice(i,1);wb.splice(i,1);tipeOrder.splice(i,1);totalBeratArr.splice(i,1);totalHargaArr.splice(i,1);if(dropship){if(bufferBDP[indexParent]!==undefined){bufferBDP[indexParent].splice(i,1);updateDropshipArrIndex();}else{return;}}}
function jsonConstructor(){function safeString(a){var result;if(a===""||(/^\s+$/.test(a))||a===undefined){result="TIDAK ADA";}else{result=a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/[\t\r]+/,"").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/&/g,"&amp;").replace(/Â·/g,"&#183;");}
return result;}
var kurir;var hargaT;var a;var json={};var uploadObjArr=[];var totalHargaArrE=[];var totalBeratArrE=[];var jcrE=[];var jksE=[];var uksE=[];var sJ=[];var nama_file=[];var size_file=[];function trimWS(a){if(a){a=a.toString().replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/[\n\r\t]+/g," ");}
return a;}
if(!dropship){if(/bbrp/.test($jku.val())){kurir=$("#terpilihStandard").text();}else{kurir=$("#jasaKurir option:selected").text();}
if(arrayKurir[Number($jku.val())]){kurir=arrayKurir[Number($jku.val())];}}else{kurir="DROPSHIP";}
$(".pesanan-wrap").each(function(i){if(i>totalHarga.length-1){$(".pesanan-wrap").eq(i).remove();}});$.each(jcr,function(i){if(jcr[i]===undefined){hapusArrayElm(i);}});function cekTipe(a){function convertV(v){if(Number(v)===0){v="REGULAR BW";}else if(Number(v)===1){v="PREMIUM BW";}else if(Number(v)===2){v="WARNA";}
return v;}
a.forEach(function(v,i){var $t=$(".tipe-tinta").eq(i);if(v!==convertV($t.val())){a[i]=convertV($t.val());}});return a;}
tipeOrder=cekTipe(tipeOrder);if(totalHargaArr){totalHargaArr.forEach(function(v,i){if(jcr[i]&&uks[i]&&jks[i]&&tipeOrder[i]){jksE.push(jks[i][1]);totalHargaArrE.push("Rp "+misc.tk(v));totalBeratArrE.push(misc.comma(totalBeratArr[i])+" kg");jcrE.push(jcr[i][1]);uksE.push(uks[i][2]);sJ.push("N/A");}});}
if(filePesananArr){filePesananArr.forEach(function(v,i){uploadObjArr.push({data:btoa(v.base64),metadata:{name:editNameLink(v.name),type:v.type||"application/octet-stream"},size:v.size,link:linkGS[i]});nama_file.push(v.name);size_file.push(misc.trimS(v.size));});json.link={namaFile:nama_file,sizeFile:size_file,url:linkGS};}else{json.link={namaFile:[],sizeFile:[],url:[]};}
function removeSpace(a){var b=a.slice();b.forEach(function(v,i){if(v!==undefined){b[i]=v.replace(/\n/g,"");}});return b;}
if(linkCS){json.linkE=removeSpace(misc.r_d(linkCS));}else{json.linkE=[];}
function alamatPemesanC(){var result;if(!dropship){if(/bbrp/.test($jku.val())){result=alamatPemesan.value+" | "+$kcb.val()+", "+$kob.val()+" | "+$pvb.val();}else if(Number($jku.val())!==3){if(Number($jku.val())>3&&Number($jku.val())<7){result=$kcb.val();}else{result=alamatPemesan.value+" | "+$kcb.val()+" | "+$pvb.val();}}else{result=alamatPemesan.value+" | "+$kcb.val();}}else{result=$("#alamat-pemesan-dropship").val();}
return result;}
function namaPemesanC(){var result;if(!dropship){result=trimWS(namaPemesan.value);}else{result=trimWS($("#nama-pemesan-dropship").val());}
return result;}
function teleponPemesanC(){var result;if(!dropship){result=trimWS(teleponPemesan.value);}else{result=trimWS($("#telepon-pemesan-dropship").val());}
return result;}
function emailPemesanC(){var result;if(!dropship){result=trimWS(emailPemesan.value);}else{result=trimWS($("#email-pemesan-dropship").val());}
return result;}
function resi(){var result;if(!dropship){result="N/A";}else{result="DROPSHIP";}
return result;}
function arrPesananC(){var result={d_nama_penerima:[],d_telepon_penerima:[],d_alamat_penerima:[],d_nama_pengirim:[],d_telepon_pengirim:[],d_judul_buku:[],d_harga_ongkir:[],d_berat:[],d_resi:[],d_kurir:[]};function getJudulBuku(a,t){var $j=$(t).find(".judul-buku");var $jba=$(".judul-buku");var res=[];$j.each(function(i,v){var y=0;var tev;while(y<a.length){if(y===$jba.index(v)){tev=y;break;}
y+=1;}
res[i]="<p>"+trimWS(a[tev])+"</p>";});res=res.join("");return res;}
if(dropship){if($(".nama-penerima-dropship")&&$(".telepon-penerima-dropship")&&$(".provinsi-penerima-dropship")&&$(".ko-penerima-dropship")&&$(".kk-penerima-dropship")&&$(".nama-pengirim-dropship")&&$(".telepon-pengirim-dropship")){$(".dynamic-dropship").each(function(i){var th=$(".dynamic-dropship").eq(i)[0];result.d_nama_penerima[i]=trimWS($(".nama-penerima-dropship").eq(i).val());result.d_telepon_penerima[i]=trimWS($(".telepon-penerima-dropship").eq(i).val());result.d_alamat_penerima[i]=trimWS($(".alamat-penerima-dropship").eq(i).val())+" | "+$(".kk-penerima-dropship").eq(i).val()+" | "+$(".ko-penerima-dropship").eq(i).val()+" | "+$(".provinsi-penerima-dropship").eq(i).val();result.d_nama_pengirim.push(trimWS($(".nama-pengirim-dropship").val()));result.d_telepon_pengirim.push(trimWS($(".telepon-pengirim-dropship").val()));result.d_berat[i]=totalBeratDropshipArr[i]+" kg";result.d_harga_ongkir[i]="Rp "+misc.tk(hargaOngkirDropshipArr[i]);result.d_judul_buku[i]=getJudulBuku(jbu,th);result.d_kurir[i]=$(".terpilihDropship").eq(i).text();});}else{misc.miscError();return;}}
return result;}
function idPesanan(){var result;if(!dropship){result=$("#id-pesanan").val();}else{result=$("#id-pesanan-dropship").val();}
return result;}
function waktuS(){var result="N/A";if(!dropship){if(waktuSampai){result=waktuSampai.toString();}}else{if(waktuSampai){result=waktuSampai.toString();if($(".terpilihDropship").length){if($(".terpilihDropship").eq(0).text()){result="Tergantung pihak kurir";}}}}
return result;}
function getJasaExpress(){return 0;}
a=arrPesananC();var la="A";if($("#jasaKurir option:selected").attr("data-num-o")){la=$("#jasaKurir option:selected").attr("data-num-o").toString();}
var kettamwarna="";jbu.forEach(function(v,i){var ikw=i+1;var jdlTrim;var hlmTrim;jdlTrim=$(".judul-buku").eq(i).val()?$(".judul-buku").eq(i).val().trim():"";hlmTrim=$(".halaman-warna").eq(i).val()?$(".halaman-warna").eq(i).val().trim():"";if(/<br/i.test(v)){kettamwarna+="\n"+ikw+". "+jdlTrim+"\nHalaman CETAK WARNA: "+hlmTrim+"\n";}});if(kettamwarna){kettamwarna="\n\n- - - - - - - - - - - -\nKOMBINASI BW-WARNA:"+kettamwarna;}
json.pemesan={id:idPesanan(),ip:$("[data-ip]")[0].dataset.ip,nama:namaPemesanC(),lokasi:"A | ONLINE",telepon:teleponPemesanC(),email:emailPemesanC(),alamat:alamatPemesanC(),status:"0. MENUNGGU TRANSFER",kurir:kurir,resi:resi(),keteranganTambahan:safeString($("#keteranganTambahan").val())+kettamwarna,d_nama_penerima:a.d_nama_penerima,d_telepon_penerima:a.d_telepon_penerima,d_alamat_penerima:a.d_alamat_penerima,d_nama_pengirim:a.d_nama_pengirim,d_telepon_pengirim:a.d_telepon_pengirim,d_judul_buku:a.d_judul_buku,d_harga_ongkir:a.d_harga_ongkir,d_berat:a.d_berat,d_resi:a.d_resi,d_kurir:a.d_kurir,jasa_express:getJasaExpress()};json.pesanan={judulBuku:jbu,jumlahHalaman:jhn,jumlahCopy:jpn,jenisKertas:jksE,jenisCover:jcrE,ukuranKertas:uksE,wb:wb,wbt:($("#book-wrap").val()||"Rp 0,-"),jhb:jhb,jhbt:($("#book-sewing").val()||"Rp 0,-"),sJ:sJ,tipe:tipeOrder};if($("#hargaSetelahDiskon").html()){hargaT=$("#hargaSetelahDiskon").html();}else{hargaT=totalHarga.value;}
json.perhitungan={pesananTotal:totalPesanan.value,hargaUnitPesanan:totalHargaArrE,waktuSampai:waktuS(),beratUnitPesanan:totalBeratArrE,hargaCetak:$("#harga-cetak").val(),ongkir:$("#harga-ongkir").val(),pnh:$("#packing-handling").val(),hargaTotal:totalHarga.value,hargaDiskon:hargaT,diskonPersen:$("#diskonPersen").html()||"0%",diskonLimit:(/nan/i.test(misc.tk($("#diskonHarga").attr("data-diskon-limit")))?"":("Rp "+misc.tk($("#diskonHarga").attr("data-diskon-limit")))),diskonSelisih:"Rp "+misc.tk(selisihDiskon),beratTotal:totalBerat.value,dropfee:(dropfee||0),komisi:0,lokasi_ambil:la};away_time=new Date();delta_time=misc.formatClock(Math.floor((away_time-land_time)/1000));function rmvP(a){if(a!==undefined){a=a.toString();a=a.replace(/\ \(.*/g,"");a=a.split(" ");if(a[0]&&a[3]&&a[5]){a[0]=a[0]+",";a[3]=a[3]+",";a[5]="("+a[5]+")";}
a=a.join(" ");}else{a="NONE";}
return a;}
json.uix={land_time:rmvP(land_time),away_time:rmvP(away_time),delta_time:delta_time,device:device,reset_form:reset_form+" kali",site_ref:(site_ref||"NONE"),screen_res:screen_res,saved_cookie:(saved_cookie||"NONE")};return[json,uploadObjArr];}
function updateTotal(){var plusOngkir;var diskon;var deliveryTime;var output_berat_total=0;var output_harga_total=0;var hargaWrap=0;var hargaSew=0;var jumlahCopyBuku=0;$dpp=$(".dropship_perhitungan").eq(indexParent);$bud=$dpp.find(".berat-unit-dropship").eq(0);$odd=$dpp.find(".ongkir-dropship").eq(0);function doThisCalc(){totalBeratArr.forEach(function(v,i){var hargaWrapBook;var hargaSewBook;if($(".book-wrapping").eq(i).val()&&$(".jumlah-pesanan").eq(i).val()){hargaWrapBook=Number($(".book-wrapping").eq(i).val())*Number($(".jumlah-pesanan").eq(i).val());}else{hargaWrapBook=0;}
if($(".book-sewing").eq(i).val()&&$(".jumlah-pesanan").eq(i).val()){hargaSewBook=Number($(".book-sewing").eq(i).val())*Number($(".jumlah-pesanan").eq(i).val());}else{hargaSewBook=0;}
output_berat_total+=v;output_harga_total+=totalHargaArr[i];hargaWrap+=hargaWrapBook;hargaSew+=hargaSewBook;wb[i]=hargaWrapBook;jhb[i]=hargaSewBook;});output_berat_total=misc.roundUp(output_berat_total);}
function doDropshipCalc(){totalHargaArr.forEach(function(v,i){var hargaWrapBook;var hargaSewBook;if($(".book-wrapping").eq(i).val()&&$(".jumlah-pesanan").eq(i).val()){hargaWrapBook=Number($(".book-wrapping").eq(i).val())*Number($(".jumlah-pesanan").eq(i).val());}else{hargaWrapBook=0;}
if($(".book-sewing").eq(i).val()&&$(".jumlah-pesanan").eq(i).val()){hargaSewBook=Number($(".book-sewing").eq(i).val())*Number($(".jumlah-pesanan").eq(i).val());}else{hargaSewBook=0;}
output_harga_total+=v;hargaWrap+=hargaWrapBook;hargaSew+=hargaSewBook;wb[i]=hargaWrapBook;jhb[i]=hargaSewBook;});totalBeratDropshipArr.forEach(function(v){output_berat_total+=v;});}
if(!dropship){doThisCalc();}else{$(".listLokasi").fadeIn(0);updateDropshipArrIndex(doDropshipCalc(updateOngkirDll()));}
pnhHarga=0;hargaCetak=output_harga_total;if(hargaCetak===0||(/nan/i.test(hargaCetak))){$("#harga-cetak").val("").removeAttr("style");$(totalHarga).attr("data-original-title","BIAYA TOTAL");if(misc.getActBtn($(".fp-sub-section"))===1){if(!dropship){$nns.prop("disabled",1);}}}else{$("#harga-cetak").val("Rp "+misc.tk(hargaCetak)).css("background-color","beige");if(misc.getActBtn($(".fp-sub-section"))===1){if(!dropship){$nns.prop("disabled",0);}else{if(!(/^(\s)?$/.test($(".kk-penerima-dropship").last().val()))&&!(/^(\s)?$/.test($(".alamat-penerima-dropship").last().val()))&&!(/^(\s)?$/.test($(".provinsi-penerima-dropship").last().val()))&&!(/^(\s)?$/.test($(".ko-penerima-dropship").last().val()))&&!(/^(\s)?$|null/i.test($(".ChosenKurirDropship").last().val()))){$nnd.prop("disabled",0);}else{$nnd.prop("disabled",1);}}}}
if(!dropship){if(waktuSampai){if(/tergantung/i.test(waktuSampai)){deliveryTime=waktuSampai;}else{if(/\d/.test(waktuSampai)){deliveryTime="Estimasi pengiriman: "+waktuSampai+" hari (setelah order selesai)";}}}
if($jku){if(!(/^\d?0$/.test($jku.val()))||(/bbrp/.test($jku.val()))){pnhHarga=refPnH;if(hargaOngkir!==undefined){if(hargaOngkir>0||(hargaOngkir[0]>0&&hargaOngkir[1]>0)){if(Number($jku.val())===1||Number($jku.val())===11||Number($jku.val())===12||(/bbrp/.test($jku.val()))){plusOngkir=Number(hargaOngkir)*misc.roundUp(Number(output_berat_total));}else if(Number($jku.val())===2){plusOngkir=Number(hargaOngkir);deliveryTime="Estimasi sampai di hari yang sama / keesokan hari (setelah order selesai)";}else if(Number($jku.val())===3){plusOngkir=Number(hargaOngkir[0]);if(misc.roundUp(Number(output_berat_total))>5){plusOngkir+=Number(hargaOngkir[1])*(misc.roundUp(Number(output_berat_total))-5);}
deliveryTime="Waktu sampai tergantung pihak LEGA PAKET";}else if(Number($jku.val())>3&&Number($jku.val())<7){plusOngkir=Number(hargaOngkir[0]);if(misc.roundUp(Number(output_berat_total))>1){plusOngkir+=Number(hargaOngkir[1])*(misc.roundUp(Number(output_berat_total))-1);}
deliveryTime="Estimasi sampai di hari yang sama / keesokan hari (setelah order selesai)";}}else{plusOngkir=0;hargaOngkir=0;deliveryTime="Biaya kurir";}}else{plusOngkir=0;hargaOngkir=0;deliveryTime="Biaya kurir";}}else{plusOngkir=0;hargaOngkir=0;deliveryTime="Biaya kurir";}
if(plusOngkir===0||plusOngkir===undefined){$("#harga-ongkir").val("Rp 0,-");$("#harga-ongkir, #packing-handling").removeAttr("style");$("#harga-ongkir").attr("data-original-title","Biaya kurir");$(totalHarga).attr("data-original-title","BIAYA TOTAL");}else{if(!(/(^$|rp\ 0,-)/i.test($("#harga-cetak").val()))){$("#harga-ongkir").val("Rp "+misc.tk(plusOngkir)).css("background-color","rgb(200,255,200)");$("#harga-ongkir").attr("data-original-title",deliveryTime);$("#packing-handling").css("background-color","rgb(200,255,200)");}}}}else{$(".pnh-dropship").each(function(i){var pnh=0;var $t=$(".pnh-dropship").eq(i);if(totalBeratDropshipArr[i]){pnh=refPnH;}
pnhHarga+=pnh;if(pnh>0){$t.val("Rp "+misc.tk(pnh)).css("background-color","rgb(200,255,200)");}else{$t.val("Rp "+misc.tk(pnh)).removeAttr("style");}});deliveryTime="Biaya Kurir<hr style='margin:5px 0'>";plusOngkir=0;if(hargaOngkirDropshipArr[indexParent]){hargaOngkirDropshipArr.forEach(function(v){plusOngkir+=v;deliveryTime+="<p>Rp "+misc.tk(v)+"</p>";});}else{plusOngkir=0;}
if(plusOngkir===0||(/nan/i.test(plusOngkir))){$("#harga-ongkir").add($odd).val("Rp 0,-");$("#harga-ongkir, #packing-handling").add($odd).removeAttr("style");$("#harga-ongkir").attr("data-original-title","Biaya kurir");$(totalHarga).attr("data-original-title","BIAYA TOTAL");}else{if(!(/(^$|rp\ 0,-)/i.test($(".harga-pesanan").last().val()))){$("#harga-ongkir").val("Rp "+misc.tk(plusOngkir)).css("background-color","rgb(200,255,200)").attr("data-original-title",deliveryTime);$("#packing-handling").css("background-color","rgb(200,255,200)");$odd.val("Rp "+misc.tk(hargaOngkirDropshipArr[indexParent])).css("background-color","rgb(200,255,200)");}}}
if(!(/nan/i.test(plusOngkir))){output_harga_total=hargaCetak+plusOngkir+pnhHarga;}else{output_harga_total=0;}
if(hargaCetak>=diskonLimit){selisihDiskon=hargaCetak-Math.floor(hargaCetak*((100-diskonHarga)/100));}else{selisihDiskon=0;}
diskon=output_harga_total-selisihDiskon+hargaWrap+hargaSew;diskon="Rp "+misc.tk(diskon);output_harga_total=output_harga_total+hargaWrap+hargaSew;if(!!hargaCetak){if(hargaWrap>0&&hargaSew===0){$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display")+"<hr style='margin:10px 0'>[ <span style='color:darkblue'>Rp "+misc.tk(output_harga_total)+"</span> ] <strong>â</strong> "+"[ <span style='color:darkgreen'>Rp "+misc.tk(selisihDiskon)+"</span> ]<div style='margin-top:10px'>Total (+Book Wrap) menjadi:<div style='font-size:24px;margin-top:10px;border-radius:4px;background:greenyellow;border:2px solid darkgreen;padding:6px 12px;' id='hargaSetelahDiskon'>"+diskon+"</div></div>").promise().done(function(){misc.initTooltip();});}else if(hargaWrap===0&&hargaSew>0){$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display")+"<hr style='margin:10px 0'>[ <span style='color:darkblue'>Rp "+misc.tk(output_harga_total)+"</span> ] <strong>â</strong> "+"[ <span style='color:darkgreen'>Rp "+misc.tk(selisihDiskon)+"</span> ]<div style='margin-top:10px'>Total (+Jahit benang) menjadi:<div style='font-size:24px;margin-top:10px;border-radius:4px;background:greenyellow;border:2px solid darkgreen;padding:6px 12px;' id='hargaSetelahDiskon'>"+diskon+"</div></div>").promise().done(function(){misc.initTooltip();});}else if(hargaWrap>0&&hargaSew>0){$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display")+"<hr style='margin:10px 0'>[ <span style='color:darkblue'>Rp "+misc.tk(output_harga_total)+"</span> ] <strong>â</strong> "+"[ <span style='color:darkgreen'>Rp "+misc.tk(selisihDiskon)+"</span> ]<div style='margin-top:10px'>Total (+Book Wrap +Jahit benang) menjadi:<div style='font-size:24px;margin-top:10px;border-radius:4px;background:greenyellow;border:2px solid darkgreen;padding:6px 12px;' id='hargaSetelahDiskon'>"+diskon+"</div></div>").promise().done(function(){misc.initTooltip();});}else{$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display")+"<hr style='margin:10px 0'>[ <span style='color:darkblue'>Rp "+misc.tk(output_harga_total)+"</span> ] <strong>â</strong> "+"[ <span style='color:darkgreen'>Rp "+misc.tk(selisihDiskon)+"</span> ]<div style='margin-top:10px'>Total menjadi:<div style='font-size:24px;margin-top:10px;border-radius:4px;background:greenyellow;border:2px solid darkgreen;padding:6px 12px;' id='hargaSetelahDiskon'>"+diskon+"</div></div>").promise().done(function(){misc.initTooltip();});}}else{$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display")).promise().done(function(){misc.initTooltip();});}
totalBerat.value=misc.comma(output_berat_total)+" kg";totalHarga.value="Rp "+misc.tk(output_harga_total);totalPesanan.value=totalBeratArr.length;$(".jumlah-pesanan").each(function(i){var $t=$(".jumlah-pesanan").eq(i);jumlahCopyBuku+=Number($t.val());});wb.forEach(function(v,i){wb[i]="Rp "+misc.tk(v);});jhb.forEach(function(v,i){jhb[i]="Rp "+misc.tk(v);});if(output_harga_total===0||(/nan/i.test(output_berat_total))||(/nan/i.test(misc.tk(hargaCetak)))){totalBerat.value="";totalHarga.value="";totalPesanan.value="";$("#packing-handling")[0].value="";$(".berat-pesanan, .harga-pesanan").add($(totalBerat)).add($(totalHarga)).add($(totalPesanan)).removeAttr("style");$("#harga-cetak, #harga-ongkir, #packing-handling, #book-wrap, #book-sewing, #total-copy").add($odd).add($bud).val("").removeAttr("style");$("#harga-ongkir").attr("data-original-title","Biaya kurir");resetSemua.disabled=1;$(totalHarga).attr("data-original-title","BIAYA TOTAL");if(dropship){$(".berat-unit-dropship").eq(indexParent).val("").removeAttr("style");$(".ongkir-dropship").eq(indexParent).val("").removeAttr("style");$(".jumlah-buku-dropship").eq(indexParent).val("").removeAttr("style");updateDropshipArrIndex();}}else{$(totalBerat).add($(totalHarga)).add($(totalPesanan)).add($("#total-copy")).css({"background-color":"lightskyblue","color":"#000"});$("#book-wrap").val("Rp "+misc.tk(hargaWrap));$("#book-sewing").val("Rp "+misc.tk(hargaSew));$("#total-copy").val(jumlahCopyBuku);resetSemua.disabled=0;$(totalHarga).attr("data-original-title","<div class='text-right'><p>Rp "+misc.tk(hargaCetak)+"</p><p>Rp "+misc.tk(hargaWrap)+"</p><p>Rp "+misc.tk(hargaSew)+"</p><p>Rp "+misc.tk(plusOngkir)+"</p><p>Rp "+misc.tk(pnhHarga)+"</p></div>");$("#packing-handling").val("Rp "+misc.tk(pnhHarga));if(dropship){totalBerat.value=misc.comma(output_berat_total)+" kg";if(totalBeratDropshipArr[indexParent]){$bud.val(totalBeratDropshipArr[indexParent]+" kg").css("background-color","rgb(200,255,200)");output_berat_total=0;totalBeratDropshipArr.forEach(function(v){output_berat_total+=v;});output_berat_total=misc.comma(output_berat_total)+" kg";totalBerat.value=output_berat_total;}
$(".jumlah-buku-dropship").eq(indexParent).val($(".dynamic-dropship").eq(indexParent).find(".pesanan-wrap").length).css("background-color","rgb(200,255,200)");}}
if(!dropship){$(".tambah").each(function(i){$(".tambah").eq(i).prop("disabled",1);});if(!$(".harga-pesanan").last().val()||$(".harga-pesanan").last().val()==="Rp 0,-"){if(misc.getActBtn($(".fp-sub-section"))===1){$nns.prop("disabled",1);}}else{$(".tambah").last().prop("disabled",0);}}else{dropshipPesananHapusTambah();}}
function hitung(a,i){var output_harga;var output_berat;var cds;var cv;var output_berat_ds;var output_ongkir_ds;var bookWrapUnit=0;var bookSewUnit=0;var $uki=$(".ukuran-kertas").eq(i);var $ukc=$uki.children();var $tti=$(".tipe-tinta").eq(i);var $jhi=$(".jumlah-halaman").eq(i);var $jkc=$(".jenis-kertas").eq(i).children();var $bw=$(".book-wrapping");var $bs=$(".book-sewing");var $bwi=$bw.eq(i);var $bsi=$bs.eq(i);var $bwr=$("#book-wrap");var $bse=$("#book-sewing");var $bpi=$(".berat-pesanan").eq(i);var $bwpi=$(".book-wrapping-price").eq(i);var $bspi=$(".book-sewing-price").eq(i);var $budi;var $odi;var $hpi=$(".harga-pesanan").eq(i);var $jbdi;var $dh=$("#diskonHarga");var $hw=$(".halaman-warna");var $hwi=$hw.eq(i);var ukwp=0;if(jabedi){if($(".book-sewing").eq(i).children("option").length>1){$(".book-sewing").eq(i).children("option").last().remove();}
$(".book-sewing").eq(i).prop("disabled",1).attr("name","jabedi").val(0);}
jhw[i]=0;function hw(a){var h;if(a!==undefined){h=a.replace(/\ /g,"").replace(/^,|,$/g,"");}
if(a===undefined){misc.miscError();return;}
var ranges=[];var nums=[];var rangesT=0;var m=0;var nu;var size;var error_flag=0;var iv=0;var whichNum=[];var whichIx;var hs=[];var r=[0,a,hs];if(!(/[a-z]_\+\*\(\)~`!@#\$%^&\*\[\]:;"'\.<>\/\\\?\|\{\}/i.test(h))){if(/-/.test(h)){if(!(/(^(\ +)?-)|((\ +)?-$)|(\ ?-\ ?,)|(,\ ?-\ ?)/.test(h))){if(/\d+-\d+/.test(h)){ranges=h.match(/\d+-\d+/g);}
if(ranges.length&&(/,/.test(h))&&h!==""&&h!==undefined){hs=h.split(/,/);}
while(m<ranges.length){nu=ranges[m].split(/-/);nu[0]=Number(nu[0]);nu[1]=Number(nu[1]);if((nu[1]%2===0&&nu[0]%2>0)&&(nu[1]>nu[0])){if($hwi.hasClass("error-box")){$hwi.removeClass("error-box");}
iv=nu[0];size=nu[1]-nu[0]+1;rangesT+=size;while(iv<=nu[1]){whichNum.push(iv.toString());iv+=1;}
whichIx=hs.indexOf(ranges[m]);Array.prototype.splice.apply(hs,[whichIx,1].concat(whichNum));whichNum=[];}else{error_flag=1;break;}
m+=1;}}else{error_flag=1;}}
if(!error_flag){if(h!==undefined){if(rangesT>0&&rangesT%2===0){if(h.replace(/\d+-\d+/g,"").replace(/,{2,}/g,",").replace(/^,|,$/g,"")!==""){nums=h.replace(/\d+-\d+/g,"").replace(/,{2,}/g,",").replace(/^,|,$/g,"").split(/,/g);rangesT+=nums.length;}
h=h.split(/,/g).join(", ");r=[rangesT,h,hs];}else if(rangesT===0&&(/,/.test(h))){h=h.split(/,/g);r=[h.length,h.join(", "),hs];}}else{misc.miscError();return;}}}
return r;}
function testHWI(a){var hwa=hw(a);var r;if(hwa[1]!==undefined){r=hwa[1].replace(/\ /g,"").replace(/\d+-\d+/g,"").replace(/^,|,$/g,"");}else{misc.miscError();return;}
var m;var result=1;var ii;var nunu;var mumu;if(hwa[2].length&&result===1){m=0;while(m<hwa[2].length){mumu=Number(hwa[2][m]);nunu=Number(hwa[2][m+1]);if(mumu>=nunu){result=0;break;}
m+=1;}}
if(r!==""&&result===1){if(/,/.test(r)){m=0;r=r.split(/,/g);while(m<r.length){if(/\d+/.test(r[m])&&!(/-/.test(r[m]))){ii=m+1;if(ii%2!==0){if(Number(r[m])%2===0||Number(r[m+1])!==(Number(r[m])+1)){result=0;break;}}
if(ii%2===0){if(Number(r[m])%2!==0||Number(r[m-1])!==(Number(r[m])-1)){result=0;break;}}}
m+=1;}}}
return result;}
function checkHWI(){var hwa=hw($hwi.val());var $ukwpi;if($hwi.hasClass("error-box")){$hwi.removeClass("error-box");}
if(hwa!==undefined){if(!(/[\d\-]/.test(hwa[1]))&&hwa[0]===0){$hwi.removeClass("error-box").val("");if(jbu[i]&&(/<br/.test(jbu[i]))){jbu[i]=jbu[i].split("<br")[0];}
ukwp=0;}
if((hwa[0]===0&&(/[\d\-,]/.test(hwa[1])))||(hwa[0]%2>0)){if(jbu[i]&&(/<br/.test(jbu[i]))){jbu[i]=jbu[i].split("<br")[0];}
$hwi.addClass("error-box");$("#koWarnaWarning").modal("show");misc.delPadBody();ukwp=0;$("#koWarnaWarning").on("shown.bs.modal",function(){$selesai.prop("disabled",1);if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}});return;}
if(hwa[0]%2===0&&hwa[0]>0){if(testHWI($hwi.val())){if(/(a|b)6/i.test(uks[i])){jhw[i]=Math.ceil(hwa[0]/16)*16;}else{jhw[i]=Math.ceil(hwa[0]/8)*8;}
if(jbu[i]&&(/<br/.test(jbu[i]))){jbu[i]=jbu[i].split("<br")[0];}
jbu[i]=jbu[i]+separator+"<span style='font-weight:normal;font-size:12px;'>Warna: <mark style='background:khaki;font-weight:bold;display:inline;padding:0.2em 0.4em;border-radius:3px;color:#000'>"+hwa[1]+"</mark></span>";$hwi.removeClass("error-box").val(hwa[1]);ukwp=0;$ukwpi=$(".ukuran-kertas option:selected").eq(i);if($ukwpi.length){if($ukwpi.attr("data-w-p")){$ukwpi=$ukwpi.attr("data-w-p");if(/\|/.test($ukwpi)){ukwp=Number($ukwpi.split("|")[0]);}}}}
if(!testHWI($hwi.val())){if(jbu[i]&&(/<br/.test(jbu[i]))){jbu[i]=jbu[i].split("<br")[0];}
$hwi.addClass("error-box");$("#koWarnaWarning").modal("show");misc.delPadBody();ukwp=0;$("#koWarnaWarning").on("shown.bs.modal",function(){$selesai.prop("disabled",1);if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}});return;}}}}
if(dropship){indexParent=$(".dynamic-dropship").index($(a).closest(".dynamic-dropship"));}
function poc(a,i,cv){a[i]=cv;}
if(!a.dataset){if(a[0]){cds=a[0].getAttribute("data-value");cv=a[0].value;}else{return;}}else{cds=a.dataset.value;if(!(/jhw/i.test(cds))){cv=a.value;}else{cv=hw(a.value)[0];}}
if(cds==="jbu"){jbu[i]=cv;}else if(cds==="jhn"){poc(jhn,i,cv);}else if(cds==="jpn"){poc(jpn,i,cv);}else if(cds==="jks"){if(/\|/.test(cv)&&cv!==""&&cv!==undefined){poc(jks,i,cv.split("|"));}}else if(cds==="uks"){if(Number($tti.val())===0){$ukc.each(function(j){var $t=$ukc.eq(j);$t.val($t.attr("data-o-p"));if(j===1){$jkc.eq(j).text("HSSD");}else if(j>2){$jkc.eq(j).prop("disabled",0);}});}else if(Number($tti.val())===1){$ukc.each(function(j){var $t=$ukc.eq(j);$t.val($t.attr("data-v-p"));if(j===1){$jkc.eq(j).text("HSSD");}else if(j>2){$jkc.eq(j).prop("disabled",1);}});}else{$ukc.each(function(j){var $t=$ukc.eq(j);$t.val($t.attr("data-w-p"));if(j>2){$jkc.eq(j).prop("disabled",1);}});}
cv=$(a).val();if(/\|/.test(cv)&&cv!==""&&cv!==undefined){poc(uks,i,cv.split("|"));}}else if(cds==="jcr"){if(/\|/.test(cv)&&cv!==""&&cv!==undefined){poc(jcr,i,cv.split("|"));}}else if(cds==="jhw"){checkHWI();}
tipeOrder[i]="REGULAR BW";if(/tipe-tinta/i.test(a.className)){if(Number(a.value)===0){$(a).removeAttr("style");$ukc.each(function(j){var $t=$ukc.eq(j);$t.val($t.attr("data-o-p"));if(j===1){$jkc.eq(j).text("HSSD");}else if(j>2){$jkc.eq(j).prop("disabled",0);}});}else if(Number(a.value)===1){tipeOrder[i]="PREMIUM BW";$(a).css({"background-color":"gold",color:"#000"});$ukc.each(function(j){var $t=$ukc.eq(j);$t.val($t.attr("data-v-p"));if(j===1){$jkc.eq(j).text("HSSD");}else if(j>2){$jkc.eq(j).prop("disabled",1);}});}else if(Number(a.value)===2){tipeOrder[i]="WARNA";$(a).css({"background-color":"darkcyan",color:"yellow"});$ukc.each(function(j){var $t=$ukc.eq(j);$t.val($t.attr("data-w-p"));if(j>2){$jkc.eq(j).prop("disabled",1);}});}
cv=$(".ukuran-kertas").eq(i).val();if(/\|/.test(cv)&&cv!==""&&cv!==undefined){poc(uks,i,cv.split("|"));}}
wb[i]=Number($bwi.val())*Number(jpn[i]);jhb[i]=Number($bsi.val())*Number(jpn[i]);$bw.each(function(i,v){if(Number($(v).val())>0){bookWrapUnit+=Number(jpn[i]);}});$bs.each(function(i,v){if(Number($(v).val())>0){bookSewUnit+=Number(jpn[i]);}});if(bookWrapUnit>0){$bwr.attr("data-original-title","Book wrap: "+$bwr.attr("data-h-bw")+" &times; "+bookWrapUnit).css("background","khaki");}else{$bwr.attr("data-original-title","Biaya book wrap").removeAttr("style");}
if(bookSewUnit>0){$bse.attr("data-original-title","Jahit benang: "+$bse.attr("data-h-bs")+" &times; "+bookSewUnit).css("background","sandybrown");}else{$bse.attr("data-original-title","Biaya total jahit benang").removeAttr("style");}
if($hwi.val()!==""){checkHWI();}else{$hwi.removeClass("error-box");}
function tryThis(){if(Number($tti.val())===2){if(/(a|b)6/i.test(uks[i])){jhn[i]=Math.ceil(jhn[i]/16)*16;}else if(/a5/i.test(uks[i])){jhn[i]=Math.ceil(jhn[i]/8)*8;}else if(/b5/i.test(uks[i])){jhn[i]=Math.ceil(jhn[i]/4)*4;}
$jhi.val(jhn[i]);jhn[i]=jhn[i].toString();}else{if(Number($jhi.attr("data-o-v"))&&!(/(a|b)6/i.test(uks[i]))){jhn[i]=$jhi.attr("data-o-v").toString();$jhi.val(Number($jhi.attr("data-o-v")));}else if(/(a|b)6/i.test(uks[i])){jhn[i]=Math.ceil(jhn[i]/16)*16;$jhi.val(jhn[i]);jhn[i]=jhn[i].toString();}}
if(/ring/i.test($(".jenis-cover").eq(i).val())){if(Number(jhn[i])>300){$("#ringKawatWarning").modal({backdrop:"static",keyboard:0,show:1});$("#ringKawatWarning").on("hidden.bs.modal",function(){$(".jumlah-halaman").eq(i).focus();});$(".selesai, .tambah, .hapus").add($(".ukuran-kertas").eq(i)).prop("disabled",1);$(".jenis-kertas").eq(i).prop("disabled",1);if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);$("#tambah-tujuan, #hapus-tujuan").prop("disabled",1);}
$jhi.addClass("error-box");return;}
if(Number(jhn[i])<=300){$("#ringKawatWarning").on("hidden.bs.modal","");$(".ukuran-kertas").eq(i).prop("disabled",0);$(".jenis-kertas").eq(i).prop("disabled",0);if($jhi.hasClass("error-box")){$jhi.removeClass("error-box");}}}else{if(Number(jhn[i])>1200){$("#standardJilidWarning").modal({backdrop:"static",keyboard:0,show:1});$("#standardJilidWarning").on("hidden.bs.modal",function(){$(".jumlah-halaman").eq(i).focus();});$(".selesai, .tambah, .hapus").add($(".ukuran-kertas").eq(i)).prop("disabled",1);$(".jenis-kertas").eq(i).prop("disabled",1);if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);$("#tambah-tujuan, #hapus-tujuan").prop("disabled",1);}
$jhi.addClass("error-box");return;}
if(Number(jhn[i])<=1200){$("#standardJilidWarning").on("hidden.bs.modal","");$(".ukuran-kertas").eq(i).prop("disabled",0);$(".jenis-kertas").eq(i).prop("disabled",0);if($jhi.hasClass("error-box")){$jhi.removeClass("error-box");}}}
$bwpi.val("Rp "+misc.tk(wb[i])).css({"background-color":"azure"});$bspi.val("Rp "+misc.tk(jhb[i])).css({"background-color":"azure"});output_berat=Number(jpn[i])*(Number(jhn[i])/Number(uks[i][1]));totalBeratArr[i]=output_berat;output_berat=misc.comma(output_berat)+" kg";$bpi.val(output_berat);if(dropship){output_berat_ds=0;if(totalBeratDropshipArr[indexParent]){output_berat_ds=totalBeratDropshipArr[indexParent];}
$budi=$(".berat-unit-dropship").eq(i);$odi=$(".ongkir-dropship").eq(i);$budi.val(misc.comma(output_berat_ds)+" kg");output_ongkir_ds=output_berat_ds*hargaOngkirDropshipArr[indexParent];$odi.val("Rp "+misc.tk(output_ongkir_ds));}
output_harga=((((Number(jhn[i])-Number(jhw[i]))*Number(uks[i][0])*Number(jks[i][0]))+Number(jcr[i][0]))+(Number(jhw[i])*ukwp))*Number(jpn[i]);totalHargaArr[i]=output_harga;output_harga="Rp "+misc.tk(output_harga);wb[i]="Rp "+misc.tk(wb[i]);if(output_harga&&output_berat){$hpi.val(output_harga).css({color:"darkgreen"});$bpi.val(output_berat);$hpi.add($bpi).css({"background-color":"azure"});}
updateTotal();}
if(jbu[i]&&jhn[i]&&jpn[i]&&jks[i]&&uks[i]&&jcr[i]){tryThis();}else{$(".tambah").eq(i).add($(resetSemua)).add($selesai).prop("disabled",1);if(misc.getActBtn($(".fp-sub-section"))===1){if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}}
if(diskonHarga>0){$dh.html($dh.attr("data-diskon-display"));}
output_berat="";output_harga="";totalBerat.value="";totalHarga.value="";totalPesanan.value="";$bspi.add($bwpi).add($bse).val("");$("#packing-handling, #book-wrap, #harga-cetak, #harga-ongkir, .book-wrapping-price, .book-sewing-price, .berat-pesanan, .harga-pesanan, #total-copy, #book-sewing").add($(totalBerat)).add($(totalHarga)).add($(totalPesanan)).toArray().forEach(function(v){if(!(/rp|kg/i.test(v.value))){v.removeAttribute("style");}});$("#packing-handling, #book-wrap, #harga-cetak, #harga-ongkir, #total-copy").val("");$("#harga-ongkir").attr("data-original-title","Biaya kurir");$bpi.val(output_berat);$hpi.val(output_harga);$selesai.prop("disabled",1);misc.resetSelesai();if(dropship){$budi=$(".berat-unit-dropship").eq(i);$odi=$(".ongkir-dropship").eq(i);$jbdi=$(".jumlah-buku-dropship").eq(i);$budi.val("").removeAttr("style");$odi.val("").removeAttr("style");$jbdi.val("").removeAttr("style");}}}
function resetG(){g=0;gg=0;}
dropshipPesananHapusTambah=function(){$(".dynamic-dropship").each(function(i){var $t=$(".dynamic-dropship").eq(i);var $pw=$t.find(".pesanan-wrap");$pw.each(function(ix,vx){var $hpc=$(vx).find(".hapus");var $thc=$(vx).find(".tambah");if(ix===0||ix<$pw.length-1){$hpc.prop("disabled",1);}else{$hpc.prop("disabled",0);}
if(!$(vx).find(".harga-pesanan").val()||$(vx).find(".harga-pesanan").val()==="Rp 0,-"||checkUnitAddr()!==1){$tbj.add($thc).add($nnd).prop("disabled",1);}else{$tbj.add($hpt).prop("disabled",0);if($(".dynamic-dropship").length===1){$hpt.prop("disabled",1);}
if(ix<$pw.length-1){$(vx).css({"background-color":"cornsilk","border-top":"1px solid darkgreen","border-bottom":"2px solid darkgreen","transition":"border 0.15s, background-color 0.15s","-webkit-transition":"border 0.15s, background-color 0.15s"});$thc.add($hpc).prop("disabled",1);}else{$(vx).removeAttr("style");$(".dynamic-dropship").last().find(".tambah").last().prop("disabled",0);}}});});};function scrollDropship(a){var pos=$(".dynamic-dropship").last();if(pos.length){pos=pos.offset().top;}else{return;}
$hb.delay(300).queue(function(){$hb.animate({scrollTop:pos},300,a).dequeue();});}
function tambahHapusFX(){if($(".pesanan-wrap").length===1){$(".hapus").each(function(i){$(".hapus").eq(i).prop("disabled",1);});resetSemua.disabled=1;if(checkPesanan()){$(".tambah").each(function(i){$(".tambah").eq(i).prop("disabled",0);});$(resetSemua).prop("disabled",0);}}else{$(".hapus").each(function(i){$(".hapus").eq(i).prop("disabled",1);});if(!dropship){$(".hapus").last().prop("disabled",0);}else{$(".dynamic-dropship").last().find(".hapus").last().prop("disabled",0);}}
$(".pesanan-wrap").css({"background-color":"cornsilk","border-bottom":"2px solid darkgreen","transition":"border 0.15s, background-color 0.15s","-webkit-transition":"border 0.15s, background-color 0.15s"}).promise().done(function(){$(".pesanan-wrap").last().removeAttr("style");if(dropship){$(".hapus").each(function(i,v){$(v).eq(i).prop("disabled",1);$(".tambah").eq(i).prop("disabled",1);});$(".dynamic-dropship").last().find(".hapus").last().prop("disabled",0);}});}
function tambahHapusPesanan(){if($(".hapus").length>0){$(".hapus").on("click",function(e){var $t=$(e.currentTarget);var i=$(".hapus").index($t);var tcdd;if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
$t.prop("disabled",1);if(dropship){tcdd=$t.closest(".dynamic-dropship");if(tcdd){indexParent=$(".dynamic-dropship").index(tcdd);if(indexParent+1<$(".dynamic-dropship").length){$("#modalWarningD").modal({show:1,backdrop:"static"});return;}}}
function scrollHapus(){var pos=$(".pesanan-wrap").eq(i-1);if(pos.length){pos=pos.offset().top;}else{return;}
$hb.animate({scrollTop:pos},300);}
function common($elm){$elm.remove().promise().done(function(){hapusArrayElm(i);if(dropship){updateOngkirDll();}
var ix=Math.floor(Math.random()*$(".pesanan-wrap").length);update(hitung($(".jumlah-pesanan").eq(ix),ix));$(".berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").attr("readonly","readonly");$(".copy-specs").prop("disabled",1);if($(".copy-specs").length>1){$(".copy-specs").last().prop("disabled",0);}
scrollHapus();});}
if(i>0){$(".pesanan-wrap").eq(i).fadeOut(300,function(){common($(".pesanan-wrap").eq(i));});}else{misc.miscError();return;}});}
if($(".tambah").length>0){$(".tambah").on("click",function(e){var th=e.currentTarget;var $p;var idx=$(".tambah").index(th)+1;var idxx;var thdd=$(th).closest(".dynamic-dropship");var iPt=$(".dynamic-dropship").index(thdd);var $pwl;if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
indexParent=iPt;function addArrayElm(){if(g===1){jbu.splice(idx,0);jhw.splice(idx,0);jcr.splice(idx,0);jks.splice(idx,0);jpn.splice(idx,0);jhn.splice(idx,0);uks.splice(idx,0);totalHargaArr.splice(idx,0);totalBeratArr.splice(idx,0);if(bufferBDP[iPt]!==undefined){bufferBDP[iPt].splice(idx,0);}else{return;}}}
function common(){$(".berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").attr("readonly","readonly");if(dropship){$nnd.prop("disabled",1);addArrayElm(update());}else{$nns.prop("disabled",1);update();}
$(".copy-specs").prop("disabled",1);if($(".copy-specs").length>1){$(".copy-specs").last().prop("disabled",0);}
var poss=$pwl.offset().top;$hb.delay(300).queue(function(){misc.initTooltip();$hb.animate({scrollTop:poss},300).dequeue();});}
g+=1;$(th).add($selesai).prop("disabled",1);if(g===1){if(!dropship){$("#dynamic-row").append(template).promise().done(function(){idxx=$(".pesanan-wrap").length;$pwl=$(".pesanan-wrap").last();$pwl.find(".form-control").removeAttr("readonly");var stringNDP=$(".ndp").last().text();if(/\d/.test(stringNDP)){stringNDP=stringNDP.split(/\d/)[0]+idxx;$(".ndp").last().text(stringNDP);$pwl.fadeIn(300,common);}});}else{if(indexParent+1<$(".dynamic-dropship").length){$("#modalWarningD").modal({show:1,backdrop:"static"});return;}
$p=$(th).closest(".dynamic-dropship");$p.append(template).promise().done(function(e){var $t=$(e);var $tl;var $nl;var stringNDP;if(typeof e[0]==="object"){idxx=$t.find(".pesanan-wrap").length;$tl=$t.find(".pesanan-wrap").last();$nl=$t.find(".ndp").last();stringNDP=$nl.text();if(/\d/.test(stringNDP)){stringNDP=stringNDP.split(/\d/)[0]+idxx;if(idxx&&$tl&&$nl){$nl.text(stringNDP).promise();updateOngkirDll();$pwl=$tl;$tl.find(".form-control").removeAttr("readonly");$tl.fadeIn(300,common);}}}});}}});}
$(".copy-specs").on("click",function(e){var th=e.currentTarget;var ix=$(".copy-specs").index(th);var ix_1=ix-1;var ukix_1;var jkix_1;var jcix_1;var $ukix;var $jkix;var $jcix;var $ukix_1;var $jkix_1;var $jcix_1;if(ix>0){$ukix=$(".ukuran-kertas").eq(ix);$ukix_1=$(".ukuran-kertas").eq(ix_1);$jkix=$(".jenis-kertas").eq(ix);$jkix_1=$(".jenis-kertas").eq(ix_1);$jcix=$(".jenis-cover").eq(ix);$jcix_1=$(".jenis-cover").eq(ix_1);ukix_1=$(".ukuran-kertas").eq(ix_1).children(":selected").index();jkix_1=$(".jenis-kertas").eq(ix_1).children(":selected").index();jcix_1=$(".jenis-cover").eq(ix_1).children(":selected").index();pswitcher($jkix_1.val(),ix);$ukix.val($ukix_1.val());$jkix.val($jkix_1.val());$jcix.val($jcix_1.val());$ukix.children("option").eq(ukix_1).prop("selected",1);$jkix.children("option").eq(jkix_1).prop("selected",1);$jcix.children("option").eq(jcix_1).prop("selected",1);hitung($(".ukuran-kertas").eq(ix),ix);hitung($(".jenis-kertas").eq(ix),ix);hitung($(".jenis-cover").eq(ix),ix);}else{$(th).prop("disabled",1);$("#miscError").modal({show:1,backdrop:"static"});misc.delPadBody();return;}});}
function tambahHapusTujuan(){$tbj.on("click",function(e){var $jk;var $tp=$(e.currentTarget);var stringNDPD=$(".ndpd").last().text();if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
function doThis(){var $ddl=$(".dynamic-dropship").last();var $ddlpw=$ddl.find(".pesanan-wrap").last();var $ddlpwfc=$ddlpw.find(".form-control");var $ddlpwfcro=$ddlpw.find(".form-control-readonly");var $fc;var $thisS=$(".dynamic-dropship").last().find(".ndpd").add($(".dropship_perhitungan").last().find(".ndpd"));var $fcd=$(".form-control-dropship");var $jba=$(".judul-buku");var le=$jba.length-1;var $jb_l=$jba.last();var $jh_l=$(".jumlah-halaman").last();var $jp_l=$(".jumlah-pesanan").last();var $uk_l=$(".ukuran-kertas").last();var $jk_l=$(".jenis-kertas").last();var $jc_l=$(".jenis-cover").last();var $bw_l=$(".book-wrapping").last();var $bs_l=$(".book-sewing").last();var $tt_l=$(".tipe-tinta").last();var $hw_l=$(".halaman-warna").last();pswitcher($jk.val(),le);if(dcntr>1){$(".dynamic-dropship").eq(dcntr-2).css({"background-color":"beige"});$(".dropship_perhitungan_wrap").eq(dcntr-2).css({"background-color":"beige","border-bottom":"2px dashed brown","padding-bottom":"20px"});$hpt.prop("disabled",0);}else{$(".dynamic-dropship").removeAttr("style");$hpt.prop("disabled",1);}
$fcd.addClass("form-control").removeClass("form-control-dropship");$thisS.text(stringNDPD+dcntr);$ddlpwfc.attr("readonly","readonly");misc.btnBantuanLokasi();$ddl.add($ddlpw).fadeIn(300,function(){$ddlpwfcro.removeAttr("readonly");if($(".dynamic-dropship").length>1){autoCOMPLETE(dataJSON);misc.di_d();misc.en_d();$(".btnBantuanLokasi").prop("disabled",1);$(".btnBantuanLokasi").last().prop("disabled",0);$fc=$(".dynamic-dropship").last().find(".pesanan-wrap").eq(0).find(".form-control");$fc.each(function(i){var $t=$fc.eq(i);var $bfr=$(".dynamic-dropship").eq($(".dynamic-dropship").index($(".dynamic-dropship").last())-1).find(".pesanan-wrap").eq(0).find(".form-control");var cln=$t[0].className;if(!(/-penerima-dropship/i.test($bfr[i].className))){if($t[0].value!==$bfr[i].value){$t[0].value=$bfr[i].value;if(/judul-buku/i.test(cln)){hitung($jb_l[0],le);}
if(/halaman-warna/i.test(cln)){hitung($hw_l[0],le);}
if(/jumlah-halaman/i.test(cln)){hitung($jh_l[0],le);}
if(/jumlah-pesanan/i.test(cln)){hitung($jp_l[0],le);}
if(/ukuran-kertas/i.test(cln)){hitung($uk_l[0],le);}
if(/jenis-kertas/i.test(cln)){hitung($jk_l[0],le);}
if(/jenis-cover/i.test(cln)){hitung($jc_l[0],le);}
if(/book-wrapping/i.test(cln)){if(Number($t.val())!==0){$t.css("background-color","khaki");}
hitung($bw_l[0],le);}
if(/book-sewing/i.test(cln)){if(Number($t.val())!==0){$t.css("background-color","sandybrown");}
hitung($bs_l[0],le);}
if(/tipe-tinta/i.test(cln)){if(Number($t.val())===0){$t.removeAttr("style");}else if(Number($t.val())===1){$t.css({"background-color":"gold",color:"#000"});}else if(Number($t.val())===2){$t.css({"background-color":"darkcyan",color:"yellow"});}
hitung($tt_l[0],le);}}}}).promise().done(scrollDropship(update(updateTotal())));}else{misc.en_d();$(".dynamic-dropship").each(function(i){var $t=$(".dynamic-dropship").eq(i);var $j=$t.find(".jumlah-pesanan");var ix=$j.length-1;var ixx=$(".jumlah-pesanan").index($j);hitung($j.eq(ix),ixx);}).promise().done(scrollDropship(update(updateTotal())));}
$(".copy-specs").prop("disabled",1);if($(".copy-specs").length>1){$(".copy-specs").last().prop("disabled",0);}});}
function removeThose(){$(".dynamic-dropship").each(function(i){var $t=$(".dynamic-dropship").eq(i);if(i>dcntr){$t.remove();}}).promise().done(function(){if($(".dynamic-dropship").length-1===dcntr){doThis();}});}
if(/\d/.test(stringNDPD)){stringNDPD=stringNDPD.split(/\d/)[0];if(templateDT){gg+=1;if(gg===1){dcntr+=1;$tp.add($selesai).prop("disabled",1);$jk=$(".dynamic-dropship").last().find(".jenis-kertas").eq(0);$(templateDT).insertBefore($("#tambah_hapus_tujuan")).promise().done(function(){var al=$(".dynamic-dropship").length;if(dcntr===al){doThis();}else{removeThose();}});}}else{misc.miscError();return;}}});$hpt.on("click",function(e){var $tp=$(e.currentTarget);var $ddl;$tp.prop("disabled",1);if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
gg+=1;if(gg===1){$(".dropship_perhitungan_wrap").each(function(i,v){if(i===$(".dropship_perhitungan_wrap").length-1){$(v).remove();}else if(i===$(".dropship_perhitungan_wrap").length-2){$(v).css({"background-color":"transparent","border-bottom":"2px dashed transparent"});}});dcntr-=1;$ddl=$(".dynamic-dropship").last();$ddl.slideUp(300,function(){var ix=$(".pesanan-wrap").length-1;var ixx=$(".dynamic-dropship").index($ddl);var $ddlpw=$ddl.find(".pesanan-wrap");$ddlpw.each(function(i){var $t=$ddlpw.eq(i);var inx=$(".pesanan-wrap").index($t[0]);totalBeratArr.splice(inx,i);if(bufferBDP[indexParent]!==undefined){bufferBDP[indexParent].splice(inx,i);}else{return;}});hapusArrayElm(ix);if(desKur[ixx]){desKur.pop();}
if(daftarKab[ixx]){daftarKab.pop();}
if(daftarKec[ixx]){daftarKec.pop();}
if(hargaOngkirArr[ixx]){hargaOngkirArr.pop();}
if(totalBeratDropshipArr[ixx]){totalBeratDropshipArr.pop();}
if(hargaOngkirDropshipArr[ixx]){hargaOngkirDropshipArr.pop();}
$ddl.remove().promise().done(function(){if($(".dynamic-dropship").length===1){$tbj.prop("disabled",0);$hpt.prop("disabled",1);}else{$tbj.add($hpt).prop("disabled",0);}
$ddl=$(".dynamic-dropship").last();$(".btnBantuanLokasi").last().prop("disabled",0);$ddl.css({"background-color":"transparent"});$(".berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").attr("readonly","readonly");misc.en_d();$(".copy-specs").prop("disabled",1);if($(".copy-specs").length>1){$(".copy-specs").last().prop("disabled",0);}
btnKab($(".dynamic-dropship").length-1);btnKec($(".dynamic-dropship").length-1);btnKur($(".dynamic-dropship").length-1);scrollDropship(update(updateOngkirDll(hitung($(".judul-buku").eq(0),0))));gg=0;});});}});}
function inputListeners(){var $jb=$(".judul-buku");var $jh=$(".jumlah-halaman");var $tt=$(".tipe-tinta");var $jp=$(".jumlah-pesanan");var $jk=$(".jenis-kertas");var $uk=$(".ukuran-kertas");var $jc=$(".jenis-cover");var $bs=$(".book-sewing");var $bw=$(".book-wrapping");var $hw=$(".halaman-warna");function hw_f(e){var i=$hw.index(e.target);hitung(e.target,i);}
$hw.on("change",hw_f);function jb_f(e){var i=$jb.index(e.target);hitung(e.target,i);}
$jb.on("change",jb_f);function jh_f(e){var n=Number($(e.target).val());var i=$jh.index(e.target);$(e.target).val(n);if(Number($tt.val()!==2)){$(e.target).val(n).attr("data-o-v",n);}
hitung(e.target,i);}
$jh.on("change",jh_f);function jp_f(e){var n=Number($(e.target).val());var i=$jp.index(e.target);$(e.target).val(n);hitung(e.target,i);}
$jp.on("input",jp_f);function jk_f(e){var th=e.target;var i=$jk.index(th);pswitcher($(th).val(),i);hitung(e.target,i);hitung($uk[i],i);}
$jk.on("change",jk_f);function jc_f(e){var i=$jc.index(e.target);if(/ring/i.test($(e.target).val())){$bs.eq(i).val(0).removeAttr("style");$bs.eq(i).children("option").eq(1).prop("disabled",1);}else{$bs.eq(i).children("option").eq(1).prop("disabled",0);}
if(/hard/i.test($(e.target).val())){$("#HCWarning").modal("show");}
hitung(e.target,i);}
$jc.on("change",jc_f);function uk_f(e){var i=$uk.index(e.target);var vo=e.target.value;if(Number($tt.eq(i).val())!==2){if(/b6/i.test(e.target.value)){e.target.value=uk_prev_val;$("#B6Warning").modal({backdrop:"static",keyboard:0,show:1});$("#B6Warning").on("shown.bs.modal",function(){$("#jadiB6").on("click",function(){e.target.value=vo;$("#B6Warning").modal("hide").promise().done(function(){hitung(e.target,i);});});$("#cancelB6").on("click",function(){$("#B6Warning").modal("hide");return;});});}else{uk_prev_val=e.target.value;hitung(e.target,i);}}else{hitung(e.target,i);}}
$uk.on("change",uk_f);function bw_f(e){var i=$bw.index(e.target);var $t=$(e.target);if(Number($t.val())!==0){$t.css({"background-color":"khaki"}).promise().done(function(){hitung(e.target,i);});}else{$t.removeAttr("style").promise().done(function(){hitung(e.target,i);});}}
$bw.on("change",bw_f);function bs_f(e){var i=$(".book-sewing").index(e.target);var $t=$(e.target);var $bsi=$("#book-sewing");if(!jabedi){if(Number($t.val())!==0){$("#JaBeWarning").modal("show");misc.delPadBody();$t.add($bsi).css({"background-color":"sandybrown"}).promise().done(function(){hitung(e.target,i);});}else{$t.add($bsi).removeAttr("style").promise().done(function(){hitung(e.target,i);});}}
if(jabedi){if($(e.currentTarget).children("option").length>1){$(e.currentTarget).children("option").last().remove();}
$(e.currentTarget).prop("disabled",1).attr("name","jabedi").val(0);return;}}
if(!$("[name='jabedi']").length&&!jabedi){$bs.on("change",bs_f);}
if($("[name='jabedi']").length||jabedi){jabedi=1;$bs.on("change",function(e){if($(e.currentTarget).children("option").length>1){$(e.currentTarget).children("option").last().remove();}
$(e.currentTarget).prop("disabled",1).val(0);return;});}
function tt_f(e){var i=$tt.index(e.target);var n=Number($(e.target).val());if(n===2){$(e.target).val(tt_prev_val);$("#modalPWarna").modal({backdrop:"static",keyboard:0,show:1});$("#modalPWarna").on("shown.bs.modal",function(){$("#pWarna").on("click",function(){$("#modalPWarna").modal("hide").promise().done(function(){$(e.target).val(n);$(".halaman-warna").eq(i).prop("disabled",1).val("");hitung(e.target,i);});});});}else{tt_prev_val=n;$(".halaman-warna").eq(i).prop("disabled",0);hitung(e.target,i);}}
$tt.on("change",tt_f);function checkDropshipID(e){var et;var tc;var tv;function checkYo(){if($(".error-box").length===0&&!(/(^$|rp\ 0,-)/i.test($("#total-harga")[0].value))&&!(/(^$|rp\ 0,-)/i.test($("#harga-cetak")[0].value))&&!(/^(\s)?$|null/i.test($(".ChosenKurirDropship").last().val()))){$nnd.prop("disabled",0);}else{$nnd.prop("disabled",1);}}
if(typeof e==="object"){et=e.target;tc=et.className;tv=et.value;if(/alamat|nama/i.test(tc)){if(!(/^$/.test(tv))){$(et).removeClass("error-box").promise().done(checkYo);}else{$(et).addClass("error-box").promise().done(checkYo);}}else{if(misc.checkPhone(tv)){$(et).removeClass("error-box").promise().done(checkYo);}else{$(et).addClass("error-box").promise().done(checkYo);}}}}
if(!dropship){$("#nama-pemesan").on("input",misc.checkIDKurirStandard);$("#telepon-pemesan").on("input",misc.checkIDKurirStandard);$("#email-pemesan").on("input",misc.checkIDKurirStandard);$(".alamat-pemesan").on("input",misc.checkIDKurirStandard);}else{if(misc.getActBtn($(".fp-sub-section"))===0){misc.checkIDDropship();$("#nama-pemesan-dropship").on("input",misc.checkIDDropship);$("#telepon-pemesan-dropship").on("input",misc.checkIDDropship);$("#email-pemesan-dropship").on("input",misc.checkIDDropship);$("#alamat-pemesan-dropship").on("input",misc.checkIDDropship);}
$(".alamat-penerima-dropship, .telepon-penerima-dropship, .nama-penerima-dropship, .nama-pengirim-dropship, .telepon-pengirim-dropship, .provinsi-penerima-dropship, .ko-penerima-dropship, .kk-penerima-dropship").on("input",function(e){checkDropshipID(e);});$(".alamat-penerima-dropship").on("change",function(e){var i=$(".alamat-penerima-dropship").index(e.target);hitung(e.target,i);});}}
update=function(){resetG();inputListeners();tambahHapusPesanan();if(dropship===1){tambahHapusTujuan(dropshipPesananHapusTambah());}else{tambahHapusFX();}};function um(){separator="<br>- - - - - - -<br>";jbu=[];jhw=[];jhn=[];jpn=[];jks=[];uks=[];jcr=[];wb=[];jhb=[];daftarProvinsi=[];daftarKab=[];daftarKec=[];desKur=[];tipeOrder=[];totalBeratArr=[];totalHargaArr=[];filePesananArr=[];linkGS=[];linkCS=[];hargaOngkirArr=[];g=0;tt_prev_val=0;emailReminderFlag=0;uk_prev_val="_*_";hargaOngkir=0;hargaCetak=0;waktuSampai=undefined;djr=undefined;if(dropship){totalBeratDropshipArr=[];hargaOngkirDropshipArr=[];bufferBDP={};gg=0;indexParent=0;}}
function formNavController(){var limit=333;var lim=0;function triggerPemesan(){misc.initTooltip();if(!dropship){$nps.prop("disabled",1);$("#pesanan").fadeOut(lim,function(){$("#pemesan").fadeIn(limit,function(){if($("#nama-pemesan")[0]){$("#nama-pemesan")[0].focus();}});});}else{$npd.prop("disabled",1);misc.checkIDDropship();$("#pesanan").fadeOut(lim,function(){$("#pemesan-dropship").fadeIn(limit,function(){if($("#nama-pemesan-dropship")[0]){$("#nama-pemesan-dropship")[0].focus();}});});}
$selesai.prop("disabled",1);misc.resetSelesai();il=0;}
function triggerPesanan(){function checkStuff(){function checkList(){var r=1;var l=$(".kk-penerima-dropship").length;var i=0;while(i<l){if((/^(\s)?$/.test($(".kk-penerima-dropship")[i].value))||(/^(\s)?$/.test($(".alamat-penerima-dropship")[i].value))||(/^(\s)?$/.test($(".nama-penerima-dropship")[i].value))||(/^(\s)?$/.test($(".telepon-penerima-dropship")[i].value))){r=0;break;}
i+=1;}
return r;}
var result=0;if(!(/(^$|rp\ 0,-)/i.test($("#total-harga")[0].value))&&!(/(^$|rp\ 0,-)/i.test($("#harga-cetak")[0].value))&&!(/^(\s)?$/.test($(".nama-pengirim-dropship")[0].value))&&misc.checkPhone($(".telepon-pengirim-dropship")[0].value)&&checkList()){result=1;}
return result;}
misc.initTooltip();if($(".pesanan-wrap").css("display")==="none"){$(".pesanan-wrap").fadeIn(0);}
if(!dropship){$nps.prop("disabled",0);$nns.prop("disabled",1);if(!(/(^$|rp\ 0,-)/i.test($("#total-harga")[0].value))&&!(/(^$|rp\ 0,-)/i.test($("#harga-cetak")[0].value))){$nns.prop("disabled",0);}else{$nns.prop("disabled",1);}
if(!Number($("#total-copy").val())){$("#harga-ongkir, #total-harga, #harga-cetak").val("Rp 0,-").removeAttr("style");}
$("#pemesan, #akumulasi_pesanan").fadeOut(lim,function(){$("#pesanan").fadeIn(limit,function(){if($(".judul-buku")[0]){$(".judul-buku")[0].focus();}});});}else{$npd.prop("disabled",0);$nnd.prop("disabled",1);$("#pemesan-dropship, #akumulasi_pesanan").fadeOut(lim,function(){$("#pesanan").fadeIn(limit,function(){if($(".nama-pengirim-dropship")[0]){$(".nama-pengirim-dropship")[0].focus();}});});if(checkStuff()){$nnd.prop("disabled",0);}else{$nnd.prop("disabled",1);}}
$selesai.prop("disabled",1);misc.resetSelesai();il=0;}
function triggerDokumen(){misc.initTooltip();if(!dropship){$nps.prop("disabled",0);$nns.prop("disabled",1);if(!linkCS.length&&!linkGS.length){$nns.prop("disabled",1);}else{$nns.prop("disabled",0);}
$("#pesanan, #keterangan_tambahan").fadeOut(lim,function(){$("#akumulasi_pesanan").fadeIn(limit);});}else{$npd.prop("disabled",0);$nnd.prop("disabled",1);if(!linkCS.length&&!linkGS.length){$nnd.prop("disabled",1);}else{$nnd.prop("disabled",0);}
$("#pesanan, #keterangan_tambahan").fadeOut(lim,function(){$("#akumulasi_pesanan").fadeIn(limit);});}
$selesai.prop("disabled",1);misc.resetSelesai();il=0;}
function triggerKeterangan(){misc.initTooltip();if(!dropship){$nns.prop("disabled",1);$nps.prop("disabled",0);}else{$nnd.prop("disabled",1);$npd.prop("disabled",0);}
$("#akumulasi_pesanan").fadeOut(lim,function(){$("#keterangan_tambahan").fadeIn(limit,function(){if($("#keteranganTambahan")[0]){$("#keteranganTambahan")[0].focus();}});});if(semuaKumplit()){$selesai.prop("disabled",0).promise().done(misc.setSelesai);}else{$selesai.prop("disabled",1);misc.resetSelesai();}
il=0;}
function triggerPrev(){if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
var ix;if(il===1){ix=misc.getActBtn($(".fp-sub-section"));$("[data-toggle='tooltip']").tooltip("destroy");if(!dropship){$nns.prop("disabled",0);}else{$nnd.prop("disabled",0);}
if(ix===1){triggerPemesan();}else if(ix===2){triggerPesanan();}else{triggerDokumen();}}}
function triggerNext(){function normalFunc(){var ix=misc.getActBtn($(".fp-sub-section"));$("[data-toggle='tooltip']").tooltip("destroy");if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
if(ix===0){triggerPesanan();}else if(ix===1){triggerDokumen();}else{triggerKeterangan();}}
if(il===1){if(!emailReminderFlag){if(!dropship){if($("#email-pemesan").val().length<40){$("#emailPemesan").html("<samp><i class='fa fa-envelope-o'></i> "+$("#email-pemesan").val()+"</samp>");}else{$("#emailPemesan").html("<samp>"+$("#email-pemesan").val()+"</samp>");}}else{if($("#email-pemesan-dropship").val().length<40){$("#emailPemesan").html("<samp><i class='fa fa-envelope-o'></i> "+$("#email-pemesan-dropship").val()+"</samp>");}else{$("#emailPemesan").html("<samp>"+$("#email-pemesan-dropship").val()+"</samp>");}}
$("#EmailReminder").modal({show:1,backdrop:"static",keyboard:0});misc.delPadBody();$("#BenarEmail")[0].onclick=function(){emailReminderFlag=1;$("#EmailReminder").modal("hide");$(window).delay(500).promise().done(normalFunc);};$("#SalahEmail")[0].onclick=function(){emailReminderFlag=0;$("#EmailReminder").modal("hide");if(!dropship){if($("#email-pemesan")[0]){$("#email-pemesan")[0].focus();}}else{if($("#email-pemesan-dropship")[0]){$("#email-pemesan-dropship")[0].focus();}}
il=0;};}else{normalFunc();}}}
function nextFunc(){il=0;$nps.click(function(){il+=1;if(il===1){triggerPrev();}});$nns.click(function(){il+=1;if(il===1){triggerNext();}});$npd.click(function(){il+=1;if(il===1){triggerPrev();}});$nnd.click(function(){il+=1;if(il===1){triggerNext();}});}
nextFunc();triggerPemesan();}
function resetSemuaData(a){var newID;var tim;var $dpfc;misc.resetSelesai();$("[data-toggle=\"tooltip\"]").each(function(i){var $t=$("[data-toggle=\"tooltip\"]").eq(i);if($t.tooltip){$t.tooltip("destroy");}});$llc.add($blc).fadeOut(0);$(".tambah, .hapus, #updateTautanFile, #save_id_standard, #save_id_dropship").add($(resetSemua)).add($selesai).prop("disabled",1);$(".bootstrap-filestyle").fadeIn(0);if($("#fileSudahAda").hasClass("col-md-12")){$("#fileSudahAda").removeClass("col-md-12").addClass("col-md-4");$("#tautanHolderLuar, #unggahHolderLuar, #btnFileSudahAda, #fileSudahAda, #help_fsa").fadeIn(0);$("#btnFileSudahAdaCancel").fadeOut(0);$("#keteranganTambahan").val("").removeAttr("readonly");}
if(!dropship){$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");disBtnProv();disBtnKab();disBtnKec();$("#opsiKurirStandard").fadeOut(0);if(a===1){newID=misc.idGenerator();$("#id-pesanan").val(newID);$("#id-pesanan-dropship").val(newID+"-D");}
$nns.prop("disabled",1);g=0;$jku.val("m");$("#provinsiBox, #kotaBox, #kecamatanBox, .alamat-pemesan").val("");if($(".kantorPrintCo").css("display")!=="none"){$(".kantorPrintCo").fadeOut(0);}
if($("#dropdown_help").css("display")!=="none"){$("#dropdown_help").show(300);}
$("#provinsiBox, #kotaBox, #kecamatanBox, .alamat-pemesan").attr("readonly","readonly");$("#kecamatanBox")[0].setAttribute("placeholder","Kecamatan");$("label[for='alamat-pemesan']").html("Alamat Lengkap");$("label[for='kotaBox']").html("Kab./Kota");$("label[for='kecamatanBox']").html("Kec.");$("label[for='provinsiBox']").html("Provinsi");$("#opsiTitle").html($("#opsiTitle").attr("data-o-t"));$("#pemesan, #pesanan, #akumulasi_pesanan, #keterangan_tambahan").fadeOut(0,function(){$("#pemesan").fadeIn(0);$nps.add($nns).prop("disabled",1);tim=setTimeout(function(){if($("#nama-pemesan")[0]){$("#nama-pemesan")[0].focus();}
clearTimeout(tim);},1000);});}else{$(".ChosenKurirDropship").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$(".terpilihDropship").html("Pilihan Jasa Kurir");disBtnKab(0);disBtnKec(0);disBtnKur(0);if(a===1){newID=misc.idGenerator();$("#id-pesanan-dropship").val(newID+"-D");}
$("#nama-pemesan-dropship, #email-pemesan-dropship, #telepon-pemesan-dropship, #alamat-pemesan-dropship, .provinsi-penerima-dropship, .ko-penerima-dropship, .kk-penerima-dropship, .alamat-penerima-dropship, .nama-penerima-dropship, .telepon-penerima-dropship, .nama-pengirim-dropship, .telepon-pengirim-dropship, .berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").val("");$(".kk-penerima-dropship, .ko-penerima-dropship, .berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").attr("readonly","readonly");$(".dynamic-dropship").each(function(i,v){if(i>0){$(v).remove();}});$tbj.add($hpt).add($nnd).prop("disabled",1);$(".dynamic-dropship").css({"background-color":"transparent","border":"2px dashed transparent"});gg=0;dcntr=1;$(".dropship_perhitungan_wrap").not($(".dropship_perhitungan_wrap").eq(0)).remove();$(".dynamic-dropship").not($(".dynamic-dropship").eq(0)).remove();$dpfc=$(".dropship_perhitungan").eq(0).find(".form-control");$dpfc.each(function(i){$dpfc.eq(i).val("").removeAttr("style");});$(".dropship_perhitungan_wrap").eq(0).css({"background-color":"transparent","border-bottom":"2px dashed transparent"});$("#pemesan-dropship, #pesanan, #akumulasi_pesanan, #keterangan_tambahan").fadeOut(0,function(){$("#pemesan-dropship").fadeIn(0);$npd.add($nnd).prop("disabled",1);tim=setTimeout(function(){if($("#nama-pemesan-dropship")[0]){$("#nama-pemesan-dropship")[0].focus();}
clearTimeout(tim);},1000);});}
$("#tautanFile, #harga-cetak, #harga-ongkir, #packing-handling, #book-wrap, #total-copy, #book-sewing").val("");um();namaPemesan.value="";teleponPemesan.value="";emailPemesan.value="";$(alamatPemesan).val("");if($("#diskonHarga")){$("#diskonHarga").html($("#diskonHarga").attr("data-diskon-display"));}
$(".tipe-tinta, .book-wrapping, .book-sewing").val("0").removeAttr("style");$("#book-wrap, #book-sewing, #total-copy").removeAttr("style");$("#book-sewing").attr("data-original-title","Biaya total jahit benang");$("#book-wrap").attr("data-original-title","Biaya book wrap");$("#harga-ongkir").attr("data-original-title","Biaya kurir");$(totalHarga).attr("data-original-title","BIAYA TOTAL");$("#harga-cetak, #harga-ongkir, #packing-handling").removeAttr("style");$("#semua-file, #daftarTautanFile").html("");$(".judul-buku, .jumlah-halaman, .jumlah-pesanan, .berat-pesanan, .harga-pesanan, .book-wrapping-price, .book-sewing-price").add($(totalBerat)).add($(totalHarga)).add($(totalPesanan)).val("").removeAttr("style");$(".jenis-kertas, .jenis-cover, .ukuran-kertas").val("_*_");$(".pesanan-wrap").not($(".pesanan-wrap").eq(0)).remove();$(".pesanan-wrap").eq(0).removeAttr("style");if(a===1){$("#konfirmasiResetSemua").modal("hide").promise().done(function(){misc.scrollAtas();});}else{misc.scrollAtas();}
misc.initTooltip();update();}
function resetSemuaHandler(){$("#konfirmasiResetSemua").modal({backdrop:"static",keyboard:false,show:true}).promise().done(function(){$("#resetData").on("click",function(){reset_form+=1;resetSemuaData(1);});$("#tutupKonfirmasiResetSemua").on("click",function(){$("#konfirmasiResetSemua").modal("hide");if((linkCS.length||linkGS.length)&&semuaKumplit()===1&&!(/^$|rp\ 0,-/i.test($("#total-harga").val()))){$selesai.prop("disabled",0).promise().done(misc.setSelesai);}else{$selesai.prop("disabled",1);misc.resetSelesai();}});});}
function sendEmails(){var xhrP;var theData;function goToRedirectPage(e){var resp;if(typeof e!=="number"){if(e.target){resp=e.target.responseText;if(!(/error/i.test(resp))){window.location.replace(resp);}else{if(/\n/.test(resp)){resp=resp.split("\n");$("#errorServerNote").html(resp[0]+"<br>---<br><small style='color:red'>"+resp[1]+"</small><br>---<br>"+resp[2]);}else{$("#errorServerNote").html(resp);}
$("#closeErrorBtn").remove();$("#reloadPageBtn").html("<i class='fa fa-refresh'></i> RELOAD");$("#reloadPageBtn").removeAttr("data-dismiss");$("#reloadPageBtn").removeClass("btn-warning").addClass("btn-danger");$("#reloadPageBtn").click(function(){$("#miscError").modal("hide");$("#miscError").on("hidden.bs.modal",function(){window.location.reload(1);});});$("#miscError").modal({show:1,backdrop:"static"});misc.delPadBody();}}else{misc.miscError();misc.delPadBody();}}else{$("#serverError").modal({backdrop:"static",keyboard:false,show:true});$("#kodeError").html("("+e+")");misc.delPadBody();}}
try{theData=jsonConstructor()[0];}catch(ignore){return;}
$("section, footer").html("").promise().done(function(){$("section").css({"background-image":"url('"+pth+"redirectLoader.gif')","background-repeat":"no-repeat","background-position":"50% 10%",height:$(window).height()+"px"}).promise().done(function(){xhrP=new XMLHttpRequest();xhrP.open("POST","/form-pemesanan/json/rhx",1);xhrP.setRequestHeader("Content-Type","application/json; charset=UTF-8");xhrCounter+=1;if(xhrCounter===1){xhrP.send(JSON.stringify(theData));}
xhrP.addEventListener("load",function(e){if(xhrP.status>=200&&xhrP.status<400){goToRedirectPage(e);}else{goToRedirectPage(Number(xhrP.status));}
xhrCounter=0;},0);});});}
function hore(){var dJ;try{dJ=jsonConstructor();}catch(ignore){return;}
var files=dJ[1];var xhrs=[];var allFiles=[];var eachProgress=[];var completedXHRS=[];var buffMil=0;var ACCESS_TOKEN=atob($("#gcat").attr("data-gc-at").replace(/\s/g,""));var bucket=atob($("#gcb").attr("data-gc-b").replace(/\s/g,""));var API_VERSION="v1";var baseURL="https://www.googleapis.com/upload/storage/"+API_VERSION+"/b/"+bucket+"/o";$("#answer").val("");$("#pwC").modal("hide");misc.delPadBody();function showError(ev,n){var message;try{message=ev.type;}catch(er){if(er){message="ups!";}}
xhrs.forEach(function(v){v.abort();});window.onbeforeunload="";xhrs=[];completedXHRS=[];xhrCounterA=[];$("#unggahan-title").removeClass("alert alert-info").addClass("alert alert-danger").html("<span class='glyphicon glyphicon-ban-circle'></span> GAGAL!!");$("#total-file").html("<p class='text-center' style='font-size:20px;margin-bottom:30px;line-height:2'><code style='background:mistyrose;color:red'>ERROR...</code></p>");$(".progress").eq(n).html("<p style='color:#777'><code style='color:brown;background-color:mistyrose;font-size:20px;text-transform:uppercase;'>"+message+"</code>, silakan tutup dan coba kembali. Pastikan sambungan internet Anda sudah terpasang.</p>").removeClass("progress");$(".footerUnggah").fadeIn(150,function(){$("#coba-lagi").on("click",function(){$("#unggahan").modal("hide").promise().done(function(){misc.delPadBody();$selesai.prop("disabled",0).promise().done(misc.setSelesai);$("#unggahan-title").removeClass("alert alert-danger").html("Mengunggah file. Mohon menunggu...");$(".footerUnggah").fadeOut(0);});});});xhrCounterA[n]=0;}
function showFinish(n){completedXHRS.push(files[n].metadata.name);if(!(/glyphicon\ glyphicon-ok/.test($(".fileWords").eq(n).html().toString()))){$(".fileWords").eq(n).append("&nbsp;&nbsp;<span class='glyphicon glyphicon-ok'></span>").css("color","darkgreen");}
if(completedXHRS.length===files.length){$("#total-file").slideUp(250,function(){$("#total-file").html("").promise().done(function(){$("#unggahan-title").removeClass("alert alert-info").addClass("alert alert-success").html("<span style='color:darkgreen'>SELESAI!</span>").delay(1000).promise().done(function(){$("#unggahan").modal("hide").removeClass("alert alert-success").promise().done(function(){misc.delPadBody();sendEmails();});});});});window.onbeforeunload="";}
xhrCounterA[n]=0;}
function showProgressTotal(el,et,n){allFiles[n]=et;eachProgress[n]=el;var eachLoaded;var totSize;var totalProgress;var estimatedTime;var uploadSpeedRaw;var uploadSpeed;var now;var delta;var imgLoader="<img src='data:image/gif;base64,R0lGODlhGAAYAPQAAP///wAAAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJBwAAACwAAAAAGAAYAAAFriAgjiQAQWVaDgr5POSgkoTDjFE0NoQ8iw8HQZQTDQjDn4jhSABhAAOhoTqSDg7qSUQwxEaEwwFhXHhHgzOA1xshxAnfTzotGRaHglJqkJcaVEqCgyoCBQkJBQKDDXQGDYaIioyOgYSXA36XIgYMBWRzXZoKBQUMmil0lgalLSIClgBpO0g+s26nUWddXyoEDIsACq5SsTMMDIECwUdJPw0Mzsu0qHYkw72bBmozIQAh+QQJBwAAACwAAAAAGAAYAAAFsCAgjiTAMGVaDgR5HKQwqKNxIKPjjFCk0KNXC6ATKSI7oAhxWIhezwhENTCQEoeGCdWIPEgzESGxEIgGBWstEW4QCGGAIJEoxGmGt5ZkgCRQQHkGd2CESoeIIwoMBQUMP4cNeQQGDYuNj4iSb5WJnmeGng0CDGaBlIQEJziHk3sABidDAHBgagButSKvAAoyuHuUYHgCkAZqebw0AgLBQyyzNKO3byNuoSS8x8OfwIchACH5BAkHAAAALAAAAAAYABgAAAW4ICCOJIAgZVoOBJkkpDKoo5EI43GMjNPSokXCINKJCI4HcCRIQEQvqIOhGhBHhUTDhGo4diOZyFAoKEQDxra2mAEgjghOpCgz3LTBIxJ5kgwMBShACREHZ1V4Kg1rS44pBAgMDAg/Sw0GBAQGDZGTlY+YmpyPpSQDiqYiDQoCliqZBqkGAgKIS5kEjQ21VwCyp76dBHiNvz+MR74AqSOdVwbQuo+abppo10ssjdkAnc0rf8vgl8YqIQAh+QQJBwAAACwAAAAAGAAYAAAFrCAgjiQgCGVaDgZZFCQxqKNRKGOSjMjR0qLXTyciHA7AkaLACMIAiwOC1iAxCrMToHHYjWQiA4NBEA0Q1RpWxHg4cMXxNDk4OBxNUkPAQAEXDgllKgMzQA1pSYopBgonCj9JEA8REQ8QjY+RQJOVl4ugoYssBJuMpYYjDQSliwasiQOwNakALKqsqbWvIohFm7V6rQAGP6+JQLlFg7KDQLKJrLjBKbvAor3IKiEAIfkECQcAAAAsAAAAABgAGAAABbUgII4koChlmhokw5DEoI4NQ4xFMQoJO4uuhignMiQWvxGBIQC+AJBEUyUcIRiyE6CR0CllW4HABxBURTUw4nC4FcWo5CDBRpQaCoF7VjgsyCUDYDMNZ0mHdwYEBAaGMwwHDg4HDA2KjI4qkJKUiJ6faJkiA4qAKQkRB3E0i6YpAw8RERAjA4tnBoMApCMQDhFTuySKoSKMJAq6rD4GzASiJYtgi6PUcs9Kew0xh7rNJMqIhYchACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJEAQZZo2JIKQxqCOjWCMDDMqxT2LAgELkBMZCoXfyCBQiFwiRsGpku0EshNgUNAtrYPT0GQVNRBWwSKBMp98P24iISgNDAS4ipGA6JUpA2WAhDR4eWM/CAkHBwkIDYcGiTOLjY+FmZkNlCN3eUoLDmwlDW+AAwcODl5bYl8wCVYMDw5UWzBtnAANEQ8kBIM0oAAGPgcREIQnVloAChEOqARjzgAQEbczg8YkWJq8nSUhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJGAYZZoOpKKQqDoORDMKwkgwtiwSBBYAJ2owGL5RgxBziQQMgkwoMkhNqAEDARPSaiMDFdDIiRSFQowMXE8Z6RdpYHWnEAWGPVkajPmARVZMPUkCBQkJBQINgwaFPoeJi4GVlQ2Qc3VJBQcLV0ptfAMJBwdcIl+FYjALQgimoGNWIhAQZA4HXSpLMQ8PIgkOSHxAQhERPw7ASTSFyCMMDqBTJL8tf3y2fCEAIfkECQcAAAAsAAAAABgAGAAABa8gII4k0DRlmg6kYZCoOg5EDBDEaAi2jLO3nEkgkMEIL4BLpBAkVy3hCTAQKGAznM0AFNFGBAbj2cA9jQixcGZAGgECBu/9HnTp+FGjjezJFAwFBQwKe2Z+KoCChHmNjVMqA21nKQwJEJRlbnUFCQlFXlpeCWcGBUACCwlrdw8RKGImBwktdyMQEQciB7oACwcIeA4RVwAODiIGvHQKERAjxyMIB5QlVSTLYLZ0sW8hACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWPM5wNiV0UDUIBNkdoepTfMkA7thIECiyRtUAGq8fm2O4jIBgMBA1eAZ6Knx+gHaJR4QwdCMKBxEJRggFDGgQEREPjjAMBQUKIwIRDhBDC2QNDDEKoEkDoiMHDigICGkJBS2dDA6TAAnAEAkCdQ8ORQcHTAkLcQQODLPMIgIJaCWxJMIkPIoAt3EhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWHM5wNiV0UN3xdLiqr+mENcWpM9TIbrsBkEck8oC0DQqBQGGIz+t3eXtob0ZTPgNrIwQJDgtGAgwCWSIMDg4HiiUIDAxFAAoODwxDBWINCEGdSTQkCQcoegADBaQ6MggHjwAFBZUFCm0HB0kJCUy9bAYHCCPGIwqmRq0jySMGmj6yRiEAIfkECQcAAAAsAAAAABgAGAAABbIgII4k0DRlmg6kYZCsOg4EKhLE2BCxDOAxnIiW84l2L4BLZKipBopW8XRLDkeCiAMyMvQAA+uON4JEIo+vqukkKQ6RhLHplVGN+LyKcXA4Dgx5DWwGDXx+gIKENnqNdzIDaiMECwcFRgQCCowiCAcHCZIlCgICVgSfCEMMnA0CXaU2YSQFoQAKUQMMqjoyAglcAAyBAAIMRUYLCUkFlybDeAYJryLNk6xGNCTQXY0juHghACH5BAkHAAAALAAAAAAYABgAAAWzICCOJNA0ZVoOAmkY5KCSSgSNBDE2hDyLjohClBMNij8RJHIQvZwEVOpIekRQJyJs5AMoHA+GMbE1lnm9EcPhOHRnhpwUl3AsknHDm5RN+v8qCAkHBwkIfw1xBAYNgoSGiIqMgJQifZUjBhAJYj95ewIJCQV7KYpzBAkLLQADCHOtOpY5PgNlAAykAEUsQ1wzCgWdCIdeArczBQVbDJ0NAqyeBb64nQAGArBTt8R8mLuyPyEAOwAAAAAAAAAAADxiciAvPgo8Yj5XYXJuaW5nPC9iPjogIG15c3FsX3F1ZXJ5KCkgWzxhIGhyZWY9J2Z1bmN0aW9uLm15c3FsLXF1ZXJ5Jz5mdW5jdGlvbi5teXNxbC1xdWVyeTwvYT5dOiBDYW4ndCBjb25uZWN0IHRvIGxvY2FsIE15U1FMIHNlcnZlciB0aHJvdWdoIHNvY2tldCAnL3Zhci9ydW4vbXlzcWxkL215c3FsZC5zb2NrJyAoMikgaW4gPGI+L2hvbWUvYWpheGxvYWQvd3d3L2xpYnJhaXJpZXMvY2xhc3MubXlzcWwucGhwPC9iPiBvbiBsaW5lIDxiPjY4PC9iPjxiciAvPgo8YnIgLz4KPGI+V2FybmluZzwvYj46ICBteXNxbF9xdWVyeSgpIFs8YSBocmVmPSdmdW5jdGlvbi5teXNxbC1xdWVyeSc+ZnVuY3Rpb24ubXlzcWwtcXVlcnk8L2E+XTogQSBsaW5rIHRvIHRoZSBzZXJ2ZXIgY291bGQgbm90IGJlIGVzdGFibGlzaGVkIGluIDxiPi9ob21lL2FqYXhsb2FkL3d3dy9saWJyYWlyaWVzL2NsYXNzLm15c3FsLnBocDwvYj4gb24gbGluZSA8Yj42ODwvYj48YnIgLz4KPGJyIC8+CjxiPldhcm5pbmc8L2I+OiAgbXlzcWxfcXVlcnkoKSBbPGEgaHJlZj0nZnVuY3Rpb24ubXlzcWwtcXVlcnknPmZ1bmN0aW9uLm15c3FsLXF1ZXJ5PC9hPl06IENhbid0IGNvbm5lY3QgdG8gbG9jYWwgTXlTUUwgc2VydmVyIHRocm91Z2ggc29ja2V0ICcvdmFyL3J1bi9teXNxbGQvbXlzcWxkLnNvY2snICgyKSBpbiA8Yj4vaG9tZS9hamF4bG9hZC93d3cvbGlicmFpcmllcy9jbGFzcy5teXNxbC5waHA8L2I+IG9uIGxpbmUgPGI+Njg8L2I+PGJyIC8+CjxiciAvPgo8Yj5XYXJuaW5nPC9iPjogIG15c3FsX3F1ZXJ5KCkgWzxhIGhyZWY9J2Z1bmN0aW9uLm15c3FsLXF1ZXJ5Jz5mdW5jdGlvbi5teXNxbC1xdWVyeTwvYT5dOiBBIGxpbmsgdG8gdGhlIHNlcnZlciBjb3VsZCBub3QgYmUgZXN0YWJsaXNoZWQgaW4gPGI+L2hvbWUvYWpheGxvYWQvd3d3L2xpYnJhaXJpZXMvY2xhc3MubXlzcWwucGhwPC9iPiBvbiBsaW5lIDxiPjY4PC9iPjxiciAvPgo8YnIgLz4KPGI+V2FybmluZzwvYj46ICBteXNxbF9xdWVyeSgpIFs8YSBocmVmPSdmdW5jdGlvbi5teXNxbC1xdWVyeSc+ZnVuY3Rpb24ubXlzcWwtcXVlcnk8L2E+XTogQ2FuJ3QgY29ubmVjdCB0byBsb2NhbCBNeVNRTCBzZXJ2ZXIgdGhyb3VnaCBzb2NrZXQgJy92YXIvcnVuL215c3FsZC9teXNxbGQuc29jaycgKDIpIGluIDxiPi9ob21lL2FqYXhsb2FkL3d3dy9saWJyYWlyaWVzL2NsYXNzLm15c3FsLnBocDwvYj4gb24gbGluZSA8Yj42ODwvYj48YnIgLz4KPGJyIC8+CjxiPldhcm5pbmc8L2I+OiAgbXlzcWxfcXVlcnkoKSBbPGEgaHJlZj0nZnVuY3Rpb24ubXlzcWwtcXVlcnknPmZ1bmN0aW9uLm15c3FsLXF1ZXJ5PC9hPl06IEEgbGluayB0byB0aGUgc2VydmVyIGNvdWxkIG5vdCBiZSBlc3RhYmxpc2hlZCBpbiA8Yj4vaG9tZS9hamF4bG9hZC93d3cvbGlicmFpcmllcy9jbGFzcy5teXNxbC5waHA8L2I+IG9uIGxpbmUgPGI+Njg8L2I+PGJyIC8+Cg==' style='display:inline-block;vertical-align:middle'>";estimatedTime="...";uploadSpeed="...";now=misc.dtr();delta=(now-buffMil)/1000;if(allFiles.indexOf(0)===-1){totSize=0;allFiles.forEach(function(v){if(Number(v)){totSize+=Number(v);}});}
eachLoaded=0;eachProgress.forEach(function(v){if(Number(v)){eachLoaded+=Number(v);}});if(!isNaN(eachLoaded/delta)){uploadSpeedRaw=eachLoaded/delta;uploadSpeed=misc.trimSpeed(uploadSpeedRaw);}
if(uploadSpeed!=="..."&&!(/nan/i.test(misc.formatClock(Math.floor((totSize-eachLoaded)/uploadSpeedRaw))))){estimatedTime=misc.formatClock(Math.floor((totSize-eachLoaded)/uploadSpeedRaw));}
if(totSize>=0&&eachLoaded>=0){if(totSize===0){totalProgress="starting";}else{totalProgress=eachLoaded/totSize*100;if(totalProgress%1>0){totalProgress="Total Progress: "+totalProgress.toFixed(2)+"%";}else{totalProgress="Total Progress: "+totalProgress+"%";}}}else{totalProgress="Total Progress: ...";}
var displayP="<p class='text-center' style='font-size:22px;line-height:2;margin-bottom:30px;'><code style='color:darkblue;'>"+totalProgress+"</code><br><code style='color:darkblue'><span data-toggle='tooltip' data-placement='top' title='remaining time' style='font-size:14px'><i style='font-size:16px' class='fa fa-clock-o'></i> "+estimatedTime+"</span> "+imgLoader+" <span data-toggle='tooltip' data-placement='top' title='upload speed' style='font-size:14px'><i style='font-size:16px' class='fa fa-tachometer'></i> "+uploadSpeed+"</span></code>";$("#total-file")[0].innerHTML=displayP;}
function showProgress(ev,n){var el=ev.loaded;var et=ev.total;var val=el/et*100;if(val%1>0){val=val.toFixed(2);}
if(!val){val=100;}
showProgressTotal(el,et,n);var kataKata=val+"%";$(".unggah-progress").eq(n).css("width",kataKata).text(kataKata).attr("aria-valuenow",val);}
function xhrPost(){var multipartRequestBody;xhrCounterA=[];var bu=baseURL+"?uploadType=multipart";var boundary="-------314159265358979323846";var delimiter="\r\n--"+boundary+"\r\n";var close_delim="\r\n--"+boundary+"--";window.onbeforeunload=misc.wrn;files.forEach(function(v,i){var allXHR=new XMLHttpRequest();xhrCounterA[i]=0;xhrs.push(allXHR);allFiles.push(0);eachProgress.push(0);if(i===0){buffMil=misc.dtr();}
multipartRequestBody=delimiter+"Content-Type: application/json\r\n\r\n"+JSON.stringify(v.metadata)+delimiter+"Content-Type: "+v.metadata.type+"\r\n"+"Content-Transfer-Encoding: base64\r\n"+"\r\n"+v.data+close_delim;allXHR.addEventListener("readystatechange",function(e){if(e){if(allXHR.readyState===1){$("#unggahan-title").addClass("alert alert-info");}else if(allXHR.readyState===4){if(allXHR.status!==200){showError(e.statusText,i);}}}},0);allXHR.addEventListener("load",function(){showFinish(i);},0);allXHR.upload.addEventListener("progress",function(e){showProgress(e,i);},0);allXHR.addEventListener("error",function(e){showError(e,i);},0);allXHR.addEventListener("abort",function(e){showError(e,i);},0);allXHR.open("POST",bu+"&name="+misc.escapeChars(v.metadata.name),true);allXHR.beforeSend=function(r){r.setRequestHeader("Authorization","Bearer "+ACCESS_TOKEN);};allXHR.setRequestHeader("Content-Type","multipart/mixed; boundary='"+boundary+"'");allXHR.setRequestHeader("Content-Transfer-Encoding","binary");xhrCounterA[i]+=1;if(xhrCounterA[i]===1){allXHR.send(multipartRequestBody);}});}
if(linkGS.length){$("#unggahan").modal({backdrop:"static",keyboard:false,show:true}).promise().done(function(){misc.delPadBody();xhrPost();$("#total-file, #rincian-file").html("").fadeOut(0);$.each(filePesananArr,function(i){var ips=i+1;var ss="<code class='wba'>";var se="</code>";var fileN=filePesananArr[i].name;var fileS=misc.trimS(filePesananArr[i].size);var progressBar="<div class='progress'>"+"<div class='progress-bar progress-bar-info progress-bar-striped active unggah-progress' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0'>"+"0%"+"</div>"+"</div>";$("#rincian-file")[0].innerHTML+="<div id='unggahPesanan-"+i+"'>"+"<div class='fileWords'>File #"+ips+" | "+ss+fileN+se+"|"+ss+fileS+se+"</div>"+progressBar+"</div>";});if($("#rincian-file").html()){$("#total-file").html("<div class='text-center' style='font-size:20px;color:#555;margin-bottom:30px;line-height:2;'><span style='display:inline-block;vertical-align:top'><img src='data:image/gif;base64,R0lGODlhKwALAPEAAO7u7gAAAHl5eQAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAKwALAAACMoSOCMuW2diD88UKG95W88uF4DaGWFmhZid93pq+pwxnLUnXh8ou+sSz+T64oCAyTBUAACH5BAkKAAAALAAAAAArAAsAAAI9xI4IyyAPYWOxmoTHrHzzmGHe94xkmJifyqFKQ0pwLLgHa82xrekkDrIBZRQab1jyfY7KTtPimixiUsevAAAh+QQJCgAAACwAAAAAKwALAAACPYSOCMswD2FjqZpqW9xv4g8KE7d54XmMpNSgqLoOpgvC60xjNonnyc7p+VKamKw1zDCMR8rp8pksYlKorgAAIfkECQoAAAAsAAAAACsACwAAAkCEjgjLltnYmJS6Bxt+sfq5ZUyoNJ9HHlEqdCfFrqn7DrE2m7Wdj/2y45FkQ13t5itKdshFExC8YCLOEBX6AhQAADsAAAAAAAAAAAA=' class='img-responsive' style='margin:auto;opacity:0.5;'></div>").promise().done(function(){$("#total-file").slideDown(250,function(){$("#rincian-file").slideDown(250);});});}});}else if(!linkGS.length&&linkCS.length){sendEmails();}}
function captcha(){function batalPost(){$("#question")[0].innerHTML="";$("#answer")[0].value="";}
if($("#batalPost")[0]){$("#batalPost")[0].onclick=batalPost;}
$("#konfirmasiUnggah").modal("hide").promise().done(function(){misc.delPadBody();var ref=misc.gmO();var img=["captcha.png","smile.png","a.png","c1.png","c2.png","c3.png"];$("#question").html(ref[0]+" "+ref[2]+" "+ref[1]+" = ...");$("#img_captcha").attr("src",pth+(img[Math.floor(Math.random()*img.length)]));$("#postButton").hide(0).prop("disabled",1);$("#pwC").modal({show:true,backdrop:"static",keyboard:false});function checkAnswer(e){if(Number(e.target.value)===ref[3]){$("#postButton").prop("disabled",0).show(300,function(){$("#postButton")[0].onclick=hore;});}else{$("#postButton").prop("disabled",1).hide(300);$("#postButton")[0].onclick=function(el){el.currentTarget.disabled=1;e.target.value="";return;};}}
$("#pwC").on("shown.bs.modal",function(){if($("#answer")[0]){$("#answer").focus();$("#answer")[0].oninput=checkAnswer;}});});}
checkInvalidFile=function(){var result=1;filePesananArr.forEach(function(v){if(!v){result=0;}});return result;};function terakhir(){var jD;if(jsonConstructor()){jD=jsonConstructor()[0];}else{misc.miscError();$selesai.prop("disabled",1);return;}
var rinci;var ls;var ll;var dd;var totir="";if(jabedi){$(".book-sewing").prop("disabled",1).attr("name","jabedi").val(0);}
if(!semuaKumplit()||misc.getActBtn($(".fp-sub-section"))!==3){$selesai.prop("disabled",1);return;}
function ta(x){if(!dropship){if(/ambil/i.test(jD.pemesan.kurir)){x="N/A &mdash; "+jD.pemesan.kurir;}}
return x.replace(/\ \|\ /g,"<br>");}
function formatWB(a){var result="<small style='color:brown'>TIDAK</small>";if(a!=="Rp 0,-"){result="YA";}
return result;}
function ds(){var result;if(!dropship){result="";}else{result=" (DROPSHIP)";}
return result;}
function constructThem(a){var b=a;if(a!==undefined){b=a.replace(/<p>|<\/p>/g,"[__**_]");b=b.split("[__**_]");b.forEach(function(v,i){if(v!==""&&v!==undefined){b[i]="<div style='margin-bottom:10px;padding:6px 12px;background:azure;border:5px solid #333;border-top:0;border-bottom:0;border-radius:4px;text-align:left;box-shadow:0 1px 2px #555;font-weight:bold;'>"+v+"</div>";}});b=b.join("");}
return b;}
function dsb(){var result;var rincianD;var rincianDr;if(!dropship){result="";}else{rincianD="";rincianDr=jD.pemesan.d_judul_buku;rincianDr.forEach(function(v,i){var xi=i+1;rincianD+="<tr>"+"<td class='text-center'>"+xi+"</td>"+"<td style='max-width:180px;word-break:normal;word-wrap:break-word;'>"+constructThem(v)+"</td>"+"<td class='text-center'>"+jD.pemesan.d_nama_penerima[i]+"</td>"+"<td class='text-center'>"+jD.pemesan.d_telepon_penerima[i]+"</td>"+"<td class='text-center'>"+jD.pemesan.d_alamat_penerima[i].replace(/\ \|\ /g,"<br>")+"</td>"+"<td class='text-center'>"+jD.pemesan.d_nama_pengirim[i]+"</td>"+"<td class='text-center'>"+jD.pemesan.d_telepon_pengirim[i]+"</td>"+"<td class='text-center'><small>"+jD.pemesan.d_berat[i]+"</small></td>"+"<td class='text-center'><small><strong>"+jD.pemesan.d_kurir[i]+"</strong></small></td>"+"<td class='text-center'><small><strong>"+jD.pemesan.d_harga_ongkir[i]+"</strong></small></td>"+"</tr>";});result="<div class='col-md-12'>"+"<hr style='border:0;border-top:2px dashed #ddd;background:transparent'><h4>Dropship</h4>"+"<div class='table-responsive' style='font-size:12px'>"+"<table class='table table-bordered'>"+"<thead><tr>"+"<th class='text-center'>#</th>"+"<th class='text-center' style='max-width:180px;word-break:normal;word-wrap:break-word;'>Judul</th>"+"<th class='text-center'>Nama Penerima</th>"+"<th class='text-center'>Telepon Penerima</th>"+"<th class='text-center'>Alamat Penerima</th>"+"<th class='text-center'>Nama Pengirim</th>"+"<th class='text-center'>Telepon Pengirim</th>"+"<th class='text-center'>Berat</th>"+"<th class='text-center'>Kurir</th>"+"<th class='text-center'>Biaya</th>"+"</tr></thead>"+"<tbody>"+rincianD+"</tbody>"+"</table>"+"</div>"+"</div>";}
return result;}
function checkKurir(a){if(!(/ambil/i.test(a))){if(/dropship/i.test(a)){a="ORDER DROPSHIP";}else{if((/trans|go-?jek|baraya/i.test(a))&&(/\ \(/.test(a))){a="KIRIM via "+a.split(" (")[0];}else{a="KIRIM via "+a;}}}
return a;}
$("#orderSummaryTitle").html("<span class='glyphicon glyphicon-th-list'></span> Order Summary: "+jD.pemesan.id+ds()+" / "+jD.pemesan.nama);ls="<div class='col-md-5 text-right'><strong>FILE UPLOAD</strong></div><div class='col-md-7 text-left' style='overflow-x:hidden;overflow-y:auto;max-height:60px'>";if(jD.link.namaFile.length){ls+="<small style='font-size:12px;word-break:break-all;'>";jD.link.namaFile.forEach(function(v,i){var koma=", ";if(i===jD.link.namaFile.length-1){koma="";}
ls+=v+" ("+jD.link.sizeFile[i]+")"+koma;});ls+="</small>";}else{ls+="<small>TIDAK ADA</small>";}
ls+="</div>";ll="<div class='col-md-5 text-right'><strong>LINK LUAR</strong></div><div class='col-md-7 text-left' style='overflow-y:auto;max-height:60px'>";if(jD.linkE.length){ll+="<small style='font-size:12px;word-break:break-all;'>";jD.linkE.forEach(function(v,i){var koma=", ";if(i===jD.linkE.length-1){koma="";}
ll+=v+koma;});ll+="</small>";}else{ll+="<small>TIDAK ADA</small>";}
ll+="</div>";rinci="";jD.pesanan.judulBuku.forEach(function(v,i){var xi=i+1;rinci+="<tr>"+"<td class='text-center'>"+xi+"</td>"+"<td style='max-width:180px;word-wrap:break-word;word-break:normal;'>"+v+"</td>"+"<td class='text-center'>"+jD.pesanan.jumlahHalaman[i]+"</td>"+"<td class='text-center'>"+jD.pesanan.jumlahCopy[i]+"</td>"+"<td class='text-center'>"+jD.pesanan.ukuranKertas[i]+"</td>"+"<td class='text-center'>"+jD.pesanan.jenisKertas[i]+"</td>"+"<td class='text-center'>"+jD.pesanan.jenisCover[i]+"</td>"+"<td class='text-center'>"+formatWB(jD.pesanan.wb[i])+"</td>"+"<td class='text-center'>"+formatWB(jD.pesanan.jhb[i])+"</td>"+"<td class='text-center'>"+misc.processTipe(jD.pesanan.tipe[i])+"</td>"+"<td class='text-center'><strong>"+jD.perhitungan.hargaUnitPesanan[i]+"</strong></tr>";});totir="<p class='text-right' style='font-size:12px'>Total biaya cetak: <strong>"+jD.perhitungan.hargaCetak+"</strong></p>";if(!(/rp\ 0,-/i.test(jD.pesanan.wbt))){totir+="<p class='text-right' style='font-size:12px'>Wrapping: <strong>"+jD.pesanan.wbt+"</strong></p>";}
if(!(/rp\ 0,-/i.test(jD.pesanan.jhbt))){totir+="<p class='text-right' style='font-size:12px'>Wrapping: <strong>"+jD.pesanan.jhbt+"</strong></p>";}
if(!(/rp\ 0,-/i.test(jD.perhitungan.ongkir))){totir+="<p class='text-right' style='font-size:12px'>Total ongkos kirim: <strong>"+jD.perhitungan.ongkir+"</strong></p>";}
if(!(/rp\ 0,-/i.test(jD.perhitungan.pnh))){totir+="<p class='text-right' style='font-size:12px'>Packing &amp; Handling: <strong>"+jD.perhitungan.pnh+"</strong></p>";}
if(misc.kt(jD.perhitungan.hargaTotal)-misc.kt(jD.perhitungan.hargaDiskon)>0){totir+="<p class='text-right' style='font-size:12px;color:darkgreen'><i class='fa fa-check'></i> Diskon biaya cetak: <strong>(Rp "+misc.tk(misc.kt(jD.perhitungan.hargaTotal)-misc.kt(jD.perhitungan.hargaDiskon))+")</strong></p>";totir+="<p class='text-right' style='font-size:12px'>BIAYA TOTAL (setelah diskon): <mark><strong>"+jD.perhitungan.hargaDiskon+"</strong></mark></p>";}else{totir+="<p class='text-right' style='font-size:12px'>BIAYA TOTAL: <mark><strong>"+jD.perhitungan.hargaDiskon+"</strong></mark></p>";}
dd="<div class='alert alert-info text-center' style='margin:0;padding:10px;margin-bottom:20px;'><h3 style='margin:0;color:#000;'>"+checkKurir(jD.pemesan.kurir)+"</h3></div>"+"<div class='row' style='font-size:14px;'>"+"<div class='col-md-6'>"+"<div class='row'>"+"<div class='col-md-3 text-right'><strong>ORDER ID</strong></div>"+"<div class='col-md-9 text-left'>"+jD.pemesan.id+"</div>"+"<div class='col-md-3 text-right'><strong>NAMA</strong></div>"+"<div class='col-md-9 text-left'>"+jD.pemesan.nama+"</div>"+"<div class='col-md-3 text-right'><strong>EMAIL</strong></div>"+"<div class='col-md-9 text-left'>"+jD.pemesan.email+"</div>"+"<div class='col-md-3 text-right'><strong>TELEPON</strong></div>"+"<div class='col-md-9 text-left'>"+jD.pemesan.telepon+"</div>"+"<div class='col-md-3 text-right'><strong>ALAMAT</strong></div>"+"<div class='col-md-9 text-left'>"+ta(jD.pemesan.alamat)+"</div>"+"</div>"+"</div>"+"<div class='col-md-6'>"+"<div class='row'>"+"<div class='col-md-5 text-right'><strong>BIAYA TOTAL</strong></div>"+"<div class='col-md-7 text-left'><mark><strong>"+jD.perhitungan.hargaTotal+"</strong></mark></div>"+"<div class='col-md-5 text-right'><strong>JUMLAH PESANAN</strong></div>"+"<div class='col-md-7 text-left'>"+jD.perhitungan.pesananTotal+"</div>"+"<div class='col-md-5 text-right'><strong>BERAT TOTAL</strong></div>"+"<div class='col-md-7 text-left'>"+jD.perhitungan.beratTotal+"</div>"+"<div class='col-md-5 text-right'><strong>KURIR</strong></div>"+"<div class='col-md-7 text-left'>"+jD.pemesan.kurir+"</div>"+"<div class='col-md-5 text-right'><strong>KET. TAMBAHAN</strong></div>"+"<div class='col-md-7 text-left'><small>"+jD.pemesan.keteranganTambahan+"</small></div>"+ls+ll+"</div>"+"</div>"+"<div class='col-md-12'>"+"<hr style='border:0;border-top:2px dashed #ddd;background:transparent'><h4>Order Details</h4>"+"<div class='table-responsive' style='font-size:12px'>"+"<table class='table table-bordered'>"+"<thead><tr>"+"<th class='text-center'>#</th>"+"<th class='text-center' style='max-width:180px;word-wrap:break-word;word-break:normal;'>Judul</th>"+"<th class='text-center'>Halaman</th>"+"<th class='text-center'>Copy</th>"+"<th class='text-center'>Size</th>"+"<th class='text-center'>Paper</th>"+"<th class='text-center'>Cover (Jilid)</th>"+"<th class='text-center'>Wrap</th>"+"<th class='text-center'>Jahit</th>"+"<th class='text-center'>Tipe</th>"+"<th class='text-center'>Harga Cetak</th>"+"</tr></thead>"+"<tbody>"+rinci+"</tbody>"+"</table>"+"</div>"+"</div>"+dsb()+"</div>"+totir;$("#orderSummary").html(dd);$("#konfirmasiUnggah").modal({show:true,backdrop:"static",keyboard:false}).promise().done(function(){misc.delPadBody();$("#mulaiUnggah").on("click",captcha);$("#editData").on("click",function(){$("#konfirmasiUnggah").modal("hide");misc.delPadBody();$selesai.prop("disabled",0).promise().done(misc.setSelesai);});});}
function tautanFile(){var $tautanVal=$("#tautanFile").val();function checkExt(a){var result;var c;var ii;var b=a;result=1;if(/,/.test(b)){ii=0;c=b.replace(/\s/g,"").split(",");while(ii<c.length){if(!(/^https?:\/\//.test(c[ii]))){result=0;break;}
if(/\//.test(c[ii])){if(c[ii].match(/\//g).length<3){result=0;break;}}
if(/\./.test(c[ii])){if(c[ii].match(/\./g).length<1){result=0;break;}}
ii+=1;}}else{if(!(/^https?:\/\//.test(b))||(/\s/.test(b))||b.match(/http/g).length>1){result=0;}else{if(/\./.test(b)){if(b.match(/\./g).length<1){result=0;}}
if(/\//.test(b)){if(b.match(/\//g).length<3){result=0;}}}}
return result;}
function checkString(a){var result=1;if(/\.\.\./.test(a)){result=0;}
return result;}
function updateElm(){$(".tautan-unit").on("click",function(e){var i=$(".tautan-unit").index(e.currentTarget);$(".tautan-file-holder").eq(i).slideUp(150,function(){$(".tautan-file-holder").eq(i).remove().promise().done(function(){linkCS.splice(i,1);if($(".tautan-unit").length===0){$("#daftarTautanFile > h3, #daftarTautanFile > hr").slideUp(150,function(){$("#daftarTautanFile > h3").remove();linkCS=[];if(semuaKumplit()===0){if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}
$selesai.prop("disabled",1);misc.resetSelesai();}});}});});});}
if($tautanVal.length&&(/https?:\/\//.test($tautanVal))&&checkExt($tautanVal)===1&&checkString($tautanVal)===1){$("#tautanVal").val($tautanVal.replace(/\s+/g,""));$("#updateTautanFile").prop("disabled",0).removeClass("btn-default").addClass("btn-microsoft").on("click",function(){var tV=$tautanVal.replace(/[\n\s\t\r]/g,"");linkCS=[];$("#updateTautanFile")[0].disabled=1;$("#updateTautanFile");if(/,/.test(tV)){tV=tV.split(",");tV.forEach(function(v,i){linkCS.push(v);tV[i]="<p class='tautan-file-holder' style='display:none'><span class='glyphicon glyphicon-link'></span> <mark style='width:280px;display:inline-block;vertical-align:top;font-size:12px;max-width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;' title='"+v+"'>"+v+"</mark>&nbsp;&nbsp;&nbsp;<button type='button' style='float:none' class='close tautan-unit'>&times;</button></p>";});tV=tV.join("");}else{linkCS.push(tV);tV="<p class='tautan-file-holder' style='display:none'><span class='glyphicon glyphicon-link'></span> <mark style='width:280px;display:inline-block;vertical-align:top;font-size:12px;max-width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;' title='"+tV+"'>"+tV+"</mark>&nbsp;&nbsp;&nbsp;<button type='button' style='float:none' class='close tautan-unit'>&times;</button></p>";}
$("#daftarTautanFile").html("<h3><u>Daftar tautan file</u></h3>"+tV+"<hr>").promise().done(function(){if(semuaKumplit()===1&&$("#total-harga").val()!==""){if(misc.getActBtn($(".fp-sub-section"))===2){if(!dropship){$nns.prop("disabled",0);}else{$nnd.prop("disabled",0);}}}else{if(misc.getActBtn($(".fp-sub-section"))===2){if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}}
$selesai.prop("disabled",1);misc.resetSelesai();}
if($(".tautan-file-holder")){$(".tautan-file-holder").slideDown(150,function(){if(semuaKumplit()===1){if(misc.getActBtn($(".fp-sub-section"))===2){if(!dropship){$nns.prop("disabled",0);}else{$nnd.prop("disabled",0);}}}
updateElm();});}});});}else if(!$tautanVal.length){$("#updateTautanFile").prop("disabled",1);linkCS=[];$("#daftarTautanFile").html("");}else if(checkExt($tautanVal)===0||checkString($tautanVal)===0){$("#updateTautanFile").prop("disabled",1);if(!linkCS&&!linkGS){if(misc.getActBtn($(".fp-sub-section"))===2){if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}}
$selesai.prop("disabled",1);misc.resetSelesai();}}}
function definisiVar(){function alamatPemesanController(){var result;if($(".alamatPemesanHolder1").css("display")!=="none"){result=$(".alamat-pemesan")[0];}else{result=$(".alamat-pemesan")[1];}
$(".alamat-pemesan").on("input",function(e){var th=e.target;var apv=$(th).val();$(".alamat-pemesan").not($(th)).val(apv);});return result;}
if(!dropship){namaPemesan=$("#nama-pemesan")[0];teleponPemesan=$("#telepon-pemesan")[0];emailPemesan=$("#email-pemesan")[0];alamatPemesan=alamatPemesanController();$(window).on("resize",function(){alamatPemesan=alamatPemesanController();});}
$tbj=$("#tambah-tujuan");$hpt=$("#hapus-tujuan");$nnd=$(".nav-next-dropship");$nns=$(".nav-next-standard");$npd=$(".nav-prev-dropship");$nps=$(".nav-prev-standard");$hb=$("html").add($(document.body));totalBerat=$("#total-berat")[0];totalHarga=$("#total-harga")[0];totalPesanan=$("#total-pesanan")[0];unggahFile=$("#unggah-file")[0];$selesai=$(".btnSelesai");resetSemua=$("#resetSemua")[0];template="<div class=\"pesanan-wrap\" style=\"display:none;\">"+$(".pesanan-wrap")[0].innerHTML+"</div>";rx=/djvu|png|jpe?g|psd|cdr|pdf|7z|zip|rar/i;rxf=/mobi|epub/i;diskonHarga=$("#diskonHarga").attr("data-diskon-harga");diskonLimit=$("#diskonHarga").attr("data-diskon-limit");dropshipDisplay="<div class='dropship_perhitungan_wrap dropship_rows sdno'>"+"<div class='row dropship_perhitungan'>"+"<div class='col-md-12'>"+"<h4 style='font-size:16px;border-radius:4px;padding:10px;background:darkslateblue;text-shadow:1px 1px 1px #000;font-weight:normal;margin-top:0;color:#fff;'>Perhitungan Dropship <span class='ndpd'>#1</span></h4>"+"</div>"+"<div class='col-md-3 offset-6 pr2'>"+"<label><small>Jumlah Buku Dropship</small></label>"+"<input class='form-control jumlah-buku-dropship' readonly='readonly' placeholder='Perhitungan...'>"+"</div>"+"<div class='col-md-3 offset-6 pl2 pr2'>"+"<label><small>Biaya Kurir Dropship</small></label>"+"<input class='form-control ongkir-dropship' readonly='readonly' placeholder='Perhitungan...'>"+"</div>"+"<div class='col-md-3 offset-6 pl2 pr2'>"+"<label><small>Biaya Packing &amp; Handling Dropship</small></label>"+"<input class='form-control pnh-dropship' readonly='readonly' placeholder='Perhitungan...'>"+"</div>"+"<div class='col-md-3 offset-6 pl2'>"+"<label><small>Berat Pesanan Dropship</small></label>"+"<input class='form-control berat-unit-dropship' readonly='readonly' placeholder='Perhitungan...'>"+"</div>"+"</div>"+"</div>";var diskonDisplay;if(diskonHarga>0){diskonDisplay=diskonHarga;diskonDisplay=diskonDisplay.toString();diskonDisplay="<div data-toggle='tooltip' data-placement='top' title='Diskon "+diskonDisplay+"% untuk minimum order cetak<br>Rp "+misc.tk(diskonLimit)+"<br>Potongan harga untuk biaya cetak.' style='font-size:16px;display:inline-block;background-color:lightcyan;border:1px solid #aaa;padding:4px 8px; border-radius:4px;'><span id='diskonPersen'>"+diskonDisplay+"%</span> | Rp "+misc.tk(diskonLimit)+"</div>";$("#diskonHarga").attr("data-diskon-display",diskonDisplay).html(diskonDisplay).promise().done(function(){misc.initTooltip();});}else{$("#diskonHarga").remove();}
um();if(!dropship){update();}
function testForm(e){var jdlb=["Belajar Makan Piring Bersama Srikandi","Ilmu Tenaga Api Kompor Super Chef","Bagaimana Mencaci-Maki Si Komo","Lari Kecipratan Kesandung Kepleset","Berenang Renang Kepleset","Melindungi Rambut Dari Sengatan Mata Mata","Hubungan Intim","Hahahaha Apaan","Kenapa Begitu?","Karena Memang Begini"];var namap=["Raden Suratno","Ayu Surtini","Bang Ojeg","Vladimir Putin","Raden Tongtong","Cing Cong Tung","Yoko Ono","George Bush","Obama","Donald Trump","Super Model","Frankenstein Suparno","Sasa Penyedap Makanan","Rantang","Sendok Garpu","Mouse Click","Keyboard Semprul","Semar Makan Cabe","Cabe Indomie","Indomie Keju"];var telp=["08535183828","0892881920","0812309892","08239001997","08226278390","08162718295","082938117001","123456789632","2929292929229","938729108273","23811029381"];var alamp=["Jl. Merpati no. 18, Bengkulu, Jambi, refPnH0","Jl. Bontang no. 20, Desa Banting, 7000","Jl. Hamil 5 Tahun RT.8/RW.7, Sungai Kapuas, 3920","Jl. Jalan Ke Pasar Inpres no. 45, Magetan, 389200","Beverly Hills, 90201","Jalan Tambal Ban no. 3","Jl. Kemaluan Saya Besar no. 12","Jl. Masing-Masing no. 8"];function jb(){return jdlb[Math.floor(Math.random()*jdlb.length)];}
function n(){return namap[Math.floor(Math.random()*namap.length)];}
function t(){return telp[Math.floor(Math.random()*telp.length)];}
function a(){return alamp[Math.floor(Math.random()*alamp.length)];}
e.preventDefault();if(!dropship){namaPemesan.value=n();teleponPemesan.value=t();if(!emailPemesan.value){emailPemesan.value="asd@asd.com";}
if(!alamatPemesan.value){alamatPemesan.value=a();}}else{if(!$("#email-pemesan-dropship")[0].value){$("#email-pemesan-dropship").val("asd@asd.com");}
$("#nama-pemesan-dropship").val(n());$("#telepon-pemesan-dropship").val(t());if(!$("#alamat-pemesan-dropship").val()){$("#alamat-pemesan-dropship").val(a());}
$(".nama-penerima-dropship").each(function(i){var th=$(".nama-penerima-dropship").eq(i)[0];if(!th.value){$(th).val(n());}});$(".nama-pengirim-dropship").each(function(i){var th=$(".nama-pengirim-dropship").eq(i)[0];if(!th.value){$(th).val(n());}});$(".telepon-penerima-dropship").each(function(i){var th=$(".telepon-penerima-dropship").eq(i)[0];if(!th.value){$(th).val(t());}});$(".telepon-pengirim-dropship").each(function(i){var th=$(".telepon-pengirim-dropship").eq(i)[0];if(!th.value){$(th).val(t());}});$(".alamat-penerima-dropship").each(function(i){var th=$(".alamat-penerima-dropship").eq(i)[0];if(!th.value){$(th).val(a());}});}
$(".judul-buku").each(function(i,v){if(!v.value){$(v).val(jb());hitung(v,i);}});$(".jumlah-halaman").each(function(i,v){if(!v.value){$(v).val(500);hitung(v,i);}});$(".jumlah-pesanan").each(function(i,v){if(!v.value){$(v).val(1);hitung(v,i);}});$(".jenis-kertas").each(function(i,v){if(v.value==="_*_"){$(v).val(v.options[2].value);hitung(v,i);}});$(".jenis-cover").each(function(i,v){if(v.value==="_*_"){$(v).val(v.options[4].value);hitung(v,i);}});$(".ukuran-kertas").each(function(i,v){if(v.value==="_*_"){$(v).val(v.options[3].value);hitung(v,i);}});}
$("#isiFormOtomatis").on("click",testForm);$("#reportBug").on("click",misc.bugForm);resetSemua.onclick=resetSemuaHandler;unggahFile.onchange=getFile;$("#tautanFile").on("input",tautanFile);$selesai.on("click",terakhir);}
autoCOMPLETE=function(dl){var provinsiNames=[];var semuaProps={};var data;var dataKotaPCO;var checkOnline="";function ed_etd(a,b){if(/yes/i.test(b)){if(a===""||a===null){a="1-1";}}else{if(a===""||a===null){a="N/A";}}
return a;}
if(dl){if(dl.list){data=dl.list.slice();data.forEach(function(v){if(provinsiNames.indexOf(misc.caps(v.province))===-1){provinsiNames.push(misc.caps(v.province));if(!semuaProps[misc.caps(v.province)]){semuaProps[misc.caps(v.province)]=[{kota:misc.caps(v.city_name)+" ("+misc.caps(v.type)+")",kode_provinsi:v.province_id,kode_kota:v.city_id,kode_pos:v.postal_code}];}else{semuaProps[misc.caps(v.province)].push({kota:misc.caps(v.city_name)+" ("+misc.caps(v.type)+")",kode_provinsi:v.province_id,kode_kota:v.city_id,kode_pos:v.postal_code});}}else{semuaProps[misc.caps(v.province)].push({kota:misc.caps(v.city_name)+" ("+misc.caps(v.type)+")",kode_provinsi:v.province_id,kode_kota:v.city_id,kode_pos:v.postal_code});}});daftarProvinsi=provinsiNames.slice();btnProv();}
if(!dl.list){$("#errorAwal").modal({show:1,backdrop:"static"});misc.delPadBody();return;}}
$llc.add($blc).fadeOut(0);dataKotaPCO=$("#dataKotaPCO").attr("data-kota-pco");if(!dropship){$pvb.on("input",function(e){var $t=$(e.target);var v=$t.val();$t.val(v.toUpperCase());$kob.add($kcb).val("").attr("readonly","readonly").addClass("error-box");$t.addClass("error-box");disBtnKab();disBtnKec();disBtnKur();waktuSampai=undefined;hargaOngkir=0;$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");misc.checkIDKurirStandard();});$kob.on("input",function(e){var $t=$(e.target);var v=$t.val();$t.val(v.toUpperCase());$kcb.val("").attr("readonly","readonly").addClass("error-box");$t.addClass("error-box");disBtnKec();disBtnKur();waktuSampai=undefined;hargaOngkir=0;$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");misc.checkIDKurirStandard();});$kcb.on("input",function(e){var $t=$(e.target);var v=$t.val();$t.val(v.toUpperCase()).addClass("error-box");disBtnKur();waktuSampai=undefined;hargaOngkir=0;$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");misc.checkIDKurirStandard();});$pvb.add($kob).add($kcb).on("click",function(e){$(e.target).select();});hargaOngkir=0;if(provinsiNames.length>0){$pvb.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(provinsiNames,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){var kota=[];var id_kota=[];var idkt;var prov=event.target.value;var kaot;var kecAll=[];var kec=[];var ekc;var id_kec=[];var idkct;var idx;var pilihanKurir=[];hargaOngkir=0;if(prov.length!==ui.item.value.length){prov=ui.item.value;}
$pvb.removeClass("error-box").val(prov);$kob.removeAttr("readonly");$kob.add($kcb).val("").addClass("error-box");$kob[0].focus();semuaProps[prov].forEach(function(v){if(id_kota.indexOf(v.kode_kota)===-1){kota.push(v.kota);id_kota.push(v.kode_kota);}});if(kota.length>0){daftarKab=kota.slice();btnKab();misc.checkIDKurirStandard();$kob.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(kota,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){kaot=event.target.value;idx=kota.indexOf(kaot);idkt=id_kota[idx];if(kaot.length!==ui.item.value.length){kaot=ui.item.value;idx=kota.indexOf(kaot);idkt=id_kota[idx];}
$kob.val(kaot).removeClass("error-box");$("#sejenak").modal({show:1,backdrop:"static"});misc.delPadBody();$.getJSON("/ext/json/ongkir?city="+idkt,function(dt){daftarKec=[];kec=[];id_kec=[];$("#sejenak").modal("hide");misc.delPadBody();if(dt.list){kecAll=dt.list;if(typeof kecAll==="object"){if(kecAll.length>0){$kcb.removeAttr("readonly").addClass("error-box");kecAll.forEach(function(v){if(kec.indexOf(misc.caps(v.subdistrict_name))===-1){kec.push(misc.caps(v.subdistrict_name));daftarKec.push(misc.caps(v.subdistrict_name));id_kec.push(v.subdistrict_id);}});if(kec.length>0){daftarKec=kec.slice();btnKec();$kcb[0].focus();$kcb.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(kec,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){ekc=event.target.value;idx=kec.indexOf(ekc);idkct=id_kec[idx];if(ekc.length!==ui.item.value.length){ekc=ui.item.value;idx=kec.indexOf(ekc);idkct=id_kec[idx];}
$kcb.val(ekc).removeClass("error-box");$("#sejenak").modal({show:1,backdrop:"static"});misc.delPadBody();$.getJSON("/ext/json/ongkir?kecamatan="+idkct,function(dt){var $ckd=$("#ChosenKurirStandard");$("#sejenak").modal("hide");misc.delPadBody();var valuePilihan="";if(dt.list){pilihanKurir=dt.list;$ckd[0].focus();valuePilihan="<option value=\"\" disabled selected=\"selected\">--SILAKAN PILIH KURIR--</option>";pilihanKurir.forEach(function(v,i){(v.costs).forEach(function(vv,ii){if(!(/jtr|peli|surat|dokumen|sps/i.test(vv.service))){valuePilihan+="<option value=\""+misc.caps(v.code)+" ("+misc.caps(vv.service)+")|"+vv.cost[0].value+"|"+ed_etd(vv.cost[0].etd,vv.service)+"|"+i+","+ii+"\">"+misc.caps(v.code)+" ("+misc.caps(vv.service)+") Rp "+misc.tk(vv.cost[0].value)+"/kg ("+ed_etd(vv.cost[0].etd,vv.service)+" hari)</option>";}});if(/jne/i.test(v.code)){if(v.costs.length===0){$("#na_jne_msg").html("<p>Mohon maaf, kurir JNE tujuan <strong>"+ekc+", "+kaot+", "+prov+"</strong> <mark style='color:brown;background:mistyrose;'>tidak tersedia</mark>.</p><p><small>Silakan untuk pilih jasa kurir yang lainnya.</small></p>").promise().done(function(){$("#na_jne").modal("show");misc.delPadBody();});}}});$ckd.html(valuePilihan).promise().done(function(){$ckd.on("change",function(e){var $el=$(e.currentTarget);var valu=$el.val();var ixp;var compt=(/\|/.test(valu)&&valu!==""&&valu!==undefined)?valu.split("|"):["",0,"",""];var pk_outer;var pk_inner;if(compt[0]!==""&&compt[1]!==0&&compt[2]!==""){if(compt[3]!==""&&(/,/.test(compt[3]))&&compt[3]!==undefined){ixp=compt[3].split(",");pk_outer=pilihanKurir[ixp[0]]||undefined;pk_inner=pk_outer?pk_outer.costs[ixp[1]]:undefined;if(pk_outer&&pk_inner){checkOnline="Bisa langsung lacak paket di halaman <strong>CEK PESANAN</strong> PRINT.CO <i class='fa fa-check'></i>";if(/jne/i.test(pk_outer.code)){desKur[0]="<div class='text-center'><img src='"+pth+"jne.png'></div>";}else if(/pos/i.test(pk_outer.code)){desKur[0]="<div class='text-center'><img src='"+pth+"pos_giro_logo.png'></div>";}else if(/pandu/i.test(pk_outer.code)){desKur[0]="<div class='text-center'><img src='"+pth+"pandu_logo_s.png'></div>";checkOnline="<span style='color:#888'>Lacak paket via tautan luar</span>";}else if(/wahana/i.test(pk_outer.code)){desKur[0]="<div class='text-center'><img src='"+pth+"wahana_logo_s.png'></div>";}else{desKur[0]="<h4>"+misc.caps(pk_outer.code)+"</h4>";}
desKur[0]+="<h5 class='text-center'>"+pk_outer.name+"</h5>";desKur[0]+="<p  class='text-center'><strong>"+dataKotaPCO+"</strong> <i class='fa fa-arrow-right'></i> <strong>"+$kcb.val()+", "+$kob.val()+", "+$pvb.val()+"</strong></p><hr style='background:transparent;border-top:1px dashed #999;margin:10px 0;'>";desKur[0]+="<p>Nama service: "+pk_inner.service+"</p>";desKur[0]+="<p>Deskripsi: "+pk_inner.description+"</p>";desKur[0]+="<p>Ongkos kirim: Rp "+misc.tk(pk_inner.cost[0].value)+" / kg</p>";desKur[0]+="<p>"+checkOnline+"</p>";desKur[0]+="<p>Estimasi sampai: "+ed_etd(pk_inner.cost[0].etd,pk_inner.service)+" hari*</p>";desKur[0]+="<p class='text-right'><em><small>*Setelah order selesai dikerjakan.</small></em></p>";desKur[0]+="<div class='text-right'><small><small>Silakan buka <a href='/faq#waktu-proses' target='_blank'>FAQ untuk estimasi waktu pengerjaan <i class='fa fa-external-link'></i></a></small></small></div>";btnKur();}}else{disBtnKur();}
$("#terpilihStandard").html(compt[0]);hargaOngkir=Number(compt[1]);waktuSampai=ed_etd(compt[2],compt[0]);misc.checkIDKurirStandard();updateTotal();}});});}else{$("#errorOngkir").modal({show:1,backdrop:"static"});misc.delPadBody();}});}});}}else{disBtnKec();}}}else{disBtnKec();$("#errorKecamatan").modal({show:1,backdrop:"static"});misc.delPadBody();}});}});}else{disBtnKab();disBtnKec();}}});}}else{$(".provinsi-penerima-dropship").on("input",function(e){var th=e.target;var indexP=$(".provinsi-penerima-dropship").index(th);var v=th.value;$(".ChosenKurirDropship").eq(indexP).html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$(".terpilihDropship").eq(indexP).html("Pilihan Jasa Kurir");th.value=v.toUpperCase();$(th).addClass("error-box");$(".ko-penerima-dropship").eq(indexP).add($(".kk-penerima-dropship").eq(indexP)).val("").attr("readonly","readonly").addClass("error-box");disBtnKab(indexP);disBtnKec(indexP);disBtnKur(indexP);waktuSampai=undefined;hargaOngkir=0;$("#bantuanLokasi2Words").html("");if(v===""){hargaOngkirArr[indexP]=0;updateTotal();}});$(".ko-penerima-dropship").on("input",function(e){var th=e.target;var v=th.value;var ix=$(".ko-penerima-dropship").index(e.target);$(".ChosenKurirDropship").eq(ix).html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$(".terpilihDropship").eq(ix).html("Pilihan Jasa Kurir");th.value=v.toUpperCase();$(th).addClass("error-box");$(".kk-penerima-dropship").eq(ix).val("").attr("readonly","readonly").addClass("error-box");if(/^$/.test($(".alamat-penerima-dropship")[ix].value)){$(".alamat-penerima-dropship").eq(ix).addClass("error-box");}
disBtnKec(ix);disBtnKur(ix);if(v===""){hargaOngkirArr[ix]=0;updateTotal();}});$(".kk-penerima-dropship").on("input",function(e){var th=e.target;var v=th.value;var ix=$(".kk-penerima-dropship").index(e.target);$(".ChosenKurirDropship").eq(ix).html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$(".terpilihDropship").eq(ix).html("Pilihan Jasa Kurir");th.value=v.toUpperCase();$(th).addClass("error-box");disBtnKur(ix);if(/^$/.test($(".alamat-penerima-dropship")[ix].value)){$(".alamat-penerima-dropship").eq(ix).addClass("error-box");}
if(v===""){hargaOngkirArr[ix]=0;updateTotal();}});$(".kk-penerima-dropship, .ko-penerima-dropship, .provinsi-penerima-dropship").on("change",updateTotal);$(".provinsi-penerima-dropship, .ko-penerima-dropship, .kk-penerima-dropship").on("click",function(e){$(e.target).select();});hargaOngkir=0;if(provinsiNames.length>0){$(".provinsi-penerima-dropship").autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(provinsiNames,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){var kota=[];var id_kota=[];var idkt;var prov=event.target.value;var kaot;var kecAll=[];var kec=[];var ekc;var id_kec=[];var idxe=$(".provinsi-penerima-dropship").index(event.target);var idkct;var idx;var pilihanKurir=[];indexParent=idxe;hargaOngkir=0;$pvb=$(".provinsi-penerima-dropship").eq(idxe);$kob=$(".ko-penerima-dropship").eq(idxe);$kcb=$(".kk-penerima-dropship").eq(idxe);$kob.removeAttr("readonly");if(prov.length!==ui.item.value.length){prov=ui.item.value;$pvb.val(prov);}
semuaProps[prov].forEach(function(v){if(id_kota.indexOf(v.kode_kota)===-1){kota.push(v.kota);id_kota.push(v.kode_kota);}});$pvb.removeClass("error-box");$(".ko-penerima-dropship")[idxe].focus();if(kota.length>0){daftarKab[idxe]=kota.slice();btnKab(idxe);misc.checkIDDropship();$kob.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(kota,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){kaot=event.target.value;idx=kota.indexOf(kaot);idkt=id_kota[idx];if(kaot.length!==ui.item.value.length){kaot=ui.item.value;idx=kota.indexOf(kaot);idkt=id_kota[idx];}
$kob.val(kaot).removeClass("error-box");$kcb.removeAttr("readonly");$("#sejenak").modal({show:1,backdrop:"static"});misc.delPadBody();$.getJSON("/ext/json/ongkir?city="+idkt,function(dt){kec=[];id_kec=[];$("#sejenak").modal("hide");misc.delPadBody();if(dt.list){kecAll=dt.list;if(typeof kecAll==="object"){if(kecAll.length>0){$kcb.removeAttr("readonly");kecAll.forEach(function(v){if(kec.indexOf(misc.caps(v.subdistrict_name))===-1){kec.push(misc.caps(v.subdistrict_name));id_kec.push(v.subdistrict_id);}});if(kec.length>0){daftarKec[idxe]=kec.slice();btnKec(idxe);$(".kk-penerima-dropship")[idxe].focus();$kcb.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(kec,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){ekc=event.target.value;idx=kec.indexOf(ekc);idkct=id_kec[idx];if(ekc.length!==ui.item.value.length){ekc=ui.item.value;idx=kec.indexOf(ekc);idkct=id_kec[idx];}
$kcb.val(ekc).removeClass("error-box");$("#sejenak").modal({show:1,backdrop:"static"});misc.delPadBody();$.getJSON("/ext/json/ongkir?kecamatan="+idkct,function(dt){$("#sejenak").modal("hide");misc.delPadBody();var valuePilihan="";var $ckd=$(".ChosenKurirDropship").eq(idxe);if(dt.list){pilihanKurir=dt.list;$(".ChosenKurirDropship")[idxe].focus();valuePilihan="<option value=\"\" disabled selected=\"selected\">--SILAKAN PILIH KURIR--</option>";pilihanKurir.forEach(function(v,i){(v.costs).forEach(function(vv,ii){if(!(/jtr|peli|surat|dokumen|sps/i.test(vv.service))){valuePilihan+="<option value=\""+misc.caps(v.code)+" ("+misc.caps(vv.service)+")|"+vv.cost[0].value+"|"+ed_etd(vv.cost[0].etd,vv.service)+"|"+i+","+ii+"\">"+misc.caps(v.code)+" ("+misc.caps(vv.service)+") Rp "+misc.tk(vv.cost[0].value)+"/kg ("+ed_etd(vv.cost[0].etd,vv.service)+" hari)</option>";}});if(/jne/i.test(v.code)){if(v.costs.length===0){$("#na_jne_msg").html("<p>Mohon maaf, kurir JNE tujuan <strong>"+ekc+", "+kaot+", "+prov+"</strong> <mark style='color:brown;background:mistyrose;'>tidak tersedia</mark>.</p><p><small>Silakan untuk pilih jasa kurir yang lainnya.</small></p>").promise().done(function(){$("#na_jne").modal("show");misc.delPadBody();});}}});$ckd.html(valuePilihan).promise().done(function(){$ckd.on("change",function(e){var $el=$(e.currentTarget);var valu=$el.val();var $td=$(".terpilihDropship").eq(idxe);var ixp;var compt=(/\|/.test(valu)&&valu!==""&&valu!==undefined)?valu.split("|"):["",0,"",""];var pk_outer;var pk_inner;if(compt[0]!==""&&compt[1]!==0&&compt[2]!==""){if(compt[3]!==""&&(/,/.test(compt[3]))&&compt[3]!==undefined){ixp=compt[3].split(",");pk_outer=pilihanKurir[ixp[0]]||undefined;pk_inner=pk_outer?pk_outer.costs[ixp[1]]:undefined;if(pk_outer&&pk_inner){checkOnline="Bisa langsung lacak paket di halaman <strong>CEK PESANAN</strong> PRINT.CO <i class='fa fa-check'></i>";if(/jne/i.test(pk_outer.code)){desKur[idxe]="<div class='text-center'><img src='"+pth+"jne.png'></div>";}else if(/pos/i.test(pk_outer.code)){desKur[idxe]="<div class='text-center'><img src='"+pth+"pos_giro_logo.png'></div>";}else if(/pandu/i.test(pk_outer.code)){desKur[idxe]="<div class='text-center'><img src='"+pth+"pandu_logo_s.png'></div>";checkOnline="<span style='color:#888'>Lacak paket via tautan luar</span>";}else if(/wahana/i.test(pk_outer.code)){desKur[idxe]="<div class='text-center'><img src='"+pth+"wahana_logo_s.png'></div>";}else{desKur[idxe]="<h4>"+misc.caps(pk_outer.code)+"</h4>";}
desKur[idxe]+="<h5 class='text-center'>"+pk_outer.name+"</h5>";desKur[idxe]+="<p  class='text-center'><strong>"+dataKotaPCO+"</strong> <i class='fa fa-arrow-right'></i> <strong>"+$kcb.val()+", "+$kob.val()+", "+$pvb.val()+"</strong></p><hr style='background:transparent;border-top:1px dashed #999;margin:10px 0;'>";desKur[idxe]+="<p>Nama service: "+pk_inner.service+"</p>";desKur[idxe]+="<p>Deskripsi: "+pk_inner.description+"</p>";desKur[idxe]+="<p>Ongkos kirim: Rp "+misc.tk(pk_inner.cost[0].value)+" / kg</p>";desKur[idxe]+="<p>"+checkOnline+"</p>";desKur[idxe]+="<p>Estimasi sampai: "+ed_etd(pk_inner.cost[0].etd,pk_inner.service)+" hari*</p>";desKur[idxe]+="<p class='text-right'><em><small>*Setelah order selesai dikerjakan.</small></em></p>";desKur[idxe]+="<div class='text-right'><small><small>Silakan buka <a href='/faq#waktu-proses' target='_blank'>FAQ untuk estimasi waktu pengerjaan <i class='fa fa-external-link'></i></a></small></small></div>";btnKur(idxe);}}else{disBtnKur(idxe);}
$td.html(compt[0]);hargaOngkirArr[idxe]=Number(compt[1]);waktuSampai=ed_etd(compt[2],compt[0]);if(indexParent===-1){indexParent=idxe;}
if(hargaOngkirArr[indexParent]){misc.checkIDDropship();updateTotal();}}});});}else{$("#errorOngkir").modal({show:1,backdrop:"static"});misc.delPadBody();}});}});}}else{disBtnKec(idxe);}}}else{disBtnKec(idxe);$("#errorKecamatan").modal({show:1,backdrop:"static"});misc.delPadBody();}});}});}else{disBtnKab();disBtnKec();}}});}}};autoCOMPLETE_T=function(data,flag,waktu){var lokasi=[];var semuaProps={};var namaLokasi="";var nL=[];hargaOngkir=0;waktuSampai=undefined;if(data){data.forEach(function(v){lokasi.push(v.lokasi);if(flag===1){semuaProps[v.lokasi]=[Number(v.t_5),Number(v.t_5_1)];}else{semuaProps[v.lokasi]=Number(v.tarif);}});}
nL=lokasi.slice();nL.sort();namaLokasi="<h4>"+arrayKurir[Number($jku.val())]+"</h4>"+"<ul class='list-group'>"+"<li class='list-group-item list-group-item-info'>Support "+nL.length+" tujuan</li>";nL.forEach(function(v){namaLokasi+="<li class='list-group-item'>"+v+"</li>";});namaLokasi+="</ul>";$blw.html(namaLokasi);$blmt.add($blc).html("LIST LOKASI");$llc.add($blc).fadeIn(0);$kcb.on("input",function(e){var $t=$(e.target);var v=$t.val();$t.val(v.toUpperCase()).addClass("error-box");});$kcb.autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp("^"+re,"i");var a=$.grep(lokasi,function(item){return matcher.test(item);});responseFn(a);},select:function(event,ui){var t=event.target.value;if(t.length!==ui.item.value.length){t=ui.item.value;}
hargaOngkir=semuaProps[t];waktuSampai=waktu;if(hargaOngkir){misc.checkIDKurirStandard();updateTotal();}}});};function mulai(){cntr=0;function get_dropshipID(){var ce=document.cookie;var l;var i=0;var cev;ce=ce.split(";");l=ce.length;while(i<l){if(/printco_idpd=/i.test(ce[i])){cev=ce[i].split("printco_idpd=")[1];break;}
i+=1;}
if(!saved_cookie){saved_cookie="DROPSHIP";}else{if(!(/dropship/i.test(saved_cookie))){saved_cookie+=" & DROPSHIP";}}
cev=JSON.parse(cev);$("#nama-pemesan-dropship").val(misc.dobs(cev.n));$("#email-pemesan-dropship").val(misc.dobs(cev.e));$("#alamat-pemesan-dropship").val(misc.dobs(cev.a));$("#jasa-kurir-dropship").val(Number(misc.dobs(cev.k)));$("#telepon-pemesan-dropship").val(misc.dobs(cev.t));autoCOMPLETE(dataJSON);$("#save_id_dropship").prop("disabled",0);}
function change2dropship(){var ti=$("title").text();var suptip;function nextW(){if($(".pesanan-wrap").length===1&&$(".nama-penerima-dropship").val()===""){$(".dynamic-dropship").append(template).promise().done(function(){$("#bukaBantuanPengisian2, #headingBantuanPengisian, #bodyBantuanPengisian, .standard_rows, .btn-nav-standard").remove();$("footer").eq(0).css({"margin-top":"15px"});$("title").text(ti+" Dropship | PRINT.CO");$(".kataKata").html("Form Pemesanan Dropship "+suptip);$("#jdp").html("2. Data Pesanan (DROPSHIP)");$("head").append("<style>.pesanan-wrap{margin:5px 20px 0 30px;border-radius:8px;border:2px solid transparent;border-left:5px solid darkgreen;border-right:5px solid darkgreen;border-top:1px solid transparent}.pesanan-wrap,.dynamic-dropship{transition:background-color 0.15s, border 0.15s}.dynamic-dropship{border-radius:4px;border:2px dashed transparent;}.pesanan>.panel-body{padding-bottom:15px;}.dropship_rows{display:block}</style>");$(".form-control-dropship").addClass("form-control");$(".notif, .btn-nav-dropship, #tampilkanDetilHarga, #bukaBantuanPengisian1").fadeIn(0);$(".onds").removeClass("onds").addClass("sdno");$("#tutupDetilHarga").fadeOut(0);$(".helpToggle").each(function(i){var $t=$(".helpToggle").eq(i);if($t.css("display")==="none"){$t.fadeIn(0);}});$("#packing-handling").attr("data-original-title","<div class='text-left'>Biaya packing & handling.<br>Dihitung per alamat tujuan.</div>");function nextF(){$(".form-control-readonly").removeAttr("readonly");$("#info_f_standard").removeClass("alert-info").addClass("alert-warning").html("<p><strong><i class='fa fa-info-circle'></i> INFO PENGISIAN DATA PESANAN DROPSHIP</strong></p><ol><li>Untuk menghindari lagging (non-responsive page) atau <code style='background:mistyrose;color:brown'>ERROR</code>, silakan isi selengkap mungkin satu order, baru kemudian tambah order baru.<br>Begitu pula dengan tujuan, lengkapi satu tujuan, lalu kemudian tambah tujuan baru.</li><li>Untuk hapus order, silakan <strong>hapus dulu tujuan di bawah order tersebut</strong> bila ada.</li></ol>").css({"line-height":2});$(".book-wrapping-price, .book-sewing-price, .harga-pesanan, .berat-pesanan, .ko-penerima-dropship, .kk-penerima-dropship").attr("readonly","readonly");djr=undefined;if(/printco_idpd=/i.test(document.cookie)){get_dropshipID();}else{autoCOMPLETE(dataJSON);}
$("section, footer").animate({opacity:1},333);update();misc.checkIDDropship();misc.idPemesanDropshipListener();misc.initTooltip();disBtnKec();disBtnKab();disBtnKur();if($("#nama-pemesan-dropship")[0]){$("#nama-pemesan-dropship")[0].focus();}
emailReminderFlag=1;}
if($(".pesanan-wrap").length>1){$(".pesanan-wrap").last().remove().promise().done(nextF);}else{nextF();}});}}
if(/\|/.test(ti)){ti=ti.split("|")[0];suptip=$("#beta-notifier")[0].outerHTML;dropship=1;gg=0;dcntr=1;$("[data-toggle=\"tooltip\"]").each(function(i){var $t=$("[data-toggle=\"tooltip\"]").eq(i);if($t.tooltip){$t.tooltip("destroy");}});$("#dropship-modal, #dropship-help").prop("disabled",1).fadeOut(0,function(){$("#revert-standard")[0].className+=" btn-social ";$("#revert-standard")[0].disabled=0;$("#revert-standard")[0].style.cssText+="display:inline-block!important;";$("#bukaBantuanPengisian1")[0].className+=" btn-social-icon ";$("#bukaBantuanPengisian1")[0].disabled=0;$("#bukaBantuanPengisian1")[0].style.cssText+="display:inline-block!important;";});resetSemuaData(0);templateDT="<div class=\"dynamic-dropship dropship_rows\" style=\"display:none\">"+$(".dynamic-dropship")[0].innerHTML+template+"</div>"+dropshipDisplay;$("#pesanan, #keterangan_tambahan, #akumulasi_pesanan").fadeOut(0,nextW);}}
function beneran(){function jasaKurir(a){function doThese(){$("label[for='alamat-pemesan']").html("Alamat Lengkap");$(".kantorPrintCo").fadeOut(0,function(){$("#dropdown_help").fadeIn(0,function(){updateTotal();});});}
dropfee=0;var $t=$jku;var tval="";if($t.length>0){tval=$t.val();}
if(tval!==null&&tval!==""){if(!(/^\d?0$/.test(tval.toString()))){if(/bbrp/i.test(tval)){$("#opsiKurirStandard").fadeIn(0);disBtnKur();if(a!==1){$(".alamat-pemesan").val("");$(alamatPemesan).focus();$("#save_id_standard").prop("disabled",1);}else{$("#provinsiBox").focus();}
$(".alamat-pemesan").removeAttr("readonly");$("#provinsiBox").val("").removeAttr("readonly");$(".bantuan-prov").prop("disabled",1);$("#kotaBox").val("").attr("readonly","readonly");$("#kecamatanBox").val("").attr("readonly","readonly");$("#kecamatanBox")[0].setAttribute("placeholder","Kecamatan");$("#provinsiBox")[0].setAttribute("placeholder","Provinsi tujuan");$("label[for='kecamatanBox']").html("Kec.");$("label[for='provinsiBox']").html("Provinsi");$(".helpToggle").fadeIn(0,doThese);$("#opsiTitle").html("Pakai Kurir");djr=undefined;autoCOMPLETE(dataJSON);}else{disBtnProv();disBtnKab();disBtnKec();$("#opsiKurirStandard").fadeOut(0);$pvb.add($kob).add($kcb).removeClass("error-box");$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");if(Number(tval)===2){if(a!==1){$(".alamat-pemesan").val("");$(alamatPemesan).focus();$("#save_id_standard").prop("disabled",1);}else{$("#kecamatanBox").focus();}
$(".alamat-pemesan").removeAttr("readonly");$("#kecamatanBox").val("").removeAttr("readonly");$("#provinsiBox").val($("#provinsiBox").attr("data-provinsi-pco")).attr("readonly","readonly");$("#kotaBox").val($("#kecamatanBox").attr("data-kecamatan-pco").split(", ")[1]).attr("readonly","readonly");$("label[for='kecamatanBox']").html("Lokasi di Bandung");$("#kecamatanBox")[0].setAttribute("placeholder","Lokasi pengiriman");djr=dataJSON2;autoCOMPLETE_T(dataJSON2,0,"Kirim via GO-JEK");$(".helpToggle").fadeOut(150,doThese);}else if(/^(4|5|6)$/.test(Number(tval))){$pvb.add($kob).add($kcb).removeClass("error-box");$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");$("#kecamatanBox").val("").removeAttr("readonly");$("#provinsiBox").val("DKI JAKARTA").attr("readonly","readonly");$("#kotaBox").val("").attr("readonly","readonly");$("#kecamatanBox")[0].setAttribute("placeholder","Lokasi Pool Travel");$("label[for='kecamatanBox']").html("Lokasi pool di Jakarta");$(".alamat-pemesan").val("").attr("readonly","readonly");if(Number(tval)===4){djr=dataJSON4;autoCOMPLETE_T(dataJSON4,1,"Kirim via Travel X-TRANS");}else if(Number(tval)===5){djr=dataJSON5;autoCOMPLETE_T(dataJSON5,1,"Kirim via Travel DAY TRANS");}else if(Number(tval)===6){djr=dataJSON6;autoCOMPLETE_T(dataJSON6,1,"Kirim via Travel BARAYA");}
$("#save_id_standard").prop("disabled",0);$("#kecamatanBox").focus();$(".helpToggle").fadeOut(0,doThese);}
$("#opsiTitle").html("Kirim via "+arrayKurir[Number(tval)]);}}else{disBtnProv();disBtnKab();disBtnKec();djr=undefined;$pvb.add($kob).add($kcb).removeClass("error-box");$("#ChosenKurirStandard").html("<option value=\"\" disabled selected=\"selected\">--SILAKAN LENGKAPI PROV/KOTA/KEC--</option>");$("#terpilihStandard").html("Pilihan Jasa Kurir");$("#provinsiBox, #kecamatanBox, #kotaBox, .alamat-pemesan").attr("readonly","readonly");$("#provinsiBox").val($("#outlet_"+(Number(tval))).attr("data-prov"));$("#kotaBox").val($("#outlet_"+(Number(tval))).attr("data-kec").split(", ")[1]);$("#kecamatanBox").val($("#outlet_"+(Number(tval))).attr("data-kec").split(", ")[0]);$(".alamat-pemesan").val($("#outlet_"+(Number(tval))).attr("data-alamat"));dropfee=Number($("#jasaKurir option:selected").attr("data-dropfee-o"));$("#jb_0_pco").html($("#outlet_"+(Number(tval))).attr("data-buka-0"));$("#jb_1_pco").html($("#outlet_"+(Number(tval))).attr("data-buka-1"));$("#jt_pco").html($("#outlet_"+(Number(tval))).attr("data-tutup"));$("#wa_pco").html($("#outlet_"+(Number(tval))).attr("data-wa"));$("#bbm_pco").html($("#outlet_"+(Number(tval))).attr("data-bbm"));$("#ph_pco").html($("#outlet_"+(Number(tval))).attr("data-ph"));$("label[for='alamat-pemesan']").html("Alamat Pengambilan");$("label[for='kotaBox']").html("Kab/Kot.");$("label[for='kecamatanBox']").html("Kec.");$("#opsiTitle").html($("#opsiTitle").attr("data-a-t"));$("#dropdown_help, #opsiKurirStandard").add($llc).add($blc).fadeOut(0);$("#save_id_standard").prop("disabled",0);$(".helpToggle").fadeOut(150,function(){$(".kantorPrintCo").fadeIn(150,updateTotal);});}}
if(!dropship){misc.checkIDKurirStandard();}}
function get_standardID(){var ce=document.cookie;var l;var i=0;var cev;ce=ce.split(";");l=ce.length;while(i<l){if(/printco_idps=/i.test(ce[i])){cev=ce[i].split("printco_idps=")[1];break;}
i+=1;}
if(!saved_cookie){saved_cookie="STANDARD";}else{if(!(/standard/i.test(saved_cookie))){saved_cookie+=" & STANDARD";}}
cev=JSON.parse(cev);$("#nama-pemesan").val(misc.dobs(cev.n));$("#email-pemesan").val(misc.dobs(cev.e));$("#telepon-pemesan").val(misc.dobs(cev.t));if(/bbrp/i.test(misc.dobs(cev.k))){$jku.val(misc.dobs(cev.k)).promise().done(function(){var tr;tr=setInterval(function(){if(dataJSON&&dataJSON2&&dataJSON4&&dataJSON5&&dataJSON6&&dataJH){$(".alamat-pemesan").val(misc.dobs(cev.a));$("#save_id_standard").prop("disabled",0);jasaKurir(1);emailReminderFlag=1;clearInterval(tr);}},300);});}else{$jku.val(Number(misc.dobs(cev.k))).promise().done(function(){var tr;tr=setInterval(function(){if(dataJSON&&dataJSON2&&dataJSON4&&dataJSON5&&dataJSON6&&dataJH){$(".alamat-pemesan").val(misc.dobs(cev.a));$("#save_id_standard").prop("disabled",0);jasaKurir(1);emailReminderFlag=1;clearInterval(tr);}},300);});}}
dataVidDropship=$("#dataVidPCO").attr("data-vid-dropship");dataVidStandard=$("#dataVidPCO").attr("data-vid-standard");definisiVar();misc.initTooltip();misc.spfLink();misc.helpModal();formNavController();$(".form-control-readonly").removeAttr("readonly");$("input[type='file']").prop("disabled",0);misc.buttonSizing();if($(window).width()>992){$("#bantuan-pengisian-pesanan").carousel({interval:false,pause:true,cycle:false});}
$("#scrollAtas").click(misc.scrollAtas);misc.scrollAtas();$(":file").filestyle({input:false,buttonText:"&nbsp;Buka file &mdash; max 64MB / file",size:"lg",buttonName:"btn-success"});function activateFileSudahAda(){var valInfo="SEMUA FILE sudah ada di PRINTÂ·CO";function inputTextarea(){if(semuaKumplit()){if(misc.getActBtn($(".fp-sub-section"))===2){if(!dropship){$nns.prop("disabled",0);}else{$nnd.prop("disabled",0);}}}else{if(misc.getActBtn($(".fp-sub-section"))===2){if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}}
$selesai.prop("disabled",1);misc.resetSelesai();}}
$("#tautanHolderLuar, #unggahHolderLuar, #fileSudahAda, #help_fsa, #btnFileSudahAda").fadeOut(150,function(){var l=location.href.replace(/[#\?]/g,"");$("#keteranganTambahan").val(valInfo).focus();if(!linkCS&&!linkGS&&!filePesananArr){linkCS.push(l);}else{linkGS=[];linkCS=[];filePesananArr=[];linkCS.push(l);}
$("#daftarTautanFile").html(l);$("#semua-file").html("");$("#tautanFile").val(l);$("#fileSudahAda").removeClass("col-md-4").addClass("col-md-12").promise().done(function(){$("#btnFileSudahAdaCancel, #fileSudahAda, .kettam_info").fadeIn(150,function(){inputTextarea();$("#keteranganTambahan").on("input",inputTextarea);});});});}
$("#btnFileSudahAda").on("click",function(){$("#yakin-semua-file").modal({show:1,backdrop:"static"});$("#yakin-semua-file").on("shown.bs.modal",function(){$("#semua-file-active").on("click",function(){$("#yakin-semua-file").modal("hide").promise().done(activateFileSudahAda);});});});$("#btnFileSudahAdaCancel").on("click",function(e){linkGS=[];linkCS=[];filePesananArr=[];$("#fileSudahAda").add($(e.target)).fadeOut(150,function(){$("#keteranganTambahan").val("");$("#daftarTautanFile").html("");$("#tautanFile").val("");$("#fileSudahAda").removeClass("col-md-12").addClass("col-md-4").promise().done(function(){$("#tautanHolderLuar, #unggahHolderLuar, #btnFileSudahAda, #fileSudahAda, #help_fsa").fadeIn(150);$(".kettam_info").fadeOut(0);if(!dropship){$nns.prop("disabled",1);}else{$nnd.prop("disabled",1);}
$selesai.disabled=1;});});});$("#tampilkanDetilHarga").on("click",function(e){$(".sdno").removeClass("sdno").addClass("onds");$("[data-toggle=\"tooltip\"]").tooltip("destroy");$(e.currentTarget).fadeOut(0,function(){$("#tutupDetilHarga").fadeIn(0,misc.initTooltip);});});$("#tutupDetilHarga").on("click",function(e){$(".onds").removeClass("onds").addClass("sdno");$("[data-toggle=\"tooltip\"]").tooltip("destroy");$(e.currentTarget).fadeOut(0,function(){$("#tampilkanDetilHarga").fadeIn(0,misc.initTooltip);});});misc.idPemesanListener();misc.btnBantuanLokasi();if(/localhost|appspot|\d-d-\d-dot-printco-webapp\.appspot\.com/.test(location.href)){$("#locti").fadeIn(0);}else{$("#locti").remove();}
$jku.on("change",jasaKurir);function reinitP($a){$a.popover({animation:0,html:1,container:"body"});}
$(window).on("scroll",function(){if($(".popover.top.in")){$("[data-toggle=\"popover\"]").popover("destroy");}
reinitP($("[data-toggle=\"popover\"]"));});reinitP($("[data-toggle=\"popover\"]"));if(/firefox/i.test(usat)){resetSemuaData(1);if(/printco_idps=/i.test(document.cookie)){get_standardID();}}
var idp=misc.idGenerator();$("#id-pesanan").val(idp);$("#id-pesanan-dropship").val(idp+"-D");$("#id-pesanan, #id-pesanan-dropship").on("click",function(e){$(e.target).select();});$("#nama-pemesan, #telepon-pemesan, #email-pemesan, #provinsiBox, #nama-pemesan-dropship, #telepon-pemesan-dropship, #email-pemesan-dropship, #alamat-pemesan-dropship, .alamat-pemesan").removeAttr("readonly");$("#dropship-help").on("click",function(){$("#bantuan-dropship").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);});$(".dropship_rows").find("form-control").removeClass("form-control").addClass("dropship-control");$("#dropship-modal").on("click",function(){$("#yakin-dropship").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);$("#yakin-dropship").on("shown.bs.modal",function(){$("#dropship-active").on("click",function(){$("#yakin-dropship").modal("hide");$(".bantuanLokasi2, #dropship-modal, #dropship-help").prop("disabled",1);$("section, footer").css({opacity:0.5});$("#yakin-dropship").on("hidden.bs.modal",change2dropship);});});});$("#revert-standard").on("click",function(){$("#yakinReloadTab").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);$("#reloadTabFP").on("click",function(){$("#yakinReloadTab").modal("hide").promise().done(misc.spfLinkFX);$("#yakinReloadTab").on("hidden.bs.modal",function(){var href=location.href.replace(/[#\?]/g,"");location.replace(href);});});});function tutupBantuanPengisian2(){$("#headingBantuanPengisian, #formStandardHelp").slideUp(300,function(){$("#bukaBantuanPengisian2").prop("disabled",0);});}
function tutupYTVBS(e,n){var $t;if(e.target){$t=$(e.target);}else{$t=e;}
$("#iframeYTVBS").attr("src","").promise().done(function(){$t.add($("#wrapYTVBS")).fadeOut(300,function(){$t.removeClass("btn-social");$("#nontonYTVBS").fadeIn(300,function(){var pos=$("#headingBantuanPengisian").offset().top;$hb.animate({scrollTop:pos},300,function(){if(typeof n==="function"){n();}});});});});}
$("#tutupBantuanPengisian2").on("click",function(){if($("#iframeYTVBS")[0].getAttribute("src")){tutupYTVBS($("#tutupYTVBS"),tutupBantuanPengisian2);}else{tutupBantuanPengisian2();}});$("#bukaBantuanPengisian2").on("click",function(e){$(e.target).prop("disabled",1).promise().done(function(){$("#headingBantuanPengisian, #formStandardHelp").slideDown(300,function(){var pos=$("#headingBantuanPengisian").offset().top;$hb.animate({scrollTop:pos},300);});});});$("#nontonYTVBS").on("click",function(e){var $t=$(e.target);var prm="?wmode=transparent&modestbranding=1&rel=0&showinfo=0&fs=1&autoplay=1&html5=1";var url="https://www.youtube.com/embed/"+dataVidStandard;$t.fadeOut(300,function(){$("#tutupYTVBS, #wrapYTVBS").fadeIn(300,function(){$("#tutupYTVBS").addClass("btn-social");$("#iframeYTVBS").attr("src",url+prm).promise().done(function(){var pos=$("#wrapYTVBS").offset().top;$hb.animate({scrollTop:pos},300);});});});});$("#tutupYTVBS").on("click",function(e){var n=undefined;tutupYTVBS(e,n);});function tutupBantuanPengisian1(){$("#formDropshipHelp").slideUp(300,function(){$("#bukaBantuanPengisian1").prop("disabled",0);});}
function tutupYTVBD(e,n){var $t;if(e.target){$t=$(e.target);}else{$t=e;}
$("#iframeYTVBD").attr("src","").promise().done(function(){$t.add($("#wrapYTVBD")).fadeOut(300,function(){$t.removeClass("btn-social");$("#nontonYTVBD").fadeIn(300,function(){var pos=$("#formDropshipHelp").offset().top;$hb.animate({scrollTop:pos},300,function(){if(typeof n==="function"){n(1);}});});});});}
$("#tutupBantuanPengisian1").on("click",function(){if($("#iframeYTVBD")[0].getAttribute("src")){tutupYTVBD($("#tutupYTVBD"),tutupBantuanPengisian1);}else{tutupBantuanPengisian1();}});$("#bukaBantuanPengisian1").on("click",function(e){$(e.target).prop("disabled",1).promise().done(function(){$("#formDropshipHelp").slideDown(300,function(){var pos=$("#formDropshipHelp").offset().top;$hb.animate({scrollTop:pos},300);});});});$("#tutupYTVBD").on("click",function(e){var n=undefined;tutupYTVBD(e,n);});$("#nontonYTVBD").on("click",function(e){var $t=$(e.target);var prm="?wmode=transparent&modestbranding=1&rel=0&showinfo=0&fs=1&autoplay=1&html5=1";var url="https://www.youtube.com/embed/"+dataVidDropship;$t.fadeOut(300,function(){$("#tutupYTVBD, #wrapYTVBD").fadeIn(300,function(){$("#tutupYTVBD").addClass("btn-social");$("#iframeYTVBD").attr("src",url+prm).promise().done(function(){var pos=$("#wrapYTVBD").offset().top;$hb.animate({scrollTop:pos},300);});});});});$("#kurir-help").on("click",function(){$("#bantuan-kurir").modal({show:1,backdrop:"static"});});function setCookie(){var s=";secure";if(/localhost/i.test(location.href)){s="";}
var d=new Date();d.setTime(d.getTime()+14*24*3600*1000);var expires="expires="+d.toUTCString();document.cookie="old_browser=1; "+expires+";path=/form-pemesanan"+s;}
function getCookie(){var c=document.cookie;var result=1;if(/old_browser=1/i.test(c)){result=0;}
return result;}
function checkNUA(a){var result;var aa=device;if(/(firefox|chrome|safari)\/[4-9]\d/i.test(a)){result="<div style='color:darkgreen;font-size:12px;'><div>"+a+"</div><div>"+aa+"</div></div>";$("#compbrow").fadeIn(0);}else{result="<div style='color:brown;font-size:12px;'><div>"+a+" <i class='fa fa-exclamation-circle'></i></div><div>"+aa+" <i class='fa fa-exclamation-circle'></i></div></div>";$("#rekbrow").fadeIn(0);}
return result;}
if(!dropship&&!(/printco_idps=/i.test(document.cookie))){$("#provinsiBox")[0].setAttribute("readonly","readonly");$(".alamat-pemesan").attr("readonly","readonly");}else{get_standardID();}
$("#navua").html(checkNUA(usat));$("#id-loader-img").slideUp(300,function(){$("#beta-notifier, .notif").fadeIn(200,function(){misc.initTooltip();var ws;var timo=function(){if(parseInt($("body").css("padding-right"),10)===0&&parseInt($("body").css("padding-left"),10)===0){$("#dirMessage").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);window.clearInterval(ws);}
$("#dirMessage").on("hidden.bs.modal",function(){if(getCookie()){$(".old_browser").slideDown(200,function(){$(".tutup_old_browser").on("click",function(){setCookie();$(".old_browser").slideUp(300,function(){if($("#nama-pemesan")[0]){$("#nama-pemesan")[0].focus();}});});});}else{if($("#nama-pemesan")[0]){$("#nama-pemesan")[0].focus();}}});};var name="";$(".dis").prop("disabled",0);if($("#dirMessage").length===1){if(!misc.check_cookie_id()[0]){if(document.referrer!==location.href){ws=window.setInterval(timo,300);}}else{if(document.referrer!==location.href){if(misc.check_cookie_id()[1]){name=misc.check_cookie_id()[1].toUpperCase();if(/\ /.test(name)){name=name.split(" ");if(name.length>1){name="<h3 style='margin:20px 0'>"+name[0]+" "+name[1]+"</h3>";}else{name="<h3 style='margin:20px 0'>"+name[0]+"</h3>";}}}
$("#dirMessage").find(".modal-body").eq(0).html("<div class='text-center'><p>Selamat datang kembali!</p>"+name+"<hr style='background:transparent;border:0;border-top:2px dashed #ccc'><div><small style='color:royalblue'><samp style='letter-spacing:2px'>FORM PEMESANAN PRINT.CO <strong>"+$("#beta-notifier").text()+"</strong><br><em style='color:#888'>"+$("#w_p_a").text()+"</em></samp></small></div>").promise().done(function(){ws=window.setInterval(timo,300);});}}}else{if(getCookie()){$(".old_browser").slideDown(300,function(){if(!misc.check_cookie_id()[0]){if($("#nama-pemesan")[0]){$("#nama-pemesan")[0].focus();}}
$(".tutup_old_browser").on("click",function(){setCookie();$(".old_browser").slideUp(300,function(){if($("#nama-pemesan")[0]){$("#nama-pemesan")[0].focus();}});});});}else{if(!misc.check_cookie_id()[0]){if($("#nama-pemesan")[0]){$("#nama-pemesan")[0].focus();}}}}});});}
function getPriceDiscount(){if($("[name='jabedi']").length){jabedi=1;if($(".book-sewing").children("option").length>1){$(".book-sewing").children("option").last().remove();}}
var request=new XMLHttpRequest();request.open("GET","/form-pemesanan/json/rhps",true);request.onload=function(){if(request.status>=200&&request.status<400){var dt=JSON.parse(request.responseText);if(dt){dataJH=dt;$("#diskonHarga").attr("data-diskon-harga",dt.discount).attr("data-diskon-update",dt.update).attr("data-diskon-limit",dt.limit).promise().done(function(){var $ukc=$(".ukuran-kertas").children();var ukv=["_*_",dt.h_k_b6+"|"+dt.b_k_b6+"|B6",dt.h_k_a5+"|"+dt.b_k_a5+"|A5",dt.h_k_b5+"|"+dt.b_k_b5+"|B5",dt.h_k_a4+"|"+dt.b_k_a4+"|A4"];var ukvp=["_*_",dt.h_k_b6_p+"|"+dt.b_k_b6+"|B6",dt.h_k_a5_p+"|"+dt.b_k_a5+"|A5",dt.h_k_b5_p+"|"+dt.b_k_b5+"|B5",dt.h_k_a4_p+"|"+dt.b_k_a4+"|A4"];var ukvw=["_*_",dt.h_k_b6w+"|"+dt.b_k_b6+"|B6",dt.h_k_a5w+"|"+dt.b_k_a5+"|A5",dt.h_k_b5w+"|"+dt.b_k_b5+"|B5",dt.h_k_a4w+"|"+dt.b_k_a4+"|A4"];var $jcc=$(".jenis-cover").children();var jcv=["_*_",dt.h_c_sw+"|Soft Cover Warna",dt.h_c_sbw+"|Soft Cover BW",dt.h_c_hbw+"|Hard Cover BW",dt.h_c_hw+"|Hard Cover Warna",dt.h_rk_sw+"|SC Warna RING KAWAT",dt.h_rk_sbw+"|SC BW RING KAWAT",dt.h_rk_hbw+"|HC BW RING KAWAT",dt.h_rk_hw+"|HC Warna RING KAWAT"];$ukc.each(function(i,v){$(v).val(ukv[i]).attr("data-v-p",ukvp[i]).attr("data-o-p",ukv[i]).attr("data-w-p",ukvw[i]);});$jcc.each(function(i,v){$(v).val(jcv[i]);});refPnH=dt.h_pnh||5000;$(".hargaBookWrap").val(dt.h_b_w);$("#book-wrap").attr("data-h-bw","Rp "+misc.tk(dt.h_b_w));$(".hargaBookWrap")[0].innerHTML+=" ( +Rp "+misc.tk(dt.h_b_w)+" &times; Jumlah Copy )";if(!jabedi){$(".hargaBookSew").val(dt.h_b_s);$("#book-sewing").attr("data-h-bs","Rp "+misc.tk(dt.h_b_s));$(".hargaBookSew")[0].innerHTML+=" ( +Rp "+misc.tk(dt.h_b_s)+" &times; Jumlah Copy )";}}).promise().done(beneran);}}else{$("#jsonGetError").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);}
xhrCounter=0;};request.onerror=function(){$("#jsonGetError").modal({show:1,backdrop:"static"}).promise().done(misc.delPadBody);xhrCounter=0;};xhrCounter+=1;if(xhrCounter===1){request.send();}}
getPriceDiscount();}
function cekDulu(){var result=0;misc.buttonSizing();var uav=window.navigator.userAgent;if(!!window.FileReader&&!!window.atob&&!!window.btoa&&!!window.addEventListener&&!(/msie|trident/i.test(uav))){result=1;}
return result;}
function mundur(){$("#wrap-luar").fadeOut(300,function(){$("#wrap-luar").remove();$("#oldBrowser").modal({backdrop:"static",keyboard:false,show:true});misc.delPadBody();});}
if(!dataJSON&&!dataJSON2&&!dataJSON4&&!dataJSON5&&!dataJSON6){cntr+=1;if(cntr===1){if(cekDulu()===1){$.getJSON(jsonPath,function(dt){dataJSON=dt;}).done(function(){$.getJSON(jsonPath2,function(dt){dataJSON2=dt;}).done(function(){$.getJSON(jsonPath4,function(dt){dataJSON4=dt;}).done(function(){$.getJSON(jsonPath5,function(dt){dataJSON5=dt;}).done(function(){$.getJSON(jsonPath6,function(dt){dataJSON6=dt;});});});});});$.each(imgs,function(i){$("<img/>").attr("src",pth+imgs[i]);});$(window).on("load",mulai);}else{mundur();}}}else{mulai();}}